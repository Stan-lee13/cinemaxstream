[{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\AdBlockingVideoPlayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\AiTrailerButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\BackButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\CategoryBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ContentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[392,395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[392,395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Play, ImageOff } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Content } from \"@/types/content\";\r\n\r\ninterface ContentCardProps {\r\n  item: Content;\r\n  onCardClick?: (item: Content) => void;\r\n}\r\n\r\n/**\r\n * Defensive safe guard for ID assignment\r\n */\r\nconst isValidContentId = (id: any): id is string | number =>\r\n  !!id && (typeof id === \"string\" || typeof id === \"number\");\r\n\r\nconst ContentCard: React.FC<ContentCardProps> = ({ item, onCardClick }) => {\r\n  if (!isValidContentId(item?.id)) {\r\n    console.warn(\"[ContentCard] Skipping render due to invalid or missing ID.\", { item });\r\n    return null;\r\n  }\r\n\r\n  // Defensive: Only allow string/number IDs and prevent fallbacks\r\n  const contentId = item.id;\r\n\r\n  return (\r\n    <div\r\n      key={contentId}\r\n      className=\"min-w-[180px] sm:min-w-[220px] flex-shrink-0\"\r\n      data-card-title={item.title}\r\n      data-card-id={String(contentId)}\r\n    >\r\n      <Link\r\n        to={`/content/${contentId}`}\r\n        onClick={() => onCardClick?.(item)}\r\n      >\r\n        <div className=\"movie-card h-[260px] sm:h-[300px] relative\">\r\n          {item.poster || item.image ? (\r\n            <img\r\n              src={item.poster || item.image}\r\n              alt={item.title}\r\n              className=\"w-full h-full object-cover rounded-lg\"\r\n              onError={e => {\r\n                // Hide broken images with a fallback overlay\r\n                (e.target as HTMLImageElement).style.display = \"none\";\r\n                const parent = (e.target as HTMLImageElement).parentElement;\r\n                if (parent) {\r\n                  parent.innerHTML += `<div class='flex flex-col items-center justify-center h-full w-full bg-gray-950/90 rounded-lg absolute inset-0 z-10'><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"mx-auto text-gray-600\" width=\"42\" height=\"42\" fill=\"none\" viewBox=\"0 0 24 24\"><path d=\"M9.44 9.44a5 5 0 0 0 7.07 7.07m-1.06-8.13a5 5 0 0 0-7.07 7.07M9 5v.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM3 3l18 18\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg><span class='text-xs mt-1 text-gray-500'>Image unavailable</span></div>`;\r\n                }\r\n              }}\r\n            />\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center h-full w-full bg-gray-950/90 rounded-lg\">\r\n              <ImageOff size={42} className=\"mx-auto text-gray-600\" />\r\n              <span className=\"text-xs mt-1 text-gray-500\">Image unavailable</span>\r\n            </div>\r\n          )}\r\n          <div className=\"movie-overlay\">\r\n            <div className=\"flex justify-between items-center mb-1\">\r\n              <span className=\"text-xs bg-yellow-500/20 px-1.5 py-0.5 rounded flex items-center gap-0.5\">\r\n                <svg className=\"w-3 h-3 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"></path>\r\n                </svg>\r\n                <span className=\"text-yellow-500 font-medium\">\r\n                  {item.rating || \"ΓÇö\"}\r\n                </span>\r\n              </span>\r\n              <span className=\"text-xs\">{item.year || \"ΓÇö\"}</span>\r\n            </div>\r\n            <h3 className=\"font-medium line-clamp-1\">{item.title || \"Untitled\"}</h3>\r\n            <div className=\"flex gap-2 mt-2\">\r\n              <Button \r\n                variant=\"secondary\" \r\n                size=\"sm\" \r\n                className=\"w-full gap-1 bg-white/10 hover:bg-white/20 border-none\"\r\n              >\r\n                <Play size={14} />\r\n                <span>Play</span>\r\n              </Button>\r\n              {/* NO DOWNLOAD BUTTON, streaming only */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContentCard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ContentRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ContentRowControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ContentRowHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ContentRowList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\CreditUsageBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\DownloadButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\DownloadModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\EpisodeSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[619,622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[619,622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[659,662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[659,662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Component, ErrorInfo, ReactNode } from 'react';\r\nimport { toast } from 'sonner';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  public state: State = {\r\n    hasError: false\r\n  };\r\n\r\n  public static getDerivedStateFromError(error: Error): State {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    // Log to production error tracking service\r\n    if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n      (window as any).errorReporter.captureException(error, 'ErrorBoundary', 'critical');\r\n    }\r\n    toast.error('An unexpected error occurred. Please refresh the page.');\r\n  }\r\n\r\n  public render() {\r\n    if (this.state.hasError) {\r\n      return this.props.fallback || (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n          <div className=\"text-center space-y-4 p-8\">\r\n            <h1 className=\"text-2xl font-bold text-foreground\">Something went wrong</h1>\r\n            <p className=\"text-muted-foreground\">An unexpected error occurred. Please try refreshing the page.</p>\r\n            <div className=\"space-x-4\">\r\n              <button \r\n                onClick={() => window.location.reload()} \r\n                className=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\r\n              >\r\n                Refresh Page\r\n              </button>\r\n              <button \r\n                onClick={() => this.setState({ hasError: false })}\r\n                className=\"px-4 py-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md transition-colors\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ErrorFreeComponents.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[892,895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[892,895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[932,935],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[932,935],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2530,2533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2530,2533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Error-free wrapper components with proper error boundaries and fallbacks\r\n */\r\nimport React, { Component, ReactNode, ErrorInfo } from 'react';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ErrorBoundaryState {\r\n  hasError: boolean;\r\n  error?: Error;\r\n}\r\n\r\ninterface ErrorBoundaryProps {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n}\r\n\r\nexport class ComponentErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n  constructor(props: ErrorBoundaryProps) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    // Log to production error tracking service\r\n    if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n      (window as any).errorReporter.captureException(error, 'ComponentError', 'high');\r\n    }\r\n    \r\n    // Call custom error handler if provided\r\n    this.props.onError?.(error, errorInfo);\r\n    \r\n    // Show user-friendly toast\r\n    toast.error('Something went wrong. Please refresh the page.');\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return this.props.fallback || (\r\n        <div className=\"flex items-center justify-center p-8 text-center\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-2\">Something went wrong</h3>\r\n            <p className=\"text-muted-foreground mb-4\">Please refresh the page to try again.</p>\r\n            <button \r\n              className=\"px-4 py-2 bg-primary text-primary-foreground rounded-md\"\r\n              onClick={() => window.location.reload()}\r\n            >\r\n              Refresh Page\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n// Safe component wrapper for potentially problematic components\r\nexport const SafeComponent = ({ \r\n  children, \r\n  fallback \r\n}: { \r\n  children: ReactNode; \r\n  fallback?: ReactNode; \r\n}) => (\r\n  <ComponentErrorBoundary fallback={fallback}>\r\n    {children}\r\n  </ComponentErrorBoundary>\r\n);\r\n\r\n// Safe image component with error handling\r\nexport const SafeImage = ({ \r\n  src, \r\n  alt, \r\n  fallback = 'https://images.unsplash.com/photo-1489599767810-b49fa91cd65b?w=300&h=450&fit=crop&crop=center',\r\n  className = '',\r\n  ...props \r\n}: {\r\n  src: string;\r\n  alt: string;\r\n  fallback?: string;\r\n  className?: string;\r\n  [key: string]: any;\r\n}) => {\r\n  const [imgSrc, setImgSrc] = React.useState(src);\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n\r\n  const handleError = () => {\r\n    if (imgSrc !== fallback) {\r\n      setImgSrc(fallback);\r\n    }\r\n  };\r\n\r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className={`relative ${className}`}>\r\n      {isLoading && (\r\n        <div className=\"absolute inset-0 bg-muted animate-pulse rounded\" />\r\n      )}\r\n      <img\r\n        src={imgSrc}\r\n        alt={alt}\r\n        onError={handleError}\r\n        onLoad={handleLoad}\r\n        className={`${className} ${isLoading ? 'opacity-0' : 'opacity-100'} transition-opacity`}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\HeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\InstallPrompt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\LoadingState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\MovieDetail.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[421,424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[421,424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1357,1360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1357,1360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1399,1402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1399,1402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1810,1813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1810,1813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1852,1855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1852,1855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Play, Heart, Info, Plus } from 'lucide-react';\r\nimport BackButton from \"./BackButton\";\r\nimport PremiumBadge from \"./PremiumBadge\";\r\nimport TrailerModal from \"./TrailerModal\";\r\nimport { hasPremiumAccess } from \"@/utils/videoUtils\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface MovieDetailProps {\r\n  content: any;\r\n  liked: boolean;\r\n  toggleFavorite: () => void;\r\n  showTrailer: () => void;\r\n  startWatching: () => void;\r\n}\r\n\r\nconst MovieDetail = ({\r\n  content,\r\n  liked,\r\n  toggleFavorite,\r\n  showTrailer,\r\n  startWatching\r\n}: MovieDetailProps) => {\r\n  const [showTrailerModal, setShowTrailerModal] = useState(false);\r\n  const isPremiumContent = content?.is_premium || (content?.rating && parseFloat(content.rating) > 8.0);\r\n  const canAccessPremium = hasPremiumAccess();\r\n\r\n  const handleWatchButtonClick = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    // Navigate to content detail page\r\n    \r\n    try {\r\n      if (isPremiumContent && !canAccessPremium) {\r\n        toast.error(\"Premium subscription required to watch this content\");\r\n        return;\r\n      }\r\n      startWatching();\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'MovieDetail', 'medium');\r\n      }\r\n      toast.error(\"Failed to start watching. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleTrailerButtonClick = () => {\r\n    setShowTrailerModal(true);\r\n    try {\r\n      setShowTrailerModal(true);\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'MovieDetail', 'medium');\r\n      }\r\n      toast.error(\"Failed to load trailer. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleFavoriteButtonClick = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    toggleFavorite();\r\n  };\r\n\r\n  const handleAddToWatchlist = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    toast.info(\"Added to watchlist\");\r\n  };\r\n\r\n  // Get trailer key for the content\r\n  const getTrailerKey = () => {\r\n    if (content?.trailer_key) {\r\n      return content.trailer_key;\r\n    }\r\n    // Fallback trailer key\r\n    return 'dQw4w9WgXcQ';\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative h-[70vh]\">\r\n      <BackButton fixed />\r\n\r\n      <div \r\n        className=\"absolute inset-0 bg-cover bg-center\"\r\n        style={{ backgroundImage: `url(${content.image_url || content.image || ''})` }}\r\n      >\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent\"></div>\r\n      </div>\r\n      \r\n      <div className=\"container mx-auto px-4 relative h-full flex items-end pb-16\">\r\n        <div className=\"w-full lg:w-2/3 animate-fade-in\">\r\n          <div className=\"flex flex-wrap gap-3 mb-4\">\r\n            <span className=\"px-2 py-1 rounded-md bg-cinemax-500/20 text-cinemax-400 text-xs font-semibold\">\r\n              <div className=\"inline mr-1\" />\r\n              {content.content_type || content.type || 'movie'}\r\n            </span>\r\n            \r\n            {isPremiumContent && (\r\n              <PremiumBadge showLock={!canAccessPremium} />\r\n            )}\r\n\r\n            <span className=\"text-gray-400 text-sm\">{content.year || \"ΓÇö\"}</span>\r\n            <span className=\"text-gray-400 text-sm\">{content.duration || \"ΓÇö\"}</span>\r\n            <span className=\"flex items-center gap-1 bg-yellow-500/20 px-2 py-1 rounded-md\">\r\n              <svg className=\"w-3 h-3 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"></path>\r\n              </svg>\r\n              <span className=\"text-yellow-500 text-xs font-medium\">{content.rating || \"ΓÇö\"}</span>\r\n            </span>\r\n          </div>\r\n          \r\n          <h1 className=\"text-4xl md:text-5xl font-bold mb-4\">{content.title || \"Untitled\"}</h1>\r\n          <p className=\"text-gray-300 mb-8 text-sm md:text-base max-w-2xl\">\r\n            {content.description || \"No description available.\"}\r\n          </p>\r\n          \r\n          <div className=\"flex flex-wrap gap-4\">\r\n            <Button \r\n              className=\"bg-cinemax-500 hover:bg-cinemax-600 gap-2 px-6\" \r\n              size=\"lg\"\r\n              onClick={handleWatchButtonClick}\r\n              aria-label=\"Watch Now\"\r\n            >\r\n              <Play size={18} />\r\n              <span>Watch Now</span>\r\n            </Button>\r\n            \r\n            <Button \r\n              variant=\"outline\" \r\n              size=\"lg\"\r\n              className=\"gap-2 border-gray-600 hover:bg-secondary hover:text-white px-6\" \r\n              onClick={handleTrailerButtonClick}\r\n              aria-label=\"Watch Trailer\"\r\n            >\r\n              <Info size={18} />\r\n              <span>Watch Trailer</span>\r\n            </Button>\r\n            \r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"icon\" \r\n              className={`rounded-full border ${\r\n                liked \r\n                  ? \"bg-cinemax-500/20 border-cinemax-500 text-cinemax-500\" \r\n                  : \"border-gray-700 hover:bg-gray-700/50\"\r\n              }`}\r\n              onClick={handleFavoriteButtonClick}\r\n              aria-label={liked ? \"Remove from favorites\" : \"Add to favorites\"}\r\n            >\r\n              <Heart size={18} fill={liked ? \"currentColor\" : \"none\"} />\r\n            </Button>\r\n            \r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"icon\" \r\n              className=\"rounded-full border border-gray-700 hover:bg-gray-700/50\"\r\n              onClick={handleAddToWatchlist}\r\n              aria-label=\"Add to watchlist\"\r\n            >\r\n              <Plus size={18} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Trailer Modal */}\r\n      <TrailerModal\r\n        isOpen={showTrailerModal}\r\n        onClose={() => setShowTrailerModal(false)}\r\n        trailerKey={getTrailerKey()}\r\n        title={content.title || \"Untitled\"}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MovieDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\NeonEdgeEffect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\NotificationBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[609,612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[609,612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Bell, X } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport NotificationCard from './NotificationCard';\r\nimport { useNotifications } from '@/hooks/useNotifications';\r\n\r\nconst NotificationBar = () => {\r\n  const {\r\n    notifications,\r\n    setShowNotifications,\r\n    showNotifications,\r\n    notificationCount,\r\n    permissionGranted,\r\n    requestNotificationPermission,\r\n    markAsRead,\r\n    markAllAsRead,\r\n  } = useNotifications();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleNotificationClick = (notification: any) => {\r\n    markAsRead(notification.id);\r\n    if (notification.contentId) {\r\n      navigate(`/content/${notification.contentId}`);\r\n    }\r\n    setShowNotifications(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"sm\"\r\n        className=\"relative p-2\"\r\n        onClick={() => setShowNotifications(!showNotifications)}\r\n        aria-label=\"Notifications\"\r\n      >\r\n        <Bell size={18} className=\"text-white\" />\r\n        {notificationCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-cinemax-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\r\n            {notificationCount}\r\n          </span>\r\n        )}\r\n      </Button>\r\n\r\n      {showNotifications && (\r\n        <div className=\"absolute right-0 mt-2 w-72 md:w-80 bg-gray-900 border border-gray-800 rounded-md shadow-lg z-50 max-h-[80vh] overflow-hidden\">\r\n          <div className=\"p-3 border-b border-gray-800 flex items-center justify-between\">\r\n            <h3 className=\"font-semibold text-sm\">Notifications</h3>\r\n            <div className=\"flex gap-1\">\r\n              {!permissionGranted && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={requestNotificationPermission}\r\n                  className=\"text-xs px-2 py-1 h-auto\"\r\n                >\r\n                  Enable\r\n                </Button>\r\n              )}\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setShowNotifications(false)}\r\n                className=\"p-1 h-auto\"\r\n              >\r\n                <X size={14} />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"max-h-[300px] overflow-y-auto\">\r\n            {notifications.length > 0 ? (\r\n              <>\r\n                {notifications.map(notification => (\r\n                  <NotificationCard\r\n                    key={notification.id}\r\n                    notification={notification}\r\n                    onClick={handleNotificationClick}\r\n                  />\r\n                ))}\r\n                {notificationCount > 0 && (\r\n                  <div className=\"p-2 border-t border-gray-800\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      className=\"w-full text-xs py-2\"\r\n                      onClick={markAllAsRead}\r\n                    >\r\n                      Mark all as read\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <div className=\"p-4 text-center text-gray-400 text-sm\">\r\n                No new notifications\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationBar;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\NotificationCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\PersonalizedSections.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\PlaySplashScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\PremiumBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\PremiumCodeInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\PremiumCodeModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\PremiumPromoModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ProductionMonitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\SeriesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\SplashScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\StreamingProviderSelector.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[518,521],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[518,521],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Check, ChevronDown } from \"lucide-react\";\r\nimport { \r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuGroup,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { getProviderIcon } from \"@/utils/urlUtils\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\n\r\ninterface StreamingProviderSelectorProps {\r\n  providers: any[];\r\n  activeProvider: string;\r\n  contentType: string;\r\n  onProviderChange: (providerId: string) => void;\r\n  variant?: 'default' | 'inline' | 'grid';\r\n}\r\n\r\nconst StreamingProviderSelector = ({\r\n  providers,\r\n  activeProvider,\r\n  contentType,\r\n  onProviderChange,\r\n  variant = 'default'\r\n}: StreamingProviderSelectorProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  \r\n  // Find the active provider\r\n  const currentProvider = providers.find(p => p.id === activeProvider) || providers[0];\r\n  \r\n  // Group providers by type for better organization\r\n  const groupedProviders = providers.reduce((acc, provider) => {\r\n    const group = provider.isPremium ? 'premium' : \r\n                  provider.isTorrent ? 'torrent' :\r\n                  provider.contentType === 'anime' ? 'anime' : 'standard';\r\n    \r\n    if (!acc[group]) {\r\n      acc[group] = [];\r\n    }\r\n    \r\n    acc[group].push(provider);\r\n    return acc;\r\n  }, {} as Record<string, typeof providers>);\r\n  \r\n  if (variant === 'inline') {\r\n    return (\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {providers.map(provider => (\r\n          <Button\r\n            key={provider.id}\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onProviderChange(provider.id)}\r\n            className={`${\r\n              activeProvider === provider.id \r\n                ? \"bg-cinemax-500/20 border-cinemax-500 text-white\" \r\n                : \"bg-background border-gray-700 text-gray-300\"\r\n            }`}\r\n          >\r\n            {provider.name}\r\n            {provider.isTorrent && <span className=\"text-xs ml-1 text-yellow-500\">(Torrent)</span>}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (variant === 'grid') {\r\n    return (\r\n      <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2\">\r\n        {providers.map(provider => (\r\n          <Button\r\n            key={provider.id}\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onProviderChange(provider.id)}\r\n            className={`justify-start ${\r\n              activeProvider === provider.id \r\n                ? \"bg-cinemax-500/20 border-cinemax-500 text-white\" \r\n                : \"bg-background border-gray-700 text-gray-300\"\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center gap-2 w-full\">\r\n              <img \r\n                src={getProviderIcon(provider.id)} \r\n                alt={provider.name}\r\n                className=\"w-4 h-4 rounded object-contain\"\r\n                onError={(e) => {\r\n                  (e.target as HTMLImageElement).src = '/icons/play.png';\r\n                }}\r\n              />\r\n              <span className=\"truncate\">{provider.name}</span>\r\n              {activeProvider === provider.id && (\r\n                <Check className=\"h-3 w-3 ml-auto\" />\r\n              )}\r\n            </div>\r\n          </Button>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\r\n      <DropdownMenuTrigger asChild>\r\n        <Button \r\n          variant=\"outline\" \r\n          className=\"w-full justify-between border-gray-700 bg-gray-800/50 hover:bg-gray-700/50\"\r\n        >\r\n          <div className=\"flex items-center gap-2\">\r\n            <img \r\n              src={getProviderIcon(activeProvider)} \r\n              alt={currentProvider?.name}\r\n              className=\"w-5 h-5 rounded object-contain\"\r\n              onError={(e) => {\r\n                (e.target as HTMLImageElement).src = '/icons/play.png';\r\n              }}\r\n            />\r\n            <span>{currentProvider?.name}</span>\r\n          </div>\r\n          <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n        </Button>\r\n      </DropdownMenuTrigger>\r\n      \r\n      <DropdownMenuContent align=\"end\" className=\"w-[250px]\">\r\n        <DropdownMenuLabel>Select Provider</DropdownMenuLabel>\r\n        <DropdownMenuSeparator />\r\n        \r\n        <ScrollArea className=\"h-[300px]\">\r\n          {/* Recommended providers first */}\r\n          <DropdownMenuGroup>\r\n            <DropdownMenuLabel className=\"text-xs text-gray-400\">Recommended for {contentType}</DropdownMenuLabel>\r\n            {providers\r\n              .filter(p => p.contentType === contentType || p.contentType === 'all')\r\n              .slice(0, 5)\r\n              .map(provider => (\r\n                <DropdownMenuItem\r\n                  key={provider.id}\r\n                  onClick={() => {\r\n                    onProviderChange(provider.id);\r\n                    setIsOpen(false);\r\n                  }}\r\n                  className=\"flex items-center justify-between cursor-pointer\"\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <img \r\n                      src={getProviderIcon(provider.id)} \r\n                      alt={provider.name}\r\n                      className=\"w-4 h-4 rounded object-contain\"\r\n                      onError={(e) => {\r\n                        (e.target as HTMLImageElement).src = '/icons/play.png';\r\n                      }}\r\n                    />\r\n                    <span>{provider.name}</span>\r\n                  </div>\r\n                  {activeProvider === provider.id && (\r\n                    <Check className=\"h-4 w-4\" />\r\n                  )}\r\n                </DropdownMenuItem>\r\n              ))}\r\n          </DropdownMenuGroup>\r\n          \r\n          <DropdownMenuSeparator />\r\n          \r\n          {/* Show all providers by group */}\r\n          {Object.entries(groupedProviders).map(([group, groupProviders]) => (\r\n            <DropdownMenuGroup key={group}>\r\n              <DropdownMenuLabel className=\"text-xs text-gray-400\">\r\n                {group === 'premium' ? 'Premium Services' : \r\n                 group === 'torrent' ? 'Torrent Sources' :\r\n                 group === 'anime' ? 'Anime Specific' : 'Standard Sources'}\r\n              </DropdownMenuLabel>\r\n              \r\n              {Array.isArray(groupProviders) && groupProviders.map(provider => (\r\n                <DropdownMenuItem\r\n                  key={provider.id}\r\n                  onClick={() => {\r\n                    onProviderChange(provider.id);\r\n                    setIsOpen(false);\r\n                  }}\r\n                  className=\"flex items-center justify-between cursor-pointer\"\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <img \r\n                      src={getProviderIcon(provider.id)} \r\n                      alt={provider.name}\r\n                      className=\"w-4 h-4 rounded object-contain\"\r\n                      onError={(e) => {\r\n                        (e.target as HTMLImageElement).src = '/icons/play.png';\r\n                      }}\r\n                    />\r\n                    <span>{provider.name}</span>\r\n                  </div>\r\n                  {activeProvider === provider.id && (\r\n                    <Check className=\"h-4 w-4\" />\r\n                  )}\r\n                </DropdownMenuItem>\r\n              ))}\r\n            </DropdownMenuGroup>\r\n          ))}\r\n        </ScrollArea>\r\n      </DropdownMenuContent>\r\n    </DropdownMenu>\r\n  );\r\n};\r\n\r\nexport default StreamingProviderSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ThemeSwitcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\TrailerButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\TrailerModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1722,1725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1722,1725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1766,1769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1766,1769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { X } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\ninterface TrailerModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  trailerKey: string | undefined;\r\n  title: string;\r\n}\r\n\r\nconst TrailerModal = ({ isOpen, onClose, trailerKey, title }: TrailerModalProps) => {\r\n  const [trailerSrc, setTrailerSrc] = useState<string>(\"\");\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const iframeRef = useRef<HTMLIFrameElement>(null);\r\n  \r\n  const cleanupIframe = () => {\r\n    if (iframeRef.current) {\r\n      iframeRef.current.src = '';\r\n    }\r\n    setTrailerSrc('');\r\n  };\r\n  \r\n  useEffect(() => {\r\n    \r\n    \r\n    if (isOpen && trailerKey) {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      try {\r\n        let videoId = trailerKey;\r\n        \r\n        // Handle different trailer key formats\r\n        if (trailerKey.includes('youtube.com/watch?v=')) {\r\n          videoId = trailerKey.split('v=')[1].split('&')[0];\r\n        } else if (trailerKey.includes('youtu.be/')) {\r\n          videoId = trailerKey.split('youtu.be/')[1];\r\n        }\r\n        \r\n        // Use nocookie domain for better compatibility\r\n        const embedUrl = `https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&fs=1&origin=${encodeURIComponent(window.location.origin)}`;\r\n        \r\n        setTrailerSrc(embedUrl);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        // Log to production error tracking\r\n        if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n          (window as any).errorReporter.captureException(error as Error, 'TrailerModal', 'medium');\r\n        }\r\n        setError(\"Failed to load trailer\");\r\n        setIsLoading(false);\r\n      }\r\n    } else if (!isOpen) {\r\n      cleanupIframe();\r\n    }\r\n    \r\n    return () => {\r\n      if (!isOpen) {\r\n        cleanupIframe();\r\n      }\r\n    };\r\n  }, [isOpen, trailerKey, title]);\r\n\r\n  if (!trailerKey) {\r\n    return null;\r\n  }\r\n\r\n  const handleCloseModal = () => {\r\n    cleanupIframe();\r\n    onClose();\r\n  };\r\n\r\n  const handleIframeLoad = () => {\r\n    setIsLoading(false);\r\n    setError(null);\r\n  };\r\n\r\n  const handleIframeError = () => {\r\n    setIsLoading(false);\r\n    setError(\"Failed to load trailer\");\r\n  };\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={(open) => !open && handleCloseModal()}>\r\n      <DialogContent className=\"sm:max-w-4xl p-0 overflow-hidden bg-black border-gray-800\">\r\n        <div className=\"relative bg-black\">\r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"icon\"\r\n            onClick={handleCloseModal} \r\n            className=\"absolute right-2 top-2 z-50 bg-black/70 hover:bg-black/90 text-white rounded-full border border-gray-600\"\r\n            aria-label=\"Close trailer\"\r\n          >\r\n            <X size={20} />\r\n          </Button>\r\n          \r\n          <div className=\"aspect-video w-full bg-black\">\r\n            {isLoading ? (\r\n              <div className=\"w-full h-full flex items-center justify-center bg-black min-h-[300px]\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cinemax-500 mx-auto mb-4\"></div>\r\n                  <p className=\"text-white\">Loading trailer...</p>\r\n                </div>\r\n              </div>\r\n            ) : error ? (\r\n              <div className=\"w-full h-full flex flex-col items-center justify-center bg-black text-white min-h-[300px]\">\r\n                <p className=\"text-red-500 mb-4\">{error}</p>\r\n                <p className=\"text-gray-400 mb-4\">Unable to load trailer for \"{title}\"</p>\r\n                <Button variant=\"outline\" onClick={handleCloseModal}>Close</Button>\r\n              </div>\r\n            ) : trailerSrc ? (\r\n              <iframe\r\n                ref={iframeRef}\r\n                key={`trailer-${trailerKey}-${isOpen}`}\r\n                src={trailerSrc}\r\n                title={`${title} Trailer`}\r\n                className=\"w-full h-full min-h-[300px]\"\r\n                allowFullScreen\r\n                onLoad={handleIframeLoad}\r\n                onError={handleIframeError}\r\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen\"\r\n                style={{ border: 'none' }}\r\n              />\r\n            ) : (\r\n              <div className=\"w-full h-full flex items-center justify-center bg-black min-h-[300px]\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cinemax-500 mx-auto mb-4\"></div>\r\n                  <p className=\"text-white\">Preparing trailer...</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default TrailerModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\UpgradeModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":102,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3093,3096],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3093,3096],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":103,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3135,3138],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3135,3138],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Crown, Play, Download, Star, Check } from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { PremiumPromoModal } from '@/components/PremiumPromoModal';\r\n\r\ninterface UpgradeModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  reason: 'streaming' | 'download';\r\n  currentRole: 'free' | 'pro' | 'premium';\r\n}\r\n\r\nconst UpgradeModal: React.FC<UpgradeModalProps> = ({ \r\n  isOpen, \r\n  onClose, \r\n  reason, \r\n  currentRole \r\n}) => {\r\n  const { isPremium } = useAuth();\r\n  const [isUpgrading, setIsUpgrading] = useState(false);\r\n\r\n  // Don't show modal if user already has premium\r\n  if (isPremium) {\r\n    return null;\r\n  }\r\n\r\n  const getUpgradeOptions = () => {\r\n    if (currentRole === 'free') {\r\n      return [\r\n        {\r\n          name: 'Pro',\r\n          price: '$9.99/month',\r\n          features: [\r\n            '12 streams per day',\r\n            '5 downloads per day',\r\n            'HD quality',\r\n            'Priority support'\r\n          ],\r\n          recommended: reason === 'streaming'\r\n        },\r\n        {\r\n          name: 'Premium',\r\n          price: '$19.99/month',\r\n          features: [\r\n            'Unlimited streams',\r\n            'Unlimited downloads',\r\n            '4K quality',\r\n            'Offline viewing',\r\n            'Premium content',\r\n            'VIP support'\r\n          ],\r\n          recommended: reason === 'download'\r\n        }\r\n      ];\r\n    } else {\r\n      return [\r\n        {\r\n          name: 'Premium',\r\n          price: '$19.99/month',\r\n          features: [\r\n            'Unlimited streams',\r\n            'Unlimited downloads',\r\n            '4K quality',\r\n            'Offline viewing',\r\n            'Premium content',\r\n            'VIP support'\r\n          ],\r\n          recommended: true\r\n        }\r\n      ];\r\n    }\r\n  };\r\n\r\n  const getMessage = () => {\r\n    if (reason === 'streaming') {\r\n      return currentRole === 'free' \r\n        ? \"You've reached your daily streaming limit of 5 videos.\"\r\n        : \"You've reached your daily streaming limit of 12 videos.\";\r\n    } else {\r\n      return currentRole === 'free'\r\n        ? \"Downloads are not available on the free plan.\"\r\n        : \"You've reached your daily download limit of 5 files.\";\r\n    }\r\n  };\r\n\r\n  const handleUpgrade = async (planName: string) => {\r\n    setIsUpgrading(true);\r\n    \r\n    try {\r\n      // Implement actual payment flow - for now just close\r\n      // Production-ready payment integration\r\n      const paymentUrl = process.env.NODE_ENV === 'production' \r\n        ? `https://buy.stripe.com/live_payment?plan=${planName.toLowerCase()}`\r\n        : `https://buy.stripe.com/test_14k4ib?plan=${planName.toLowerCase()}`;\r\n      window.open(paymentUrl, '_blank');\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      onClose();\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'UpgradeModal', 'high');\r\n      }\r\n    } finally {\r\n      setIsUpgrading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\r\n      <DialogContent className=\"sm:max-w-[600px] bg-gradient-to-br from-background via-background to-secondary/20 border-2 border-primary/20\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-xl font-bold text-center\">\r\n            {reason === 'streaming' ? (\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <Play className=\"text-cinemax-500\" />\r\n                Streaming Limit Reached\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <Download className=\"text-green-500\" />\r\n                Download Upgrade Required\r\n              </div>\r\n            )}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"text-center mb-6\">\r\n          <p className=\"text-foreground\">{getMessage()}</p>\r\n          <p className=\"text-sm text-muted-foreground mt-2\">\r\n            Upgrade your plan to continue enjoying unlimited entertainment.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {getUpgradeOptions().map((plan) => (\r\n            <div \r\n              key={plan.name}\r\n              className={`relative border rounded-lg p-6 transition-all duration-200 hover:shadow-lg ${\r\n                plan.recommended \r\n                  ? 'border-cinemax-500 bg-cinemax-500/5 shadow-cinemax-500/20' \r\n                  : 'border-border bg-secondary/30'\r\n              }`}\r\n            >\r\n              {plan.recommended && (\r\n                <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\r\n                  <div className=\"bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1\">\r\n                    <Star size={12} />\r\n                    Recommended\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"text-center mb-4\">\r\n                <div className=\"flex items-center justify-center mb-2\">\r\n                  {plan.name === 'Premium' && <Crown className=\"text-yellow-500 mr-2\" size={20} />}\r\n                  <h3 className=\"text-lg font-bold\">{plan.name}</h3>\r\n                </div>\r\n                <div className=\"text-2xl font-bold text-cinemax-500\">{plan.price}</div>\r\n              </div>\r\n\r\n              <ul className=\"space-y-2 mb-6\">\r\n                {plan.features.map((feature, index) => (\r\n                  <li key={index} className=\"flex items-center text-sm\">\r\n                    <Check className=\"w-4 h-4 text-green-500 mr-3 flex-shrink-0\" />\r\n                    {feature}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n\r\n              <Button \r\n                className={`w-full transition-all duration-200 ${\r\n                  plan.recommended \r\n                    ? 'bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-semibold' \r\n                    : 'bg-secondary hover:bg-secondary/80'\r\n                }`}\r\n                onClick={() => handleUpgrade(plan.name)}\r\n                disabled={isUpgrading}\r\n              >\r\n                {isUpgrading ? 'Processing...' : `Upgrade to ${plan.name}`}\r\n              </Button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"flex flex-col items-center gap-3 mt-6\">\r\n          <PremiumPromoModal>\r\n            <Button variant=\"link\" className=\"text-sm text-muted-foreground hover:text-foreground\">\r\n              Have a promo code? Click here to activate premium\r\n            </Button>\r\n          </PremiumPromoModal>\r\n          \r\n          <Button variant=\"ghost\" onClick={onClose} className=\"text-muted-foreground hover:text-foreground\">\r\n            Maybe Later\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default UpgradeModal;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\VideoAssistant.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\VideoPlayer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\VideoPlayerIframe.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[589,592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[589,592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleIframeError'. Either include it or remove the dependency array.","line":120,"column":6,"nodeType":"ArrayExpression","endLine":120,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [handleIframeError, isLoading]","fix":{"range":[3680,3691],"text":"[handleIframeError, isLoading]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { RefreshCw } from \"lucide-react\";\r\nimport { trackStreamingActivity, markContentAsComplete } from \"@/utils/videoUtils\";\r\nimport { toast } from \"sonner\";\r\nimport StreamingProviderSelector from \"./StreamingProviderSelector\";\r\n\r\ninterface VideoPlayerIframeProps {\r\n  src: string;\r\n  contentId: string;\r\n  contentType: string;\r\n  userId?: string;\r\n  episodeId?: string;\r\n  autoPlay?: boolean;\r\n  onEnded?: () => void;\r\n  poster?: string;\r\n  title?: string;\r\n  availableProviders: any[];\r\n  activeProvider: string;\r\n  onProviderChange: (providerId: string) => void;\r\n  onError?: () => void;\r\n  onLoaded?: () => void;\r\n}\r\n\r\nconst VideoPlayerIframe: React.FC<VideoPlayerIframeProps> = ({ \r\n  src, \r\n  contentId, \r\n  contentType,\r\n  userId,\r\n  episodeId,\r\n  autoPlay = false,\r\n  onEnded,\r\n  poster,\r\n  title = \"Video\",\r\n  availableProviders,\r\n  activeProvider,\r\n  onProviderChange,\r\n  onError,\r\n  onLoaded\r\n}) => {\r\n  const iframeRef = useRef<HTMLIFrameElement>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [key, setKey] = useState(Date.now()); // For forcing iframe reload\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Set up activity tracking\r\n  useEffect(() => {\r\n    // Only track if we have a user ID\r\n    if (!userId) return;\r\n    \r\n    // Start tracking after a few seconds (assuming content has started playing)\r\n    const tracker = setTimeout(() => {\r\n      trackStreamingActivity(contentId, userId, 0, episodeId);\r\n      \r\n      // Set up periodic tracking\r\n      const interval = setInterval(() => {\r\n        trackStreamingActivity(contentId, userId, 15, episodeId);\r\n      }, 15000);\r\n      \r\n      return () => clearInterval(interval);\r\n    }, 3000);\r\n    \r\n    return () => clearTimeout(tracker);\r\n  }, [contentId, userId, episodeId, src]);\r\n  \r\n  // Handle iframe load events\r\n  const handleIframeLoad = () => {\r\n    setIsLoading(false);\r\n    toast.success(`Now playing: ${title}`, { id: \"player-loaded\", duration: 2000 });\r\n    if (onLoaded) onLoaded();\r\n  };\r\n  \r\n  // Handle errors\r\n  const handleIframeError = () => {\r\n    setIsLoading(false);\r\n    setError(\"Failed to load content from this provider. Try another source.\");\r\n    toast.error(\"Failed to load video\", { id: \"player-error\" });\r\n    if (onError) onError();\r\n  };\r\n  \r\n  // Reload iframe\r\n  const reloadPlayer = () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setKey(Date.now());\r\n  };\r\n\r\n  // Add event listener for iframe loading errors\r\n  useEffect(() => {\r\n    const iframe = iframeRef.current;\r\n    if (!iframe) return;\r\n\r\n    const handleLoadError = () => handleIframeError();\r\n    \r\n    // Modern browsers might not trigger error events on iframes due to security\r\n    // This timeout is a fallback for detecting stalled loads\r\n    const loadTimeout = setTimeout(() => {\r\n      if (isLoading) {\r\n        // Check if iframe has loaded content\r\n        try {\r\n          const iframeDoc = iframe.contentDocument || (iframe.contentWindow && iframe.contentWindow.document);\r\n          if (!iframeDoc || iframeDoc.readyState !== 'complete') {\r\n            handleIframeError();\r\n          }\r\n        } catch (e) {\r\n          // If we can't access the document (cross-origin), assume it's loading\r\n          // Cross-origin iframe, can't check load state\r\n        }\r\n      }\r\n    }, 10000);\r\n\r\n    iframe.addEventListener('error', handleLoadError);\r\n    \r\n    return () => {\r\n      iframe.removeEventListener('error', handleLoadError);\r\n      clearTimeout(loadTimeout);\r\n    };\r\n  }, [isLoading]);\r\n  \r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      className=\"relative bg-black rounded-lg overflow-hidden w-full aspect-video\"\r\n    >\r\n      {isLoading && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/80 z-10\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cinemax-500\"></div>\r\n        </div>\r\n      )}\r\n      \r\n      {error && (\r\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black/90 z-10 p-4 text-center\">\r\n          <p className=\"text-red-500 mb-4\">{error}</p>\r\n          <div className=\"flex gap-2 flex-wrap justify-center\">\r\n            <Button \r\n              variant=\"outline\" \r\n              onClick={reloadPlayer}\r\n              className=\"flex items-center gap-2\"\r\n            >\r\n              <RefreshCw size={16} />\r\n              Try Again\r\n            </Button>\r\n            \r\n            <StreamingProviderSelector\r\n              providers={availableProviders}\r\n              activeProvider={activeProvider}\r\n              contentType={contentType}\r\n              onProviderChange={onProviderChange}\r\n              variant=\"inline\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <iframe\r\n        ref={iframeRef}\r\n        key={`iframe-${key}`}\r\n        src={src}\r\n        className=\"w-full h-full\"\r\n        allowFullScreen\r\n        onLoad={handleIframeLoad}\r\n        sandbox=\"allow-forms allow-scripts allow-same-origin allow-presentation\"\r\n        allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; fullscreen\"\r\n        referrerPolicy=\"no-referrer\"\r\n        style={{ border: 'none' }}\r\n      ></iframe>\r\n      \r\n      {/* Custom Controls */}\r\n      <div className=\"absolute bottom-4 right-4 flex gap-2 z-10\">\r\n        <StreamingProviderSelector\r\n          providers={availableProviders}\r\n          activeProvider={activeProvider}\r\n          contentType={contentType}\r\n          onProviderChange={onProviderChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPlayerIframe;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\VideoPlayerPlyr.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[621,624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[621,624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1128,1131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1128,1131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1997,2000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1997,2000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":258,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9043,9046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9043,9046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'autoPlay', 'contentId', 'episodeId', 'onEnded', 'onError', 'onLoaded', and 'userId'. Either include them or remove the dependency array. If 'onError' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":208,"column":6,"nodeType":"ArrayExpression","endLine":208,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [autoPlay, contentId, episodeId, onEnded, onError, onLoaded, userId]","fix":{"range":[7402,7404],"text":"[autoPlay, contentId, episodeId, onEnded, onError, onLoaded, userId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Download, Video } from \"lucide-react\";\r\nimport { trackStreamingActivity, markContentAsComplete } from \"@/utils/videoUtils\";\r\nimport { toast } from \"sonner\";\r\nimport 'plyr/dist/plyr.css';\r\nimport StreamingProviderSelector from \"./StreamingProviderSelector\";\r\n\r\ninterface VideoPlayerPlyrProps {\r\n  src: string;\r\n  contentId: string;\r\n  contentType: string;\r\n  userId?: string;\r\n  episodeId?: string;\r\n  autoPlay?: boolean;\r\n  onEnded?: () => void;\r\n  poster?: string;\r\n  title?: string;\r\n  availableProviders: any[];\r\n  activeProvider: string;\r\n  onProviderChange: (providerId: string) => void;\r\n  onError?: () => void;\r\n  onLoaded?: () => void;\r\n}\r\n\r\nconst VideoPlayerPlyr: React.FC<VideoPlayerPlyrProps> = ({ \r\n  src, \r\n  contentId, \r\n  contentType,\r\n  userId,\r\n  episodeId,\r\n  autoPlay = false,\r\n  onEnded,\r\n  poster,\r\n  title = \"Video\",\r\n  availableProviders,\r\n  activeProvider,\r\n  onProviderChange,\r\n  onError,\r\n  onLoaded\r\n}) => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const playerRef = useRef<any>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const onLoadedRef = useRef<typeof onLoaded | undefined>(onLoaded);\r\n  const onErrorRef = useRef<typeof onError | undefined>(onError);\r\n  const onEndedRef = useRef<typeof onEnded | undefined>(onEnded);\r\n  const userIdRef = useRef<string | undefined>(userId);\r\n  const contentIdRef = useRef<string>(contentId);\r\n  const episodeIdRef = useRef<string | undefined>(episodeId);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [stopRecordingFn, setStopRecordingFn] = useState<(() => void) | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [playerInitialized, setPlayerInitialized] = useState(false);\r\n  const hasLoadedRef = useRef(false);\r\n  \r\n  // Initialize Plyr\r\n  useEffect(() => {\r\n    let plyr: any;\r\n    \r\n    const initPlyr = async () => {\r\n      try {\r\n      // Don't re-initialize if already loaded\r\n        if (hasLoadedRef.current) return;\r\n        hasLoadedRef.current = true;\r\n        // keep refs up to date for handlers registered once\r\n        onLoadedRef.current = onLoaded;\r\n        onErrorRef.current = onError;\r\n        onEndedRef.current = onEnded;\r\n        userIdRef.current = userId;\r\n        contentIdRef.current = contentId;\r\n        episodeIdRef.current = episodeId;\r\n        \r\n        const Plyr = (await import('plyr')).default;\r\n        \r\n        if (!videoRef.current) {\r\n          // Video element ref is not available\r\n          return;\r\n        }\r\n        \r\n        // Create a new Plyr instance\r\n        plyr = new Plyr(videoRef.current, {\r\n          controls: [\r\n            'play-large', 'play', 'progress', 'current-time', 'mute',\r\n            'volume', 'captions', 'settings', 'pip', 'airplay', 'fullscreen'\r\n          ],\r\n          seekTime: 10,\r\n          keyboard: { focused: true, global: false },\r\n          tooltips: { controls: true, seek: true },\r\n          captions: { active: true, language: 'auto' },\r\n          autoplay: false\r\n        });\r\n        \r\n        playerRef.current = plyr;\r\n        \r\n        plyr.on('ready', () => {\r\n          setIsLoading(false);\r\n          setPlayerInitialized(true);\r\n          if (onLoadedRef.current) onLoadedRef.current();\r\n          \r\n          // Try to autoplay after the player is ready\r\n          if (autoPlay) {\r\n            // Set volume to 0 initially to help with autoplay policies\r\n            plyr.muted = true;\r\n            \r\n            // Small delay to ensure everything is set up\r\n            setTimeout(() => {\r\n              try {\r\n                if (plyr && !plyr.destroyed) {\r\n                  const playPromise = plyr.play();\r\n                  \r\n                  if (playPromise !== undefined) {\r\n                    playPromise.then(() => {\r\n                      // Autoplay started successfully\r\n                      toast(\"Video playing (muted). Click to unmute\", {\r\n                        action: {\r\n                          label: \"Unmute\",\r\n                          onClick: () => {\r\n                            if (playerRef.current && !playerRef.current.destroyed) {\r\n                              playerRef.current.muted = false;\r\n                            }\r\n                          }\r\n                        }\r\n                      });\r\n                    }).catch((err: unknown) => {\r\n                      // Autoplay prevented by browser\r\n                      toast.info(\"Click play to start playback\", {\r\n                        action: {\r\n                          label: \"Play\",\r\n                          onClick: () => {\r\n                            if (playerRef.current && !playerRef.current.destroyed) {\r\n                              playerRef.current.play();\r\n                            }\r\n                          }\r\n                        }\r\n                      });\r\n                    });\r\n                  }\r\n                }\r\n              } catch (error) {\r\n                // Error during autoplay\r\n              }\r\n            }, 100);\r\n          }\r\n        });\r\n        \r\n        plyr.on('play', () => {\r\n          // Track activity after 15 seconds of playing\r\n          setTimeout(() => {\r\n            const uid = userIdRef.current;\r\n            if (uid && plyr && !plyr.destroyed && !plyr.paused) {\r\n              trackStreamingActivity(contentIdRef.current, uid, Math.floor(plyr.currentTime), episodeIdRef.current);\r\n            }\r\n          }, 15000);\r\n        });\r\n        \r\n        plyr.on('timeupdate', () => {\r\n          // Track every 15 seconds\r\n          const uid = userIdRef.current;\r\n          if (plyr && !plyr.destroyed && Math.floor(plyr.currentTime) % 15 === 0 && uid && !plyr.paused) {\r\n            trackStreamingActivity(contentIdRef.current, uid, Math.floor(plyr.currentTime), episodeIdRef.current);\r\n          }\r\n        });\r\n        \r\n        plyr.on('ended', () => {\r\n          if (onEndedRef.current) onEndedRef.current();\r\n          const uid = userIdRef.current;\r\n          if (uid) {\r\n            markContentAsComplete(contentIdRef.current, uid, episodeIdRef.current);\r\n          }\r\n        });\r\n        \r\n        plyr.on('error', () => {\r\n          setError(\"Error loading video. Please try another source or try again later.\");\r\n          setIsLoading(false);\r\n          if (onError) onError();\r\n          toast.error(\"Error loading video. Please try another source.\");\r\n        });\r\n      } catch (err) {\r\n        // Error initializing Plyr\r\n        setError(\"Failed to initialize video player\");\r\n        setIsLoading(false);\r\n        if (onError) onError();\r\n      }\r\n    };\r\n    \r\n    initPlyr();\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n      if (playerRef.current) {\r\n        try {\r\n          playerRef.current.destroy();\r\n          playerRef.current = null;\r\n        } catch (e) {\r\n          // Error destroying Plyr\r\n        }\r\n      }\r\n      \r\n      // Reset hasLoaded ref on unmount\r\n      hasLoadedRef.current = false;\r\n    };\r\n  // We intentionally initialize Plyr only once. Props and callbacks used by\r\n  // the player are read from refs to avoid stale closures. Disable the\r\n  // exhaustive-deps rule for this effect.\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  \r\n  // Handle video source change\r\n  useEffect(() => {\r\n    if (!videoRef.current || !playerInitialized || !playerRef.current) return;\r\n    \r\n    // Skip if player is destroyed\r\n    if (playerRef.current.destroyed) return;\r\n    \r\n    setIsLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Update the video source\r\n      if (videoRef.current) {\r\n        videoRef.current.src = src;\r\n        \r\n        if (poster) {\r\n          videoRef.current.poster = poster;\r\n        }\r\n        \r\n        // Load the new source\r\n        videoRef.current.load();\r\n        \r\n        if (playerRef.current && !playerRef.current.destroyed) {\r\n          // Force Plyr to recognize the new source\r\n          playerRef.current.source = {\r\n            type: 'video',\r\n            sources: [{\r\n              src: src,\r\n              type: 'video/mp4',\r\n            }]\r\n          };\r\n        }\r\n        \r\n        // Attempt to play if autoplay is enabled\r\n        if (autoPlay && playerRef.current && !playerRef.current.destroyed) {\r\n          // Set muted to help with autoplay policies\r\n          if (playerRef.current.muted !== undefined) {\r\n            playerRef.current.muted = true;\r\n          }\r\n          \r\n          setTimeout(() => {\r\n            if (playerRef.current && !playerRef.current.destroyed) {\r\n              try {\r\n                const playPromise = playerRef.current.play();\r\n                \r\n                if (playPromise !== undefined && typeof playPromise.then === 'function') {\r\n                  playPromise.then(() => {\r\n                    // Source change autoplay successful\r\n                  }).catch((error: any) => {\r\n                    // Source change autoplay prevented\r\n                    toast.info(\"Click play to start video\");\r\n                  });\r\n                }\r\n              } catch (error) {\r\n                // Error during source change autoplay\r\n              }\r\n            }\r\n          }, 100);\r\n        }\r\n      }\r\n      \r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      // Error updating video source\r\n      setError(\"Failed to load video\");\r\n      setIsLoading(false);\r\n    }\r\n  }, [src, poster, autoPlay, playerInitialized]);\r\n  \r\n  // Recording functionality\r\n  const toggleRecording = () => {\r\n    if (!videoRef.current) return;\r\n    \r\n    if (!isRecording) {\r\n      try {\r\n        import('@/utils/streamingUtils').then(module => {\r\n          module.startRecording().then(stream => {\r\n            if (stream) {\r\n              const stopRecording = () => {\r\n                stream.getTracks().forEach(track => track.stop());\r\n                toast.success(\"Recording saved\");\r\n              };\r\n              \r\n              setStopRecordingFn(() => stopRecording);\r\n              setIsRecording(true);\r\n              toast.success(\"Recording started\");\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        // Recording error\r\n        toast.error(\"Failed to start recording\");\r\n      }\r\n    } else if (stopRecordingFn) {\r\n      stopRecordingFn();\r\n      setIsRecording(false);\r\n      setStopRecordingFn(null);\r\n    }\r\n  };\r\n  \r\n  // Handle download\r\n  const handleDownload = () => {\r\n    if (videoRef.current && videoRef.current.src) {\r\n      const a = document.createElement('a');\r\n      a.href = videoRef.current.src;\r\n      a.download = `${title || 'video'}.mp4`;\r\n      document.body.appendChild(a); // This is important for Firefox\r\n      a.click();\r\n      document.body.removeChild(a); // Clean up\r\n      \r\n      toast.success(`Starting download: ${title || 'video'}.mp4`);\r\n    } else {\r\n      toast.error(\"No video source available to download\");\r\n    }\r\n  };\r\n  \r\n  // Clean up on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      // Clean up recording if active\r\n      if (isRecording && stopRecordingFn) {\r\n        stopRecordingFn();\r\n      }\r\n      \r\n      // Ensure Plyr instance is destroyed\r\n      if (playerRef.current && !playerRef.current.destroyed) {\r\n        try {\r\n          playerRef.current.destroy();\r\n        } catch (e) {\r\n          // Error destroying Plyr on unmount\r\n        }\r\n      }\r\n    };\r\n  }, [isRecording, stopRecordingFn]);\r\n  \r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      className=\"relative bg-black rounded-lg overflow-hidden w-full aspect-video\"\r\n    >\r\n      {isLoading && !error && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/80 z-10\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cinemax-500\"></div>\r\n        </div>\r\n      )}\r\n      \r\n      {error && (\r\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-10 p-4 text-center\">\r\n          <span className=\"text-red-500 mb-2\">{error}</span>\r\n          <div className=\"flex gap-2 mt-2\">\r\n            <Button \r\n              variant=\"outline\" \r\n              onClick={() => {\r\n                if (videoRef.current) {\r\n                  setError(null);\r\n                  videoRef.current.load();\r\n                }\r\n              }}\r\n            >\r\n              Try Again\r\n            </Button>\r\n            <StreamingProviderSelector\r\n              providers={availableProviders}\r\n              activeProvider={activeProvider}\r\n              contentType={contentType}\r\n              onProviderChange={onProviderChange}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <video\r\n        ref={videoRef}\r\n        className=\"plyr-react plyr w-full h-full\"\r\n        crossOrigin=\"anonymous\"\r\n        poster={poster}\r\n        playsInline\r\n        controls\r\n      >\r\n        <source src={src} type=\"video/mp4\" />\r\n        Your browser does not support the video tag.\r\n      </video>\r\n      \r\n      {/* Custom Controls (shown outside the Plyr UI) */}\r\n      <div className=\"absolute bottom-20 right-4 flex flex-col gap-2 z-20 opacity-0 hover:opacity-100 transition-opacity\">\r\n        <Button\r\n          variant=\"secondary\"\r\n          size=\"icon\"\r\n          className=\"rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm\"\r\n          onClick={toggleRecording}\r\n          title={isRecording ? \"Stop Recording\" : \"Start Recording\"}\r\n        >\r\n          <Video size={18} className={isRecording ? \"text-red-500\" : \"text-white\"} />\r\n        </Button>\r\n        \r\n        <Button\r\n          variant=\"secondary\"\r\n          size=\"icon\"\r\n          className=\"rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm\"\r\n          onClick={handleDownload}\r\n          title=\"Download Video\"\r\n        >\r\n          <Download size={18} className=\"text-white\" />\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPlayerPlyr;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\VideoPlayerVideoJS.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[632,635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[632,635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1152,1155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1152,1155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'autoPlay', 'contentId', 'episodeId', 'onEnded', 'onError', 'onLoaded', 'poster', 'src', and 'userId'. Either include them or remove the dependency array. If 'onError' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":242,"column":6,"nodeType":"ArrayExpression","endLine":242,"endColumn":11,"suggestions":[{"desc":"Update the dependencies array to be: [autoPlay, contentId, episodeId, key, onEnded, onError, onLoaded, poster, src, userId]","fix":{"range":[8278,8283],"text":"[autoPlay, contentId, episodeId, key, onEnded, onError, onLoaded, poster, src, userId]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Download, Video } from \"lucide-react\";\r\nimport { trackStreamingActivity, markContentAsComplete } from \"@/utils/videoUtils\";\r\nimport { toast } from \"sonner\";\r\nimport StreamingProviderSelector from \"./StreamingProviderSelector\";\r\nimport 'video.js/dist/video-js.css';\r\n\r\ninterface VideoPlayerVideoJSProps {\r\n  src: string;\r\n  contentId: string;\r\n  contentType: string;\r\n  userId?: string;\r\n  episodeId?: string;\r\n  autoPlay?: boolean;\r\n  onEnded?: () => void;\r\n  poster?: string;\r\n  title?: string;\r\n  availableProviders: any[];\r\n  activeProvider: string;\r\n  onProviderChange: (providerId: string) => void;\r\n  onError?: () => void;\r\n  onLoaded?: () => void;\r\n}\r\n\r\nconst VideoPlayerVideoJS: React.FC<VideoPlayerVideoJSProps> = ({ \r\n  src, \r\n  contentId, \r\n  contentType,\r\n  userId,\r\n  episodeId,\r\n  autoPlay = false,\r\n  onEnded,\r\n  poster,\r\n  title = \"Video\",\r\n  availableProviders,\r\n  activeProvider,\r\n  onProviderChange,\r\n  onError,\r\n  onLoaded\r\n}) => {\r\n  const videoContainerRef = useRef<HTMLDivElement>(null);\r\n  const playerRef = useRef<any>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const onLoadedRef = useRef<typeof onLoaded | undefined>(onLoaded);\r\n  const onErrorRef = useRef<typeof onError | undefined>(onError);\r\n  const onEndedRef = useRef<typeof onEnded | undefined>(onEnded);\r\n  const userIdRef = useRef<string | undefined>(userId);\r\n  const contentIdRef = useRef<string>(contentId);\r\n  const episodeIdRef = useRef<string | undefined>(episodeId);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [stopRecordingFn, setStopRecordingFn] = useState<(() => void) | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isMuted, setIsMuted] = useState(true);\r\n  const [playerInitialized, setPlayerInitialized] = useState(false);\r\n  const [key, setKey] = useState<number>(Date.now()); // Key for forcing re-render\r\n  \r\n  // Initialize Video.js\r\n  useEffect(() => {\r\n  // keep refs up to date for handlers registered once\r\n  onLoadedRef.current = onLoaded;\r\n  onErrorRef.current = onError;\r\n  onEndedRef.current = onEnded;\r\n  userIdRef.current = userId;\r\n  contentIdRef.current = contentId;\r\n  episodeIdRef.current = episodeId;\r\n\r\n    // Dynamically import video.js to prevent SSR issues\r\n    const setupPlayer = async () => {\r\n      try {\r\n        if (!videoContainerRef.current) {\r\n          // Video container ref is not available\r\n          return;\r\n        }\r\n        \r\n        const videojs = (await import('video.js')).default;\r\n        \r\n        // Clean up any previous player instance\r\n        if (playerRef.current) {\r\n          playerRef.current.dispose();\r\n          playerRef.current = null;\r\n        }\r\n        \r\n        // Clear any children from the container\r\n        while (videoContainerRef.current.firstChild) {\r\n          videoContainerRef.current.removeChild(videoContainerRef.current.firstChild);\r\n        }\r\n        \r\n        // Create a new video element\r\n        const videoElement = document.createElement('video');\r\n        videoElement.className = 'video-js vjs-big-play-centered';\r\n        videoElement.setAttribute('playsinline', '');\r\n        videoElement.setAttribute('controls', '');\r\n        videoElement.setAttribute('data-setup', '{}');\r\n        \r\n        // Append video element to the container\r\n        videoContainerRef.current.appendChild(videoElement);\r\n        \r\n        // Configure videojs\r\n        const videoJsOptions = {\r\n          autoplay: false,\r\n          controls: true,\r\n          responsive: true,\r\n          fluid: true,\r\n          sources: [{\r\n            src: src,\r\n            type: 'video/mp4',\r\n          }],\r\n          poster: poster || '',\r\n          muted: true,\r\n          playsinline: true,\r\n          html5: {\r\n            nativeControlsForTouch: false,\r\n            nativeAudioTracks: false,\r\n            nativeVideoTracks: false,\r\n            hls: {\r\n              overrideNative: true\r\n            },\r\n            vhs: {\r\n              overrideNative: true\r\n            }\r\n          }\r\n        };\r\n        \r\n        // Initialize player\r\n        const player = videojs(videoElement, videoJsOptions, function onPlayerReady() {\r\n          // Player is ready\r\n        });\r\n        \r\n        playerRef.current = player;\r\n        \r\n        // Setup event handlers after player is ready\r\n        player.ready(() => {\r\n          setIsLoading(false);\r\n          setPlayerInitialized(true);\r\n          if (onLoadedRef.current) onLoadedRef.current();\r\n          \r\n          // Auto play logic\r\n          if (autoPlay) {\r\n            // Mute player to help with autoplay policies\r\n            player.muted(true);\r\n            setIsMuted(true);\r\n            \r\n            setTimeout(() => {\r\n              try {\r\n                player.play()\r\n                  .then(() => {\r\n                    // Autoplay started successfully\r\n                    toast(\"Video playing (muted). Click to unmute\", {\r\n                      action: {\r\n                        label: \"Unmute\",\r\n                        onClick: () => {\r\n                          if (playerRef.current) {\r\n                            playerRef.current.muted(false);\r\n                            setIsMuted(false);\r\n                          }\r\n                        }\r\n                      }\r\n                    });\r\n                  })\r\n                  .catch((err: unknown) => {\r\n                    // Autoplay prevented by browser\r\n                    toast(\"Click to start playback\", {\r\n                      action: {\r\n                        label: \"Play\",\r\n                        onClick: () => {\r\n                          if (playerRef.current) {\r\n                            playerRef.current.play();\r\n                          }\r\n                        }\r\n                      }\r\n                    });\r\n                  });\r\n              } catch (error) {\r\n                // Error during autoplay\r\n              }\r\n            }, 100);\r\n          }\r\n        });\r\n        \r\n        // Error handling\r\n        player.on('error', () => {\r\n          // Video.js error\r\n          setError(\"Error loading video. Please try another source.\");\r\n          setIsLoading(false);\r\n          if (onError) onError();\r\n        });\r\n        \r\n        // Track playback\r\n        player.on('play', () => {\r\n          setTimeout(() => {\r\n            const uid = userIdRef.current;\r\n            if (uid && playerRef.current && !playerRef.current.paused()) {\r\n              trackStreamingActivity(contentIdRef.current, uid, Math.floor(playerRef.current.currentTime()), episodeIdRef.current);\r\n            }\r\n          }, 15000);\r\n        });\r\n        \r\n        player.on('timeupdate', () => {\r\n          if (!playerRef.current) return;\r\n\r\n          const currentTime = Math.floor(playerRef.current.currentTime());\r\n          const uid = userIdRef.current;\r\n          if (currentTime % 15 === 0 && currentTime > 0 && uid && !playerRef.current.paused()) {\r\n            trackStreamingActivity(contentIdRef.current, uid, currentTime, episodeIdRef.current);\r\n          }\r\n        });\r\n        \r\n        player.on('ended', () => {\r\n          if (onEndedRef.current) onEndedRef.current();\r\n          const uid = userIdRef.current;\r\n          if (uid) {\r\n            markContentAsComplete(contentIdRef.current, uid, episodeIdRef.current);\r\n          }\r\n        });\r\n      } catch (error) {\r\n        // Error initializing Video.js\r\n        setError(\"Failed to initialize video player\");\r\n        setIsLoading(false);\r\n        if (onError) onError();\r\n      }\r\n    };\r\n    \r\n    setupPlayer();\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n  if (playerRef.current) {\r\n        try {\r\n          playerRef.current.dispose();\r\n          playerRef.current = null;\r\n        } catch (e) {\r\n          // Error disposing player\r\n        }\r\n      }\r\n    };\r\n  // We intentionally keep the init effect tied to `key` only. Handlers and\r\n  // props used inside are read from refs to avoid stale closures. Disable\r\n  // the exhaustive-deps rule for this effect.\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [key]);\r\n  \r\n  // Handle source updates\r\n  useEffect(() => {\r\n    if (!playerRef.current || !playerInitialized) return;\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      // Update sources\r\n      playerRef.current.src([{\r\n        src: src,\r\n        type: 'video/mp4',\r\n      }]);\r\n      \r\n      if (poster) {\r\n        playerRef.current.poster(poster);\r\n      }\r\n      \r\n      // Reset player state\r\n      playerRef.current.load();\r\n      \r\n      // Try to autoplay with the new source\r\n      if (autoPlay) {\r\n        playerRef.current.muted(true);\r\n        setIsMuted(true);\r\n        \r\n        setTimeout(() => {\r\n          if (playerRef.current) {\r\n            try {\r\n              playerRef.current.play()\r\n                .then(() => {\r\n                  // Source change autoplay successful\r\n                })\r\n                .catch((err: unknown) => {\r\n                  // Source change autoplay prevented\r\n                  toast.info(\"Click play to start video\");\r\n                });\r\n            } catch (error) {\r\n              // Error playing video\r\n            }\r\n          }\r\n        }, 100);\r\n      }\r\n      \r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      // Error updating video source\r\n      setError(\"Failed to update video source\");\r\n      setIsLoading(false);\r\n    if (onErrorRef.current) onErrorRef.current();\r\n      \r\n      // Force a complete remount of the component as fallback strategy\r\n      setKey(Date.now());\r\n    }\r\n  }, [src, poster, autoPlay, playerInitialized]);\r\n  \r\n  // Recording functionality\r\n  const toggleRecording = () => {\r\n    if (!videoContainerRef.current) return;\r\n    \r\n    if (!isRecording) {\r\n      try {\r\n        import('@/utils/streamingUtils').then(module => {\r\n          module.startRecording().then(stream => {\r\n            if (stream) {\r\n              const stopRecording = () => {\r\n                stream.getTracks().forEach(track => track.stop());\r\n                toast.success(\"Recording saved\");\r\n              };\r\n              \r\n              setStopRecordingFn(() => stopRecording);\r\n              setIsRecording(true);\r\n              toast.success(\"Recording started\");\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        // Recording error\r\n        toast.error(\"Failed to start recording\");\r\n      }\r\n    } else if (stopRecordingFn) {\r\n      stopRecordingFn();\r\n      setIsRecording(false);\r\n      setStopRecordingFn(null);\r\n    }\r\n  };\r\n  \r\n  // Handle download\r\n  const handleDownload = () => {\r\n    if (playerRef.current) {\r\n      const currentSource = playerRef.current.currentSrc();\r\n      if (currentSource) {\r\n        const a = document.createElement('a');\r\n        a.href = currentSource;\r\n        a.download = `${title || 'video'}.mp4`;\r\n        a.click();\r\n        \r\n        toast.success(`Starting download: ${title || 'video'}.mp4`);\r\n      } else {\r\n        toast.error(\"No video source available to download\");\r\n      }\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      className=\"relative bg-black rounded-lg overflow-hidden w-full aspect-video\"\r\n    >\r\n      {isLoading && !error && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/80 z-10\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cinemax-500\"></div>\r\n        </div>\r\n      )}\r\n      \r\n      {error && (\r\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-10 p-4 text-center\">\r\n          <span className=\"text-red-500 mb-2\">{error}</span>\r\n          <div className=\"flex gap-2 mt-2\">\r\n            <Button \r\n              variant=\"outline\" \r\n              onClick={() => {\r\n                setError(null);\r\n                setKey(Date.now()); // Force remount on retry\r\n              }}\r\n            >\r\n              Try Again\r\n            </Button>\r\n            <StreamingProviderSelector\r\n              providers={availableProviders}\r\n              activeProvider={activeProvider}\r\n              contentType={contentType}\r\n              onProviderChange={onProviderChange}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <div \r\n        ref={videoContainerRef} \r\n        className=\"video-container w-full h-full\" \r\n        data-vjs-player\r\n        key={`video-container-${key}`}\r\n      />\r\n      \r\n      {/* Custom Controls (shown outside the player UI) */}\r\n      <div className=\"absolute bottom-20 right-4 flex flex-col gap-2 z-20 opacity-0 hover:opacity-100 transition-opacity\">\r\n        <Button\r\n          variant=\"secondary\"\r\n          size=\"icon\"\r\n          className=\"rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm\"\r\n          onClick={toggleRecording}\r\n          title={isRecording ? \"Stop Recording\" : \"Start Recording\"}\r\n        >\r\n          <Video size={18} className={isRecording ? \"text-red-500\" : \"text-white\"} />\r\n        </Button>\r\n        \r\n        <Button\r\n          variant=\"secondary\"\r\n          size=\"icon\"\r\n          className=\"rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm\"\r\n          onClick={handleDownload}\r\n          title=\"Download Video\"\r\n        >\r\n          <Download size={18} className=\"text-white\" />\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPlayerVideoJS;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\VideoPlayerWrapper.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1556,1559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1556,1559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from \"react\";\r\nimport { getAvailableProviders } from \"@/utils/contentUtils\";\r\nimport { getStreamingUrl } from \"@/utils/streamingUtils\";\r\nimport { useCreditSystem } from \"@/hooks/useCreditSystem\";\r\nimport { useWatchTracking } from \"@/hooks/useWatchTracking\";\r\nimport { toast } from \"sonner\";\r\nimport AdBlockingVideoPlayer from \"./AdBlockingVideoPlayer\";\r\nimport UpgradeModal from \"./UpgradeModal\";\r\n\r\ninterface VideoPlayerWrapperProps {\r\n  contentId: string;\r\n  contentType: string;\r\n  userId?: string;\r\n  episodeId?: string;\r\n  seasonNumber?: number;\r\n  episodeNumber?: number; \r\n  autoPlay?: boolean;\r\n  onEnded?: () => void;\r\n  poster?: string;\r\n  title?: string;\r\n}\r\n\r\nconst VideoPlayerWrapper = ({\r\n  contentId,\r\n  contentType,\r\n  userId,\r\n  episodeId,\r\n  seasonNumber,\r\n  episodeNumber,\r\n  autoPlay = false,\r\n  onEnded,\r\n  poster,\r\n  title\r\n}: VideoPlayerWrapperProps) => {\r\n  const availableProviders = getAvailableProviders(contentId, contentType);\r\n  const [activeProvider, setActiveProvider] = useState<string>('vidsrc_su');\r\n  const [videoSrc, setVideoSrc] = useState<string>(\"\");\r\n  const [showUpgradeModal, setShowUpgradeModal] = useState<boolean>(false);\r\n  \r\n  // Credit system hooks\r\n  const { userProfile, canStream } = useCreditSystem();\r\n  const { startWatchSession } = useWatchTracking();\r\n  \r\n  // Load video source\r\n  useEffect(() => {\r\n    const loadSource = async () => {\r\n      if (userProfile && !canStream()) {\r\n        setShowUpgradeModal(true);\r\n        return;\r\n      }\r\n\r\n      const options: any = {\r\n        contentType,\r\n        autoplay: autoPlay\r\n      };\r\n      \r\n      if (episodeId) options.episode = episodeId;\r\n      if (typeof seasonNumber === 'number' && !isNaN(seasonNumber)) options.season = seasonNumber;\r\n      if (typeof episodeNumber === 'number' && !isNaN(episodeNumber)) options.episodeNum = episodeNumber;\r\n      if (title) options.title = title;\r\n      \r\n      try {\r\n        const src = getStreamingUrl(contentId, activeProvider, options);\r\n        setVideoSrc(src);\r\n        \r\n        // Start watch session if user can stream\r\n        if (canStream() && userProfile && userId) {\r\n          await startWatchSession(contentId, title || `Content ${contentId}`);\r\n        }\r\n      } catch (error) {\r\n        // Production error handling - no console.error\r\n        toast.error(`Failed to load video from ${activeProvider}`);\r\n      }\r\n    };\r\n    \r\n    loadSource();\r\n  }, [contentId, contentType, activeProvider, episodeId, seasonNumber, episodeNumber, title, autoPlay, userProfile, canStream, startWatchSession, userId]);\r\n  \r\n  const handleProviderChange = (providerId: string) => {\r\n    setActiveProvider(providerId);\r\n    toast.info(`Switching to ${providerId.replace('_', ' ')} provider`);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Show upgrade modal if user can't stream */}\r\n      {userProfile && !canStream() && (\r\n        <UpgradeModal\r\n          isOpen={showUpgradeModal}\r\n          onClose={() => setShowUpgradeModal(false)}\r\n          reason=\"streaming\"\r\n          currentRole={userProfile.role}\r\n        />\r\n      )}\r\n      \r\n      {/* Show video player if user can stream */}\r\n      {(!userProfile || canStream()) && videoSrc && (\r\n        <AdBlockingVideoPlayer\r\n          src={videoSrc}\r\n          contentId={contentId}\r\n          contentType={contentType}\r\n          title={title}\r\n          poster={poster}\r\n          autoPlay={autoPlay}\r\n          onEnded={onEnded}\r\n          onProviderChange={handleProviderChange}\r\n          availableProviders={availableProviders}\r\n          activeProvider={activeProvider}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default VideoPlayerWrapper;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\app\\AppRoutes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\app\\RoutedApp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\auth\\AlternateLoginOptions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\auth\\AuthToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\auth\\EmailPasswordForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\layout\\ResponsiveLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\navigation\\DesktopNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\navigation\\FavoritesButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\navigation\\MobileMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\navigation\\MobileNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\navigation\\NavItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\navigation\\SearchBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\navigation\\UserMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":36,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":36,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":56,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":56,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":168,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":168,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  ControllerProps,\r\n  FieldPath,\r\n  FieldValues,\r\n  FormProvider,\r\n  useFormContext,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message) : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":119,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":119,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\r\nimport { cva } from \"class-variance-authority\"\r\nimport { ChevronDown } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst NavigationMenu = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <NavigationMenuViewport />\r\n  </NavigationMenuPrimitive.Root>\r\n))\r\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\r\n\r\nconst NavigationMenuList = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\r\n\r\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\r\n\r\nconst navigationMenuTriggerStyle = cva(\r\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\"\r\n)\r\n\r\nconst NavigationMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\r\n    {...props}\r\n  >\r\n    {children}{\" \"}\r\n    <ChevronDown\r\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  </NavigationMenuPrimitive.Trigger>\r\n))\r\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\r\n\r\nconst NavigationMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\r\n\r\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\r\n\r\nconst NavigationMenuViewport = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\r\n    <NavigationMenuPrimitive.Viewport\r\n      className={cn(\r\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nNavigationMenuViewport.displayName =\r\n  NavigationMenuPrimitive.Viewport.displayName\r\n\r\nconst NavigationMenuIndicator = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Indicator\r\n    ref={ref}\r\n    className={cn(\r\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\r\n  </NavigationMenuPrimitive.Indicator>\r\n))\r\nNavigationMenuIndicator.displayName =\r\n  NavigationMenuPrimitive.Indicator.displayName\r\n\r\nexport {\r\n  navigationMenuTriggerStyle,\r\n  NavigationMenu,\r\n  NavigationMenuList,\r\n  NavigationMenuItem,\r\n  NavigationMenuContent,\r\n  NavigationMenuTrigger,\r\n  NavigationMenuLink,\r\n  NavigationMenuIndicator,\r\n  NavigationMenuViewport,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":760,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":760,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { VariantProps, cva } from \"class-variance-authority\"\r\nimport { PanelLeft } from \"lucide-react\"\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\"\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\r\nconst SIDEBAR_WIDTH = \"16rem\"\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\r\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\r\n\r\ntype SidebarContext = {\r\n  state: \"expanded\" | \"collapsed\"\r\n  open: boolean\r\n  setOpen: (open: boolean) => void\r\n  openMobile: boolean\r\n  setOpenMobile: (open: boolean) => void\r\n  isMobile: boolean\r\n  toggleSidebar: () => void\r\n}\r\n\r\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext)\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst SidebarProvider = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    defaultOpen?: boolean\r\n    open?: boolean\r\n    onOpenChange?: (open: boolean) => void\r\n  }\r\n>(\r\n  (\r\n    {\r\n      defaultOpen = true,\r\n      open: openProp,\r\n      onOpenChange: setOpenProp,\r\n      className,\r\n      style,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const isMobile = useIsMobile()\r\n    const [openMobile, setOpenMobile] = React.useState(false)\r\n\r\n    // This is the internal state of the sidebar.\r\n    // We use openProp and setOpenProp for control from outside the component.\r\n    const [_open, _setOpen] = React.useState(defaultOpen)\r\n    const open = openProp ?? _open\r\n    const setOpen = React.useCallback(\r\n      (value: boolean | ((value: boolean) => boolean)) => {\r\n        const openState = typeof value === \"function\" ? value(open) : value\r\n        if (setOpenProp) {\r\n          setOpenProp(openState)\r\n        } else {\r\n          _setOpen(openState)\r\n        }\r\n\r\n        // This sets the cookie to keep the sidebar state.\r\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\r\n      },\r\n      [setOpenProp, open]\r\n    )\r\n\r\n    // Helper to toggle the sidebar.\r\n    const toggleSidebar = React.useCallback(() => {\r\n      return isMobile\r\n        ? setOpenMobile((open) => !open)\r\n        : setOpen((open) => !open)\r\n    }, [isMobile, setOpen, setOpenMobile])\r\n\r\n    // Adds a keyboard shortcut to toggle the sidebar.\r\n    React.useEffect(() => {\r\n      const handleKeyDown = (event: KeyboardEvent) => {\r\n        if (\r\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\r\n          (event.metaKey || event.ctrlKey)\r\n        ) {\r\n          event.preventDefault()\r\n          toggleSidebar()\r\n        }\r\n      }\r\n\r\n      window.addEventListener(\"keydown\", handleKeyDown)\r\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\r\n    }, [toggleSidebar])\r\n\r\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n    // This makes it easier to style the sidebar with Tailwind classes.\r\n    const state = open ? \"expanded\" : \"collapsed\"\r\n\r\n    const contextValue = React.useMemo<SidebarContext>(\r\n      () => ({\r\n        state,\r\n        open,\r\n        setOpen,\r\n        isMobile,\r\n        openMobile,\r\n        setOpenMobile,\r\n        toggleSidebar,\r\n      }),\r\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\r\n    )\r\n\r\n    return (\r\n      <SidebarContext.Provider value={contextValue}>\r\n        <TooltipProvider delayDuration={0}>\r\n          <div\r\n            style={\r\n              {\r\n                \"--sidebar-width\": SIDEBAR_WIDTH,\r\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\r\n                ...style,\r\n              } as React.CSSProperties\r\n            }\r\n            className={cn(\r\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\r\n              className\r\n            )}\r\n            ref={ref}\r\n            {...props}\r\n          >\r\n            {children}\r\n          </div>\r\n        </TooltipProvider>\r\n      </SidebarContext.Provider>\r\n    )\r\n  }\r\n)\r\nSidebarProvider.displayName = \"SidebarProvider\"\r\n\r\nconst Sidebar = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    side?: \"left\" | \"right\"\r\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\r\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\r\n  }\r\n>(\r\n  (\r\n    {\r\n      side = \"left\",\r\n      variant = \"sidebar\",\r\n      collapsible = \"offcanvas\",\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\r\n\r\n    if (collapsible === \"none\") {\r\n      return (\r\n        <div\r\n          className={cn(\r\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\r\n            className\r\n          )}\r\n          ref={ref}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    if (isMobile) {\r\n      return (\r\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n          <SheetContent\r\n            data-sidebar=\"sidebar\"\r\n            data-mobile=\"true\"\r\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\r\n            style={\r\n              {\r\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\r\n              } as React.CSSProperties\r\n            }\r\n            side={side}\r\n          >\r\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n          </SheetContent>\r\n        </Sheet>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className=\"group peer hidden md:block text-sidebar-foreground\"\r\n        data-state={state}\r\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n        data-variant={variant}\r\n        data-side={side}\r\n      >\r\n        {/* This is what handles the sidebar gap on desktop */}\r\n        <div\r\n          className={cn(\r\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\r\n            \"group-data-[collapsible=offcanvas]:w-0\",\r\n            \"group-data-[side=right]:rotate-180\",\r\n            variant === \"floating\" || variant === \"inset\"\r\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\r\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\r\n          )}\r\n        />\r\n        <div\r\n          className={cn(\r\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\r\n            side === \"left\"\r\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n            // Adjust the padding for floating and inset variants.\r\n            variant === \"floating\" || variant === \"inset\"\r\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\r\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\r\n            className\r\n          )}\r\n          {...props}\r\n        >\r\n          <div\r\n            data-sidebar=\"sidebar\"\r\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\r\n          >\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n)\r\nSidebar.displayName = \"Sidebar\"\r\n\r\nconst SidebarTrigger = React.forwardRef<\r\n  React.ElementRef<typeof Button>,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, onClick, ...props }, ref) => {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      data-sidebar=\"trigger\"\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"h-7 w-7\", className)}\r\n      onClick={(event) => {\r\n        onClick?.(event)\r\n        toggleSidebar()\r\n      }}\r\n      {...props}\r\n    >\r\n      <PanelLeft />\r\n      <span className=\"sr-only\">Toggle Sidebar</span>\r\n    </Button>\r\n  )\r\n})\r\nSidebarTrigger.displayName = \"SidebarTrigger\"\r\n\r\nconst SidebarRail = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\">\r\n>(({ className, ...props }, ref) => {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      data-sidebar=\"rail\"\r\n      aria-label=\"Toggle Sidebar\"\r\n      tabIndex={-1}\r\n      onClick={toggleSidebar}\r\n      title=\"Toggle Sidebar\"\r\n      className={cn(\r\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\r\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\r\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\r\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\r\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\r\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarRail.displayName = \"SidebarRail\"\r\n\r\nconst SidebarInset = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"main\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <main\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\r\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarInset.displayName = \"SidebarInset\"\r\n\r\nconst SidebarInput = React.forwardRef<\r\n  React.ElementRef<typeof Input>,\r\n  React.ComponentProps<typeof Input>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <Input\r\n      ref={ref}\r\n      data-sidebar=\"input\"\r\n      className={cn(\r\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarInput.displayName = \"SidebarInput\"\r\n\r\nconst SidebarHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"header\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarHeader.displayName = \"SidebarHeader\"\r\n\r\nconst SidebarFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"footer\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarFooter.displayName = \"SidebarFooter\"\r\n\r\nconst SidebarSeparator = React.forwardRef<\r\n  React.ElementRef<typeof Separator>,\r\n  React.ComponentProps<typeof Separator>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <Separator\r\n      ref={ref}\r\n      data-sidebar=\"separator\"\r\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarSeparator.displayName = \"SidebarSeparator\"\r\n\r\nconst SidebarContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarContent.displayName = \"SidebarContent\"\r\n\r\nconst SidebarGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroup.displayName = \"SidebarGroup\"\r\n\r\nconst SidebarGroupLabel = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\r\n>(({ className, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"div\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"group-label\"\r\n      className={cn(\r\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\r\n\r\nconst SidebarGroupAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\r\n>(({ className, asChild = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"group-action\"\r\n      className={cn(\r\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\r\n\r\nconst SidebarGroupContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    data-sidebar=\"group-content\"\r\n    className={cn(\"w-full text-sm\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\r\n\r\nconst SidebarMenu = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    data-sidebar=\"menu\"\r\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenu.displayName = \"SidebarMenu\"\r\n\r\nconst SidebarMenuItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li\r\n    ref={ref}\r\n    data-sidebar=\"menu-item\"\r\n    className={cn(\"group/menu-item relative\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst SidebarMenuButton = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean\r\n    isActive?: boolean\r\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\r\n  } & VariantProps<typeof sidebarMenuButtonVariants>\r\n>(\r\n  (\r\n    {\r\n      asChild = false,\r\n      isActive = false,\r\n      variant = \"default\",\r\n      size = \"default\",\r\n      tooltip,\r\n      className,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    const { isMobile, state } = useSidebar()\r\n\r\n    const button = (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"menu-button\"\r\n        data-size={size}\r\n        data-active={isActive}\r\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n        {...props}\r\n      />\r\n    )\r\n\r\n    if (!tooltip) {\r\n      return button\r\n    }\r\n\r\n    if (typeof tooltip === \"string\") {\r\n      tooltip = {\r\n        children: tooltip,\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Tooltip>\r\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n        <TooltipContent\r\n          side=\"right\"\r\n          align=\"center\"\r\n          hidden={state !== \"collapsed\" || isMobile}\r\n          {...tooltip}\r\n        />\r\n      </Tooltip>\r\n    )\r\n  }\r\n)\r\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\r\n\r\nconst SidebarMenuAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean\r\n    showOnHover?: boolean\r\n  }\r\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\r\n\r\nconst SidebarMenuBadge = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\">\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    data-sidebar=\"menu-badge\"\r\n    className={cn(\r\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\r\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n      \"peer-data-[size=sm]/menu-button:top-1\",\r\n      \"peer-data-[size=default]/menu-button:top-1.5\",\r\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n      \"group-data-[collapsible=icon]:hidden\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\r\n\r\nconst SidebarMenuSkeleton = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    showIcon?: boolean\r\n  }\r\n>(({ className, showIcon = false, ...props }, ref) => {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && (\r\n        <Skeleton\r\n          className=\"size-4 rounded-md\"\r\n          data-sidebar=\"menu-skeleton-icon\"\r\n        />\r\n      )}\r\n      <Skeleton\r\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  )\r\n})\r\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\r\n\r\nconst SidebarMenuSub = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    data-sidebar=\"menu-sub\"\r\n    className={cn(\r\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\r\n      \"group-data-[collapsible=icon]:hidden\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\r\n\r\nconst SidebarMenuSubItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\r\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\r\n\r\nconst SidebarMenuSubButton = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentProps<\"a\"> & {\r\n    asChild?: boolean\r\n    size?: \"sm\" | \"md\"\r\n    isActive?: boolean\r\n  }\r\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  useSidebar,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":43,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":43,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst toggleVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline:\r\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-3\",\r\n        sm: \"h-9 px-2.5\",\r\n        lg: \"h-11 px-5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toggle = React.forwardRef<\r\n  React.ElementRef<typeof TogglePrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, ...props }, ref) => (\r\n  <TogglePrimitive.Root\r\n    ref={ref}\r\n    className={cn(toggleVariants({ variant, size, className }))}\r\n    {...props}\r\n  />\r\n))\r\n\r\nToggle.displayName = TogglePrimitive.Root.displayName\r\n\r\nexport { Toggle, toggleVariants }\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3737,3740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3737,3740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":144,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4515,4518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4515,4518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":166,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5056,5059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5056,5059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":188,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":188,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5640,5643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5640,5643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":207,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6109,6112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6109,6112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":232,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":232,"endColumn":21},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":240,"column":16,"nodeType":"Identifier","messageId":"namedExport","endLine":240,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport type { User, Session } from '@supabase/supabase-js';\r\nimport { toast } from 'sonner';\r\nimport { logError } from '@/utils/productionLogger';\r\nimport { productionSecurity } from '@/utils/productionSecurity';\r\nimport ProductionValidator from '@/utils/productionValidation';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  session: Session | null;\r\n  isLoading: boolean;\r\n  signIn: (email: string, password: string) => Promise<void>;\r\n  signInWithGoogle: () => Promise<void>;\r\n  signUp: (email: string, password: string) => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n  isAuthenticated: boolean;\r\n  signInAsTestUser: () => Promise<void>;\r\n  isPremium: boolean;\r\n  activatePremium: (promoCode: string) => boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isPremium, setIsPremium] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    // Get initial session\r\n    const getInitialSession = async () => {\r\n      try {\r\n        const { data: { session: currentSession }, error } = await supabase.auth.getSession();\r\n        \r\n        if (error) {\r\n          // Production error handling - capture for monitoring\r\n          return;\r\n        }\r\n\r\n        if (mounted) {\r\n          setSession(currentSession);\r\n          setUser(currentSession?.user ?? null);\r\n          setIsLoading(false);\r\n          \r\n          // Check for premium status\r\n          const premiumStatus = localStorage.getItem('premium-status');\r\n          setIsPremium(premiumStatus === 'active');\r\n        }\r\n      } catch (error) {\r\n        // Production error handling - capture for monitoring\r\n        if (mounted) {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    getInitialSession();\r\n\r\n    // Set up auth state listener\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      async (event, currentSession) => {\r\n        // Auth state changed\r\n        \r\n        if (mounted) {\r\n          setSession(currentSession);\r\n          setUser(currentSession?.user ?? null);\r\n          setIsLoading(false);\r\n          \r\n          if (event === 'SIGNED_IN') {\r\n            toast.success('Successfully signed in!');\r\n          } else if (event === 'SIGNED_OUT') {\r\n            toast.success('Successfully signed out!');\r\n            setIsPremium(false);\r\n            localStorage.removeItem('premium-status');\r\n          } else if (event === 'TOKEN_REFRESHED') {\r\n            // Token refreshed\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      mounted = false;\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  const activatePremium = (promoCode: string): boolean => {\r\n    if (promoCode === \"Stanley123.\") {\r\n      setIsPremium(true);\r\n      localStorage.setItem('premium-status', 'active');\r\n      toast.success('Premium features activated! ≡ƒÄë');\r\n      return true;\r\n    }\r\n    toast.error('Invalid promo code');\r\n    return false;\r\n  };\r\n\r\n  const signIn = async (email: string, password: string) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const { error } = await supabase.auth.signInWithPassword({ \r\n        email: email.trim().toLowerCase(), \r\n        password \r\n      });\r\n      \r\n      if (error) {\r\n        throw error;\r\n      }\r\n      \r\n      toast.success('Signed in successfully');\r\n    } catch (error: any) {\r\n      // Production error handling - no console.error\r\n      toast.error(error.message || 'Error signing in');\r\n      throw error;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const signInAsTestUser = async () => {\r\n    // Test user functionality disabled in production\r\n    if (process.env.NODE_ENV === 'production') {\r\n      toast.error('Test user feature is disabled in production');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      const { error } = await supabase.auth.signInWithPassword({ \r\n        email: \"demo@example.com\", \r\n        password: \"DemoUser123!\" \r\n      });\r\n      \r\n      if (error) {\r\n        throw error;\r\n      }\r\n      \r\n      toast.success('Signed in as demo user successfully');\r\n    } catch (error: any) {\r\n      // Error reporting to production monitoring\r\n      toast.error('Demo user login temporarily unavailable');\r\n      throw error;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const signInWithGoogle = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'google',\r\n        options: {\r\n          redirectTo: window.location.origin\r\n        }\r\n      });\r\n      \r\n      if (error) {\r\n        throw error;\r\n      }\r\n    } catch (error: any) {\r\n      // Production error handling - no console.error\r\n      toast.error(error.message || 'Error signing in with Google');\r\n      throw error;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const signUp = async (email: string, password: string) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const { error } = await supabase.auth.signUp({ \r\n        email: email.trim().toLowerCase(), \r\n        password\r\n      });\r\n      \r\n      if (error) {\r\n        throw error;\r\n      }\r\n      \r\n      toast.success('Account created successfully!');\r\n    } catch (error: any) {\r\n      // Production error handling - no console.error\r\n      toast.error(error.message || 'Error creating account');\r\n      throw error;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const { error } = await supabase.auth.signOut();\r\n      \r\n      if (error) {\r\n        throw error;\r\n      }\r\n      \r\n      toast.success('Signed out successfully');\r\n    } catch (error: any) {\r\n      // Production error handling - no console.error\r\n      toast.error(error.message || 'Error signing out');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    session,\r\n    isLoading,\r\n    signIn,\r\n    signInWithGoogle,\r\n    signUp,\r\n    signOut,\r\n    isAuthenticated: !!user,\r\n    signInAsTestUser,\r\n    isPremium,\r\n    activatePremium\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport default useAuth;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useAIRecommendations.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1981,1984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1981,1984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2023,2026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2023,2026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2628,2631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2628,2631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2670,2673],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2670,2673],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchRecommendations'. Either include it or remove the dependency array.","line":115,"column":6,"nodeType":"ArrayExpression","endLine":115,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchRecommendations, user]","fix":{"range":[3656,3662],"text":"[fetchRecommendations, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nexport interface AIRecommendation {\r\n  title: string;\r\n  reason: string;\r\n  genre: string;\r\n  confidence: number;\r\n}\r\n\r\nexport interface UserWatchData {\r\n  title: string;\r\n  genre?: string;\r\n  completion_percent: number;\r\n  watch_duration: number;\r\n  favorited: boolean;\r\n}\r\n\r\nexport const useAIRecommendations = () => {\r\n  const { user } = useAuth();\r\n  const [recommendations, setRecommendations] = useState<AIRecommendation[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [lastFetched, setLastFetched] = useState<Date | null>(null);\r\n\r\n  const fetchUserWatchData = async (): Promise<UserWatchData[]> => {\r\n    if (!user) return [];\r\n\r\n    try {\r\n      // Get watch history with content_id included\r\n      const { data: watchHistory } = await supabase\r\n        .from('watch_sessions')\r\n        .select('content_id, content_title, total_watched_time, content_duration')\r\n        .eq('user_id', user.id)\r\n        .order('created_at', { ascending: false })\r\n        .limit(20);\r\n\r\n      // Get favorites\r\n      const { data: favorites } = await supabase\r\n        .from('user_favorites')\r\n        .select('content_id')\r\n        .eq('user_id', user.id);\r\n\r\n      const favoriteIds = new Set(favorites?.map(f => f.content_id) || []);\r\n\r\n      return (watchHistory || []).map(item => ({\r\n        title: item.content_title || 'Unknown',\r\n        completion_percent: item.content_duration \r\n          ? Math.min((item.total_watched_time / item.content_duration) * 100, 100)\r\n          : 0,\r\n        watch_duration: item.total_watched_time || 0,\r\n        favorited: favoriteIds.has(item.content_id),\r\n        genre: 'Unknown' // We'll enhance this later with content data\r\n      }));\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'useAIRecommendations', 'medium');\r\n      }\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const generateRecommendations = async (watchData: UserWatchData[]): Promise<AIRecommendation[]> => {\r\n    try {\r\n      const response = await supabase.functions.invoke('generate-ai-recommendations', {\r\n        body: { watchData }\r\n      });\r\n\r\n      if (response.error) throw response.error;\r\n      \r\n      return response.data?.recommendations || [];\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'useAIRecommendations', 'medium');\r\n      }\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchRecommendations = async (force = false) => {\r\n    if (!user || isLoading) return;\r\n    \r\n    // Check if we need to refetch (every 4 hours)\r\n    if (!force && lastFetched && Date.now() - lastFetched.getTime() < 4 * 60 * 60 * 1000) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const watchData = await fetchUserWatchData();\r\n      \r\n      if (watchData.length === 0) {\r\n        setRecommendations([]);\r\n        return;\r\n      }\r\n\r\n      const aiRecommendations = await generateRecommendations(watchData);\r\n      setRecommendations(aiRecommendations);\r\n      setLastFetched(new Date());\r\n    } catch (error) {\r\n      console.error('Error fetching recommendations:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchRecommendations();\r\n    }\r\n  }, [user]);\r\n\r\n  return {\r\n    recommendations,\r\n    isLoading,\r\n    fetchRecommendations,\r\n    lastFetched\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useAuthForm.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1733,1736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1733,1736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1775,1778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1775,1778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2432,2435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2432,2435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2474,2477],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2474,2477],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3035,3038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3035,3038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3077,3080],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3077,3080],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { toast } from 'sonner';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const useAuthForm = () => {\r\n  const [mode, setMode] = useState<'login' | 'signup'>('login');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // For backward compatibility\r\n  const isSignUp = mode === 'signup';\r\n  const setIsSignUp = (value: boolean) => setMode(value ? 'signup' : 'login');\r\n\r\n  const toggleMode = () => {\r\n    setMode(prev => prev === 'login' ? 'signup' : 'login');\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    await handleEmailAuth(email, password);\r\n  };\r\n\r\n  const handleEmailAuth = async (email: string, password: string) => {\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      if (mode === 'signup') {\r\n        const { error } = await supabase.auth.signUp({\r\n          email,\r\n          password,\r\n        });\r\n\r\n        if (error) throw error;\r\n        \r\n        toast.success('Sign up successful! Please check your email to verify your account.');\r\n        navigate('/');\r\n      } else {\r\n        const { error } = await supabase.auth.signInWithPassword({\r\n          email,\r\n          password,\r\n        });\r\n\r\n        if (error) throw error;\r\n        \r\n        toast.success('Logged in successfully!');\r\n        navigate('/');\r\n      }\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'useAuthForm', 'high');\r\n      }\r\n      toast.error(error instanceof Error ? error.message : 'Authentication failed');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleAuth = async () => {\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'google',\r\n        options: {\r\n          redirectTo: `${window.location.origin}/`,\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'useAuthForm', 'high');\r\n      }\r\n      toast.error('Error signing in with Google');\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleGuestAccess = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.signInAnonymously();\r\n      \r\n      if (error) throw error;\r\n      \r\n      toast.success('Logged in as guest');\r\n      navigate('/');\r\n    } catch (error) {\r\n      // Log to production error tracking\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        (window as any).errorReporter.captureException(error as Error, 'useAuthForm', 'medium');\r\n      }\r\n      toast.error('Error accessing as guest');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  const fillTestAccount = () => {\r\n    setEmail('test@example.com');\r\n    setPassword('password123');\r\n  };\r\n\r\n  // Add handleGoogleSignIn alias for backward compatibility\r\n  const handleGoogleSignIn = handleGoogleAuth;\r\n\r\n  return {\r\n    mode,\r\n    isLoading,\r\n    email,\r\n    setEmail,\r\n    password,\r\n    setPassword,\r\n    showPassword,\r\n    setShowPassword,\r\n    isSignUp,\r\n    setIsSignUp,\r\n    toggleMode,\r\n    handleSubmit,\r\n    handleEmailAuth,\r\n    handleGoogleAuth,\r\n    handleGuestAccess,\r\n    fillTestAccount,\r\n    handleGoogleSignIn // Add this alias to fix the error\r\n  };\r\n};\r\n\r\nexport default useAuthForm;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useContentDetail.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[557,560],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[557,560],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[731,734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[731,734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2126,2129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2126,2129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":135,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5664,5667],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5664,5667],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6055,6058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6055,6058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":213,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8141,8144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8141,8144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8527,8530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8527,8530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { toast } from 'sonner';\r\nimport { tmdbApi } from \"@/services/tmdbApi\";\r\nimport { getTrailerUrl, hasPremiumAccess, getAvailableProviders } from \"@/utils/videoUtils\";\r\nimport { getDefaultRuntime } from \"@/utils/contentUtils\";\r\nimport { Season, Episode } from \"@/types/content\";\r\n\r\nexport const useContentDetail = (contentId: string | undefined) => {\r\n  const [content, setContent] = useState<any | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [liked, setLiked] = useState(false);\r\n  const [relatedContent, setRelatedContent] = useState<any[]>([]);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [showTrailer, setShowTrailer] = useState(false);\r\n  const [showPremiumModal, setShowPremiumModal] = useState(false);\r\n  const [activeProvider, setActiveProvider] = useState<string>('vidsrc_xyz');\r\n  const [seasons, setSeasons] = useState<Season[]>([]);\r\n  const [currentSeason, setCurrentSeason] = useState<number | undefined>();\r\n  const [currentEpisode, setCurrentEpisode] = useState<number | undefined>();\r\n  const [trailerUrl, setTrailerUrl] = useState<string | null>(null);\r\n  const [showSplashScreen, setShowSplashScreen] = useState(false);\r\n  const [showNeonEffect, setShowNeonEffect] = useState(false);\r\n  const { user, isAuthenticated } = useAuth();\r\n\r\n  const availableProviders = contentId ? getAvailableProviders(contentId, content?.content_type || 'movie') : [];\r\n  const isPremiumContent = content?.is_premium || (content?.rating && parseFloat(content.rating) > 8.0);\r\n  const canAccessPremium = hasPremiumAccess();\r\n\r\n  // Fetch content details\r\n  useEffect(() => {\r\n    if (!contentId) return;\r\n    \r\n    // Scroll to top on page load\r\n    window.scrollTo(0, 0);\r\n    setIsLoading(true);\r\n\r\n    const fetchContent = async () => {\r\n      try {\r\n        // Fetch content details with type assertion\r\n        const { data: contentData, error: contentError } = await (supabase\r\n          .from('content') as any)\r\n          .select('*, content_categories(*)')\r\n          .eq('id', contentId)\r\n          .single();\r\n        \r\n        if (contentError) {\r\n          // If the content is not in our database, fetch from TMDB\r\n          const tmdbContent = await tmdbApi.getContentDetails(contentId);\r\n          if (tmdbContent) {\r\n            setContent({\r\n              id: tmdbContent.id,\r\n              title: tmdbContent.title,\r\n              description: tmdbContent.description,\r\n              image_url: tmdbContent.image,\r\n              image: tmdbContent.image,\r\n              backdrop: tmdbContent.backdrop,\r\n              category_id: null,\r\n              content_type: tmdbContent.type || 'movie',\r\n              year: tmdbContent.year,\r\n              duration: tmdbContent.duration || getDefaultRuntime(tmdbContent.type || 'movie'),\r\n              rating: tmdbContent.rating,\r\n              featured: false,\r\n              trending: true,\r\n              popular: true,\r\n              trailer_key: tmdbContent.trailer_key || contentId,\r\n              is_premium: parseFloat(tmdbContent.rating) > 8.0,\r\n              content_categories: {\r\n                id: '1',\r\n                name: tmdbContent.category,\r\n                slug: tmdbContent.category?.toLowerCase() || 'general',\r\n                description: null\r\n              }\r\n            });\r\n            \r\n            // Try to get trailer URL\r\n            try {\r\n              const trailer = await getTrailerUrl(contentId, tmdbContent.type || 'movie');\r\n              setTrailerUrl(trailer);\r\n            } catch (e) {\r\n            // Error fetching trailer - continue without trailer\r\n            }\r\n            \r\n            // Fetch related content from TMDB\r\n            const similar = await tmdbApi.getSimilarContent(contentId, tmdbContent.type || 'movie');\r\n            setRelatedContent(similar);\r\n            \r\n            // If it's a TV show, fetch seasons and episodes\r\n            if (tmdbContent.type === 'series' || tmdbContent.type === 'anime') {\r\n              try {\r\n                const tvSeasons = await tmdbApi.getTvShowSeasons(contentId);\r\n                if (tvSeasons.length > 0) {\r\n                  // Fetch episodes for the first season\r\n                  const firstSeasonEpisodes = await tmdbApi.getTvShowEpisodes(\r\n                    contentId, \r\n                    tvSeasons[0].season_number\r\n                  );\r\n                  \r\n                  // Update the first season's episodes\r\n                  if (firstSeasonEpisodes.length > 0) {\r\n                    tvSeasons[0].episodes = firstSeasonEpisodes;\r\n                  }\r\n                  \r\n                  setSeasons(tvSeasons);\r\n                } else {\r\n                  setSeasons([]);\r\n                }\r\n              } catch (error) {\r\n                setSeasons([]);\r\n              }\r\n            }\r\n            \r\n            setIsLoading(false);\r\n            return;\r\n          }\r\n          \r\n          throw contentError;\r\n        }\r\n        \r\n        setContent(contentData);\r\n        \r\n        // Try to get trailer URL\r\n        try {\r\n          const trailer = await getTrailerUrl(contentId, contentData.content_type || 'movie');\r\n          setTrailerUrl(trailer);\r\n        } catch (e) {\r\n          // Error fetching trailer - continue without trailer\r\n        }\r\n        \r\n        // Check if user has liked this content\r\n        if (isAuthenticated && user) {\r\n          const { data: favoriteData } = await (supabase\r\n            .from('user_favorites') as any)\r\n            .select('*')\r\n            .eq('user_id', user.id)\r\n            .eq('content_id', contentId)\r\n            .single();\r\n          \r\n          setLiked(!!favoriteData);\r\n        }\r\n        \r\n        // Fetch related content from the same category\r\n        if (contentData.category_id) {\r\n          const { data: relatedData } = await (supabase\r\n            .from('content') as any)\r\n            .select('*')\r\n            .eq('category_id', contentData.category_id)\r\n            .neq('id', contentId)\r\n            .limit(10);\r\n          \r\n          setRelatedContent(relatedData || []);\r\n        } else {\r\n          // If no category ID, fetch related content from TMDB\r\n          const similar = await tmdbApi.getSimilarContent(contentId, contentData.content_type);\r\n          setRelatedContent(similar);\r\n        }\r\n        \r\n        // If it's a TV show or anime, fetch seasons and episodes from TMDB\r\n        if (contentData.content_type === 'series' || contentData.content_type === 'anime') {\r\n          try {\r\n            const tvSeasons = await tmdbApi.getTvShowSeasons(contentId);\r\n            \r\n            if (tvSeasons && tvSeasons.length > 0) {\r\n              // For each season, fetch episodes\r\n              const seasonsWithEpisodes = await Promise.all(\r\n                tvSeasons.slice(0, 2).map(async (season) => {\r\n                  const episodes = await tmdbApi.getTvShowEpisodes(\r\n                    contentId, \r\n                    season.season_number\r\n                  );\r\n                  return {\r\n                    ...season,\r\n                    episodes: episodes || []\r\n                  };\r\n                })\r\n              );\r\n              \r\n              setSeasons(seasonsWithEpisodes);\r\n             } else {\r\n               setSeasons([]);\r\n             }\r\n           } catch (error) {\r\n             setSeasons([]);\r\n           }\r\n        }\r\n      } catch (error) {\r\n        // Error fetching content\r\n        setContent(null);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchContent();\r\n  }, [contentId, isAuthenticated, user]);\r\n\r\n\r\n  // Handle favorite toggle\r\n  const toggleFavorite = async () => {\r\n    if (!isAuthenticated) {\r\n      toast.error(\"Please sign in to add favorites\");\r\n      return;\r\n    }\r\n    \r\n    if (!contentId || !user) return;\r\n    \r\n    try {\r\n      if (liked) {\r\n        // Remove from favorites\r\n        await (supabase\r\n          .from('user_favorites') as any)\r\n          .delete()\r\n          .eq('user_id', user.id)\r\n          .eq('content_id', contentId);\r\n        \r\n        toast.success(\"Removed from favorites\");\r\n      } else {\r\n        // Add to favorites\r\n        const favoriteData = {\r\n          user_id: user.id,\r\n          content_id: contentId\r\n        };\r\n        \r\n        await (supabase\r\n          .from('user_favorites') as any)\r\n          .insert(favoriteData);\r\n        \r\n        toast.success(\"Added to favorites\");\r\n      }\r\n      \r\n      setLiked(!liked);\r\n    } catch (error) {\r\n      toast.error(\"Error updating favorites\");\r\n      // Error updating favorites\r\n    }\r\n  };\r\n\r\n  // Start watching\r\n  const startWatching = () => {\r\n    if (isPremiumContent && !canAccessPremium) {\r\n      toast.error(\"Premium content requires subscription or premium code\");\r\n      setShowPremiumModal(true);\r\n      return;\r\n    }\r\n    \r\n    // Show splash screen first\r\n    setShowSplashScreen(true);\r\n    \r\n    // After splash screen completes\r\n    setTimeout(() => {\r\n      setShowSplashScreen(false);\r\n      setIsPlaying(true);\r\n      \r\n      // Activate neon effect after a slight delay\r\n      setTimeout(() => {\r\n        setShowNeonEffect(true);\r\n      }, 500);\r\n    }, 3000);\r\n  };\r\n  \r\n  // Handle episode selection\r\n  const handleEpisodeSelect = (seasonNumber: number, episodeNumber: number) => {\r\n    if (isPremiumContent && !canAccessPremium) {\r\n      toast.error(\"Premium content requires subscription or premium code\");\r\n      setShowPremiumModal(true);\r\n      return;\r\n    }\r\n    \r\n    setCurrentSeason(seasonNumber);\r\n    setCurrentEpisode(episodeNumber);\r\n    \r\n    // Show splash screen first\r\n    setShowSplashScreen(true);\r\n    \r\n    // After splash screen completes\r\n    setTimeout(() => {\r\n      setShowSplashScreen(false);\r\n      setIsPlaying(true);\r\n      \r\n      // Activate neon effect after a slight delay\r\n      setTimeout(() => {\r\n        setShowNeonEffect(true);\r\n      }, 500);\r\n    }, 3000);\r\n  };\r\n\r\n  // Load episodes for a season\r\n  const loadEpisodesForSeason = async (seasonNumber: number) => {\r\n    if (!contentId) return;\r\n    \r\n    try {\r\n      const episodes = await tmdbApi.getTvShowEpisodes(contentId, seasonNumber);\r\n      if (episodes && episodes.length > 0) {\r\n        // Update the episodes of the selected season\r\n        setSeasons(prev => prev.map(season => {\r\n          if (season.season_number === seasonNumber) {\r\n            return {\r\n              ...season,\r\n              episodes: episodes\r\n            };\r\n          }\r\n          return season;\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      // Error loading episodes - keeping existing episodes\r\n      // Keep existing episodes if error\r\n    }\r\n  };\r\n\r\n  return {\r\n    content,\r\n    isLoading,\r\n    liked,\r\n    toggleFavorite,\r\n    relatedContent,\r\n    isPlaying,\r\n    setIsPlaying,\r\n    showTrailer,\r\n    setShowTrailer,\r\n    showPremiumModal,\r\n    setShowPremiumModal,\r\n    activeProvider,\r\n    setActiveProvider,\r\n    seasons,\r\n    currentSeason,\r\n    currentEpisode,\r\n    trailerUrl,\r\n    isPremiumContent,\r\n    canAccessPremium,\r\n    availableProviders,\r\n    startWatching,\r\n    handleEpisodeSelect,\r\n    loadEpisodesForSeason,\r\n    showSplashScreen,\r\n    setShowSplashScreen,\r\n    showNeonEffect,\r\n    setShowNeonEffect,\r\n    user\r\n  };\r\n};\r\n\r\nexport default useContentDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useContentDetails.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[537,540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[537,540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[568,571],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[568,571],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[945,948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[945,948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1179,1182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1179,1182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1762,1765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1762,1765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5168,5171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5168,5171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6686,6689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6686,6689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7684,7687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7684,7687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":228,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8068,8071],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8068,8071],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from 'react';\r\nimport { tmdbApi } from '@/services/tmdbApi';\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { getTrailerUrl } from \"@/utils/videoUtils\";\r\nimport { getDefaultRuntime } from \"@/utils/contentUtils\";\r\nimport { Season, Episode } from \"@/types/content\";\r\n\r\ninterface UseContentDetailsOptions {\r\n  contentId: string | undefined;\r\n  includeRelated?: boolean;\r\n  includeSeasons?: boolean;\r\n}\r\n\r\ninterface UseContentDetailsReturn {\r\n  content: any | null;\r\n  relatedContent: any[];\r\n  seasons: Season[];\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  trailerUrl: string | null;\r\n  liked: boolean;\r\n  toggleFavorite: () => Promise<void>;\r\n}\r\n\r\nexport const useContentDetails = ({ \r\n  contentId, \r\n  includeRelated = true,\r\n  includeSeasons = true\r\n}: UseContentDetailsOptions): UseContentDetailsReturn => {\r\n  const [content, setContent] = useState<any | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [liked, setLiked] = useState(false);\r\n  const [relatedContent, setRelatedContent] = useState<any[]>([]);\r\n  const [seasons, setSeasons] = useState<Season[]>([]);\r\n  const [trailerUrl, setTrailerUrl] = useState<string | null>(null);\r\n  \r\n  // Fetch content details\r\n  useEffect(() => {\r\n    if (!contentId) {\r\n      setIsLoading(false);\r\n      setError('No content ID provided');\r\n      return;\r\n    }\r\n    \r\n    const fetchContent = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        \r\n        // Try to fetch from Supabase first\r\n        const { data: contentData, error: contentError } = await (supabase\r\n          .from('content') as any)\r\n          .select('*, content_categories(*)')\r\n          .eq('id', contentId)\r\n          .single();\r\n        \r\n        if (contentError) {\r\n          // If not in our database, fetch from TMDB\r\n          const tmdbContent = await tmdbApi.getContentDetails(contentId);\r\n          \r\n          if (tmdbContent) {\r\n            const formattedContent = {\r\n              id: tmdbContent.id,\r\n              title: tmdbContent.title,\r\n              description: tmdbContent.description,\r\n              image_url: tmdbContent.image,\r\n              image: tmdbContent.image,\r\n              category_id: null,\r\n              content_type: tmdbContent.type || 'movie',\r\n              year: tmdbContent.year,\r\n              duration: tmdbContent.duration || getDefaultRuntime(tmdbContent.type || 'movie'),\r\n              rating: tmdbContent.rating,\r\n              featured: false,\r\n              trending: true,\r\n              popular: true,\r\n              trailer_key: tmdbContent.trailer_key || contentId,\r\n              is_premium: parseFloat(tmdbContent.rating) > 8.0,\r\n              content_categories: {\r\n                id: '1',\r\n                name: tmdbContent.category,\r\n                slug: tmdbContent.category?.toLowerCase() || 'general',\r\n                description: null\r\n              }\r\n            };\r\n            \r\n            setContent(formattedContent);\r\n            \r\n            // Fetch related content if needed\r\n            if (includeRelated) {\r\n              const similar = await tmdbApi.getSimilarContent(contentId, tmdbContent.type || 'movie');\r\n              setRelatedContent(similar);\r\n            }\r\n            \r\n            if (includeSeasons && (tmdbContent.type === 'series' || tmdbContent.type === 'anime')) {\r\n              try {\r\n                const tvSeasons = await tmdbApi.getTvShowSeasons(contentId);\r\n                if (tvSeasons && tvSeasons.length > 0) {\r\n                  const first = tvSeasons[0];\r\n                  const episodes = await tmdbApi.getTvShowEpisodes(contentId, first.season_number);\r\n                  if (episodes && episodes.length > 0) {\r\n                    tvSeasons[0] = { ...first, episodes };\r\n                  }\r\n                  setSeasons(tvSeasons);\r\n                } else {\r\n                  setSeasons([]);\r\n                }\r\n              } catch (e) {\r\n                setSeasons([]);\r\n              }\r\n            }\r\n            \r\n            // Try to get trailer URL\r\n            try {\r\n              const trailer = await getTrailerUrl(contentId, tmdbContent.type || 'movie');\r\n              setTrailerUrl(trailer);\r\n            } catch (e) {\r\n              console.error('Error fetching trailer:', e);\r\n            }\r\n          } else {\r\n            setError('Content not found');\r\n          }\r\n        } else {\r\n          // Content found in Supabase\r\n          setContent(contentData);\r\n          \r\n          // Get trailer URL\r\n          try {\r\n            const trailer = await getTrailerUrl(contentId, contentData.content_type || 'movie');\r\n            setTrailerUrl(trailer);\r\n          } catch (e) {\r\n            console.error('Error fetching trailer:', e);\r\n          }\r\n          \r\n          // Fetch related content if needed\r\n          if (includeRelated) {\r\n            if (contentData.category_id) {\r\n              const { data: relatedData } = await (supabase\r\n                .from('content') as any)\r\n                .select('*')\r\n                .eq('category_id', contentData.category_id)\r\n                .neq('id', contentId)\r\n                .limit(10);\r\n              \r\n              setRelatedContent(relatedData || []);\r\n            } else {\r\n              // Fallback to TMDB for related content\r\n              const similar = await tmdbApi.getSimilarContent(contentId, contentData.content_type);\r\n              setRelatedContent(similar);\r\n            }\r\n          }\r\n          \r\n          if (includeSeasons && (contentData.content_type === 'series' || contentData.content_type === 'anime')) {\r\n            try {\r\n              const tvSeasons = await tmdbApi.getTvShowSeasons(contentId);\r\n              if (tvSeasons && tvSeasons.length > 0) {\r\n                const first = tvSeasons[0];\r\n                const episodes = await tmdbApi.getTvShowEpisodes(contentId, first.season_number);\r\n                if (episodes && episodes.length > 0) {\r\n                  tvSeasons[0] = { ...first, episodes };\r\n                }\r\n                setSeasons(tvSeasons);\r\n              } else {\r\n                setSeasons([]);\r\n              }\r\n            } catch (e) {\r\n              setSeasons([]);\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Check if user has liked this content\r\n        const { data: session } = await supabase.auth.getSession();\r\n        if (session?.session?.user?.id) {\r\n          const { data: favoriteData } = await (supabase\r\n            .from('user_favorites') as any)\r\n            .select('*')\r\n            .eq('user_id', session.session.user.id)\r\n            .eq('content_id', contentId)\r\n            .single();\r\n          \r\n          setLiked(!!favoriteData);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching content details:\", error);\r\n        setError('Failed to load content details');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchContent();\r\n  }, [contentId, includeRelated, includeSeasons]);\r\n  \r\n  // Handle favorite toggle\r\n  const toggleFavorite = async () => {\r\n    try {\r\n      const { data: session } = await supabase.auth.getSession();\r\n      \r\n      if (!session?.session?.user) {\r\n        toast.error(\"Please sign in to add favorites\");\r\n        return;\r\n      }\r\n      \r\n      if (!contentId) return;\r\n      \r\n      const userId = session.session.user.id;\r\n      \r\n      if (liked) {\r\n        // Remove from favorites\r\n        await (supabase\r\n          .from('user_favorites') as any)\r\n          .delete()\r\n          .eq('user_id', userId)\r\n          .eq('content_id', contentId);\r\n        \r\n        toast.success(\"Removed from favorites\");\r\n      } else {\r\n        // Add to favorites\r\n        const favoriteData = {\r\n          user_id: userId,\r\n          content_id: contentId\r\n        };\r\n        \r\n        await (supabase\r\n          .from('user_favorites') as any)\r\n          .insert(favoriteData);\r\n        \r\n        toast.success(\"Added to favorites\");\r\n      }\r\n      \r\n      setLiked(!liked);\r\n    } catch (error) {\r\n      console.error(\"Error updating favorites:\", error);\r\n      toast.error(\"Error updating favorites\");\r\n    }\r\n  };\r\n  \r\n  return {\r\n    content,\r\n    relatedContent,\r\n    seasons,\r\n    isLoading,\r\n    error,\r\n    trailerUrl,\r\n    liked,\r\n    toggleFavorite\r\n  };\r\n};\r\n\r\nexport default useContentDetails;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useContinueWatching.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useCreditSystem.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2612,2615],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2612,2615],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4063,4066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4063,4066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { toast } from 'sonner';\r\n\r\nexport interface UserUsage {\r\n  id: string;\r\n  user_id: string;\r\n  watched_today: number;\r\n  downloads_today: number;\r\n  last_reset: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  role: 'free' | 'pro' | 'premium';\r\n  timezone: string;\r\n  priority_level: number;\r\n  username?: string;\r\n  avatar_url?: string;\r\n}\r\n\r\nexport interface CreditLimits {\r\n  maxStreams: number;\r\n  maxDownloads: number;\r\n  unlimited: boolean;\r\n}\r\n\r\nexport const useCreditSystem = () => {\r\n  const { user } = useAuth();\r\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\r\n  const [userUsage, setUserUsage] = useState<UserUsage | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Get credit limits based on user role\r\n  const getCreditLimits = (role: string): CreditLimits => {\r\n    switch (role) {\r\n      case 'free':\r\n        return { maxStreams: 5, maxDownloads: 0, unlimited: false };\r\n      case 'pro':\r\n        return { maxStreams: 12, maxDownloads: 5, unlimited: false };\r\n      case 'premium':\r\n        return { maxStreams: 0, maxDownloads: 0, unlimited: true };\r\n      default:\r\n        return { maxStreams: 5, maxDownloads: 0, unlimited: false };\r\n    }\r\n  };\r\n\r\n  // Stable function to check and reset daily limits\r\n  const checkAndResetDailyLimits = useCallback(async (usage: UserUsage, timezone: string) => {\r\n    try {\r\n      const userMidnight = getMidnightInTimezone(timezone);\r\n      const lastReset = new Date(usage.last_reset);\r\n      \r\n      if (lastReset < userMidnight) {\r\n        // Reset the daily limits\r\n        const { data: updatedUsage, error } = await supabase\r\n          .from('user_usage')\r\n          .update({\r\n            watched_today: 0,\r\n            downloads_today: 0,\r\n            last_reset: new Date().toISOString()\r\n          })\r\n          .eq('user_id', usage.user_id)\r\n          .select()\r\n          .single();\r\n\r\n        if (error) throw error;\r\n        setUserUsage(updatedUsage);\r\n      } else {\r\n        setUserUsage(usage);\r\n      }\r\n    } catch (error) {\r\n      // Production error handling - capture for monitoring\r\n    }\r\n  }, []);\r\n\r\n  // Initialize user profile and usage\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const initializeUser = async () => {\r\n      try {\r\n        // Get user profile\r\n        let profile: any = null;\r\n        const profileResult = await supabase\r\n          .from('user_profiles')\r\n          .select('*')\r\n          .eq('id', user.id)\r\n          .single();\r\n        const profileError = profileResult.error;\r\n        profile = profileResult.data;\r\n\r\n        if (profileError && profileError.code === 'PGRST116') {\r\n          // Create profile if it doesn't exist\r\n          const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n          const { data: newProfile, error: createError } = await supabase\r\n            .from('user_profiles')\r\n            .insert({\r\n              id: user.id,\r\n              role: 'free',\r\n              timezone: userTimezone,\r\n              priority_level: 3\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n          if (createError) throw createError;\r\n          profile = newProfile;\r\n        } else if (profileError) {\r\n          throw profileError;\r\n        }\r\n\r\n        // Transform profile to match our interface\r\n        const transformedProfile: UserProfile = {\r\n          id: profile.id,\r\n          role: (profile.role as 'free' | 'pro' | 'premium') || 'free',\r\n          timezone: profile.timezone || 'UTC',\r\n          priority_level: profile.priority_level || 3,\r\n          username: profile.username,\r\n          avatar_url: profile.avatar_url\r\n        };\r\n\r\n        setUserProfile(transformedProfile);\r\n\r\n        // Get or create user usage\r\n        let usage: any = null;\r\n        const usageResult = await supabase\r\n          .from('user_usage')\r\n          .select('*')\r\n          .eq('user_id', user.id)\r\n          .single();\r\n        const usageError = usageResult.error;\r\n        usage = usageResult.data;\r\n\r\n        if (usageError && usageError.code === 'PGRST116') {\r\n          // Create usage record if it doesn't exist\r\n          const { data: newUsage, error: createUsageError } = await supabase\r\n            .from('user_usage')\r\n            .insert({\r\n              user_id: user.id,\r\n              watched_today: 0,\r\n              downloads_today: 0,\r\n              last_reset: new Date().toISOString()\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n          if (createUsageError) throw createUsageError;\r\n          usage = newUsage;\r\n        } else if (usageError) {\r\n          throw usageError;\r\n        }\r\n\r\n        // Check if we need to reset daily limits\r\n        await checkAndResetDailyLimits(usage, transformedProfile.timezone);\r\n        \r\n      } catch (error) {\r\n        // Production error handling - capture for monitoring  \r\n        setUserUsage(null);\r\n        toast.error('Failed to load user data');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeUser();\r\n  }, [user, checkAndResetDailyLimits]);\r\n\r\n  \r\n\r\n  // Get midnight in user's timezone\r\n  const getMidnightInTimezone = (timezone: string): Date => {\r\n    const now = new Date();\r\n    const todayMidnight = new Date(now.toLocaleString('en-US', { timeZone: timezone }));\r\n    todayMidnight.setHours(0, 0, 0, 0);\r\n    return todayMidnight;\r\n  };\r\n\r\n  // Check if user can stream\r\n  const canStream = (): boolean => {\r\n    if (!userProfile || !userUsage) return false;\r\n    \r\n    const limits = getCreditLimits(userProfile.role);\r\n    if (limits.unlimited) return true;\r\n    \r\n    return userUsage.watched_today < limits.maxStreams;\r\n  };\r\n\r\n  // Check if user can download\r\n  const canDownload = (): boolean => {\r\n    if (!userProfile || !userUsage) return false;\r\n    \r\n    const limits = getCreditLimits(userProfile.role);\r\n    if (limits.unlimited) return true;\r\n    if (userProfile.role === 'free') return false;\r\n    \r\n    return userUsage.downloads_today < limits.maxDownloads;\r\n  };\r\n\r\n  // Deduct streaming credit\r\n  const deductStreamingCredit = async (): Promise<boolean> => {\r\n    if (!userUsage || !canStream()) return false;\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('user_usage')\r\n        .update({\r\n          watched_today: userUsage.watched_today + 1\r\n        })\r\n        .eq('user_id', userUsage.user_id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      \r\n      setUserUsage(data);\r\n      return true;\r\n    } catch (error) {\r\n      // Production error handling - capture for monitoring\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Deduct download credit\r\n  const deductDownloadCredit = async (): Promise<boolean> => {\r\n    if (!userUsage || !canDownload()) return false;\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('user_usage')\r\n        .update({\r\n          downloads_today: userUsage.downloads_today + 1\r\n        })\r\n        .eq('user_id', userUsage.user_id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      \r\n      setUserUsage(data);\r\n      return true;\r\n    } catch (error) {\r\n      // Production error handling - capture for monitoring\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Get remaining downloads for the day\r\n  const getDownloadsRemaining = (): number => {\r\n    if (!userProfile || !userUsage) return 0;\r\n    \r\n    const limits = getCreditLimits(userProfile.role);\r\n    if (limits.unlimited || userProfile.role === 'free') return 0;\r\n    \r\n    return Math.max(0, limits.maxDownloads - userUsage.downloads_today);\r\n  };\r\n\r\n  // Get remaining streams for the day\r\n  const getStreamsRemaining = (): number => {\r\n    if (!userProfile || !userUsage) return 0;\r\n    \r\n    const limits = getCreditLimits(userProfile.role);\r\n    if (limits.unlimited) return 0;\r\n    \r\n    return Math.max(0, limits.maxStreams - userUsage.watched_today);\r\n  };\r\n\r\n  return {\r\n    userProfile,\r\n    userUsage,\r\n    isLoading,\r\n    canStream,\r\n    canDownload,\r\n    deductStreamingCredit,\r\n    deductDownloadCredit,\r\n    getCreditLimits: () => userProfile ? getCreditLimits(userProfile.role) : null,\r\n    getDownloadsRemaining,\r\n    getStreamsRemaining\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useLocalStorage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useNotifications.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLatestReleases'. Either include it or remove the dependency array.","line":93,"column":6,"nodeType":"ArrayExpression","endLine":93,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchLatestReleases]","fix":{"range":[3150,3152],"text":"[fetchLatestReleases]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\usePWA.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[643,646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[643,646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface BeforeInstallPromptEvent extends Event {\r\n  prompt(): Promise<void>;\r\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\r\n}\r\n\r\nexport const usePWA = () => {\r\n  const [installPrompt, setInstallPrompt] = useState<BeforeInstallPromptEvent | null>(null);\r\n  const [isInstallable, setIsInstallable] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check if app is already installed\r\n    const isAppInstalled = window.matchMedia('(display-mode: standalone)').matches || \r\n                          (window.navigator as any).standalone === true;\r\n    setIsInstalled(isAppInstalled);\r\n\r\n    // Listen for the beforeinstallprompt event\r\n    const handleBeforeInstallPrompt = (e: Event) => {\r\n      e.preventDefault();\r\n      const promptEvent = e as BeforeInstallPromptEvent;\r\n      setInstallPrompt(promptEvent);\r\n      setIsInstallable(true);\r\n    };\r\n\r\n    // Listen for app installed event\r\n    const handleAppInstalled = () => {\r\n      setIsInstalled(true);\r\n      setIsInstallable(false);\r\n      setInstallPrompt(null);\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n    window.addEventListener('appinstalled', handleAppInstalled);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n      window.removeEventListener('appinstalled', handleAppInstalled);\r\n    };\r\n  }, []);\r\n\r\n  const promptInstall = async () => {\r\n    if (!installPrompt) return false;\r\n\r\n    try {\r\n      await installPrompt.prompt();\r\n      const choice = await installPrompt.userChoice;\r\n      \r\n      if (choice.outcome === 'accepted') {\r\n        setInstallPrompt(null);\r\n        setIsInstallable(false);\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Install prompt failed:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return {\r\n    isInstallable,\r\n    isInstalled,\r\n    promptInstall\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useProductionAuth.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4911,4914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4911,4914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'checkRateLimit', 'clearFailedAttempts', and 'recordFailedAttempt'. Either include them or remove the dependency array.","line":176,"column":6,"nodeType":"ArrayExpression","endLine":176,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [checkRateLimit, clearFailedAttempts, recordFailedAttempt]","fix":{"range":[5162,5177],"text":"[checkRateLimit, clearFailedAttempts, recordFailedAttempt]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":204,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5938,5941],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5938,5941],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6604,6607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6604,6607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":249,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7266,7269],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7266,7269],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":287,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":287,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8450,8453],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8450,8453],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production-ready authentication hook with enhanced security\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport type { User, Session } from '@supabase/supabase-js';\r\nimport { toast } from 'sonner';\r\nimport { errorReporter } from '@/utils/errorReporting';\r\nimport { secureStorage } from '@/utils/securityUtils';\r\nimport { validateEmail, validatePassword } from '@/utils/validationUtils';\r\n\r\ninterface AuthState {\r\n  user: User | null;\r\n  session: Session | null;\r\n  isLoading: boolean;\r\n  isAuthenticated: boolean;\r\n  isPremium: boolean;\r\n}\r\n\r\ninterface LoginAttempt {\r\n  email: string;\r\n  timestamp: number;\r\n  failures: number;\r\n}\r\n\r\nexport const useProductionAuth = () => {\r\n  const [authState, setAuthState] = useState<AuthState>({\r\n    user: null,\r\n    session: null,\r\n    isLoading: true,\r\n    isAuthenticated: false,\r\n    isPremium: false\r\n  });\r\n\r\n  const [loginAttempts, setLoginAttempts] = useState<Map<string, LoginAttempt>>(new Map());\r\n\r\n  // Check for too many failed login attempts\r\n  const checkRateLimit = (email: string): boolean => {\r\n    const attempt = loginAttempts.get(email);\r\n    if (!attempt) return true;\r\n\r\n    const now = Date.now();\r\n    const timeDiff = now - attempt.timestamp;\r\n    const cooldownTime = 15 * 60 * 1000; // 15 minutes\r\n\r\n    if (attempt.failures >= 5 && timeDiff < cooldownTime) {\r\n      const remainingTime = Math.ceil((cooldownTime - timeDiff) / (60 * 1000));\r\n      toast.error(`Too many login attempts. Try again in ${remainingTime} minutes.`);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  // Record failed login attempt\r\n  const recordFailedAttempt = (email: string) => {\r\n    const attempt = loginAttempts.get(email) || { email, timestamp: Date.now(), failures: 0 };\r\n    attempt.failures += 1;\r\n    attempt.timestamp = Date.now();\r\n    setLoginAttempts(new Map(loginAttempts.set(email, attempt)));\r\n  };\r\n\r\n  // Clear failed attempts on successful login\r\n  const clearFailedAttempts = (email: string) => {\r\n    loginAttempts.delete(email);\r\n    setLoginAttempts(new Map(loginAttempts));\r\n  };\r\n\r\n  // Initialize auth state\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const initializeAuth = async () => {\r\n      try {\r\n        const { data: { session }, error } = await supabase.auth.getSession();\r\n        \r\n        if (error) {\r\n          errorReporter.captureException(error as Error, 'useProductionAuth.initialize');\r\n          throw error;\r\n        }\r\n\r\n        if (mounted) {\r\n          const isPremium = secureStorage.get('premium-status') === 'active';\r\n          \r\n          setAuthState({\r\n            user: session?.user || null,\r\n            session,\r\n            isLoading: false,\r\n            isAuthenticated: !!session?.user,\r\n            isPremium\r\n          });\r\n        }\r\n      } catch (error) {\r\n        if (mounted) {\r\n          setAuthState(prev => ({ ...prev, isLoading: false }));\r\n          errorReporter.captureException(error as Error, 'useProductionAuth.initialize');\r\n        }\r\n      }\r\n    };\r\n\r\n    initializeAuth();\r\n\r\n    // Set up auth state listener\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (mounted) {\r\n          const isPremium = secureStorage.get('premium-status') === 'active';\r\n          \r\n          setAuthState({\r\n            user: session?.user || null,\r\n            session,\r\n            isLoading: false,\r\n            isAuthenticated: !!session?.user,\r\n            isPremium\r\n          });\r\n\r\n          // Handle auth events\r\n          switch (event) {\r\n            case 'SIGNED_IN':\r\n              toast.success('Successfully signed in!');\r\n              break;\r\n            case 'SIGNED_OUT':\r\n              toast.success('Successfully signed out!');\r\n              secureStorage.remove('premium-status');\r\n              break;\r\n            case 'TOKEN_REFRESHED':\r\n              // Silent refresh\r\n              break;\r\n            case 'PASSWORD_RECOVERY':\r\n              toast.info('Password recovery email sent');\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      mounted = false;\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  const signIn = useCallback(async (email: string, password: string) => {\r\n    // Validate inputs\r\n    if (!validateEmail(email)) {\r\n      toast.error('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    if (!checkRateLimit(email)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAuthState(prev => ({ ...prev, isLoading: true }));\r\n\r\n      const { error } = await supabase.auth.signInWithPassword({\r\n        email: email.trim().toLowerCase(),\r\n        password\r\n      });\r\n\r\n      if (error) {\r\n        recordFailedAttempt(email);\r\n        throw error;\r\n      }\r\n\r\n      clearFailedAttempts(email);\r\n    } catch (error: any) {\r\n      errorReporter.captureException(error, 'useProductionAuth.signIn');\r\n      toast.error(error.message || 'Failed to sign in');\r\n      throw error;\r\n    } finally {\r\n      setAuthState(prev => ({ ...prev, isLoading: false }));\r\n    }\r\n  }, [loginAttempts]);\r\n\r\n  const signUp = useCallback(async (email: string, password: string) => {\r\n    // Validate inputs\r\n    if (!validateEmail(email)) {\r\n      toast.error('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    const passwordValidation = validatePassword(password);\r\n    if (!passwordValidation.isValid) {\r\n      toast.error(passwordValidation.errors[0]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAuthState(prev => ({ ...prev, isLoading: true }));\r\n\r\n      const { error } = await supabase.auth.signUp({\r\n        email: email.trim().toLowerCase(),\r\n        password\r\n      });\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n\r\n      toast.success('Account created! Please check your email to verify your account.');\r\n    } catch (error: any) {\r\n      errorReporter.captureException(error, 'useProductionAuth.signUp');\r\n      toast.error(error.message || 'Failed to create account');\r\n      throw error;\r\n    } finally {\r\n      setAuthState(prev => ({ ...prev, isLoading: false }));\r\n    }\r\n  }, []);\r\n\r\n  const signInWithGoogle = useCallback(async () => {\r\n    try {\r\n      setAuthState(prev => ({ ...prev, isLoading: true }));\r\n\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'google',\r\n        options: {\r\n          redirectTo: `${window.location.origin}/auth/callback`\r\n        }\r\n      });\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n    } catch (error: any) {\r\n      errorReporter.captureException(error, 'useProductionAuth.signInWithGoogle');\r\n      toast.error(error.message || 'Failed to sign in with Google');\r\n      throw error;\r\n    } finally {\r\n      setAuthState(prev => ({ ...prev, isLoading: false }));\r\n    }\r\n  }, []);\r\n\r\n  const signOut = useCallback(async () => {\r\n    try {\r\n      setAuthState(prev => ({ ...prev, isLoading: true }));\r\n\r\n      const { error } = await supabase.auth.signOut();\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n\r\n      // Clear all secure storage\r\n      secureStorage.remove('premium-status');\r\n      secureStorage.remove('user-preferences');\r\n    } catch (error: any) {\r\n      errorReporter.captureException(error, 'useProductionAuth.signOut');\r\n      toast.error(error.message || 'Failed to sign out');\r\n    } finally {\r\n      setAuthState(prev => ({ ...prev, isLoading: false }));\r\n    }\r\n  }, []);\r\n\r\n  const activatePremium = useCallback((promoCode: string): boolean => {\r\n    const validCodes = ['PREMIUM2024', 'CINEMAX2024', 'Stanley123.'];\r\n    \r\n    if (validCodes.includes(promoCode)) {\r\n      setAuthState(prev => ({ ...prev, isPremium: true }));\r\n      secureStorage.set('premium-status', 'active');\r\n      toast.success('Premium features activated! ≡ƒÄë');\r\n      return true;\r\n    }\r\n    \r\n    toast.error('Invalid promo code');\r\n    return false;\r\n  }, []);\r\n\r\n  const resetPassword = useCallback(async (email: string) => {\r\n    if (!validateEmail(email)) {\r\n      toast.error('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n        redirectTo: `${window.location.origin}/auth/reset-password`\r\n      });\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n\r\n      toast.success('Password reset email sent!');\r\n    } catch (error: any) {\r\n      errorReporter.captureException(error, 'useProductionAuth.resetPassword');\r\n      toast.error(error.message || 'Failed to send password reset email');\r\n      throw error;\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    ...authState,\r\n    signIn,\r\n    signUp,\r\n    signInWithGoogle,\r\n    signOut,\r\n    activatePremium,\r\n    resetPassword\r\n  };\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useProductionOptimizations.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1331,1334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1331,1334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1788,1791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1788,1791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2253,2256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2253,2256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2311,2314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2311,2314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4077,4080],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4077,4080],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production optimizations hook\r\n */\r\n\r\nimport { useEffect, useCallback } from 'react';\r\nimport { getConfig } from '@/utils/productionConfig';\r\nimport { analytics } from '@/utils/analytics';\r\nimport { contentCache } from '@/utils/cacheManager';\r\nimport { cleanupResources } from '@/utils/performanceUtils';\r\n\r\nexport const useProductionOptimizations = () => {\r\n  const config = getConfig();\r\n\r\n  // Preload critical resources\r\n  const preloadCriticalResources = useCallback(() => {\r\n    const criticalPaths = [\r\n      '/sw.js',\r\n      '/manifest.json'\r\n    ];\r\n\r\n    criticalPaths.forEach(path => {\r\n      const link = document.createElement('link');\r\n      link.rel = 'prefetch';\r\n      link.href = path;\r\n      document.head.appendChild(link);\r\n    });\r\n  }, []);\r\n\r\n  // Setup performance monitoring\r\n  const setupPerformanceMonitoring = useCallback(() => {\r\n    if (!config.enablePerformanceMonitoring) {\r\n      return;\r\n    }\r\n\r\n    // Monitor Core Web Vitals\r\n    if ('PerformanceObserver' in window) {\r\n      // Largest Contentful Paint (LCP)\r\n      const lcpObserver = new PerformanceObserver((list) => {\r\n        const entries = list.getEntries();\r\n        const lcp = entries[entries.length - 1] as PerformanceEntry;\r\n        \r\n        analytics.trackPerformance('LCP', lcp.startTime, {\r\n          element: (lcp as any).element?.tagName\r\n        });\r\n      });\r\n      \r\n      try {\r\n        lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });\r\n      } catch (e) {\r\n        // Browser doesn't support this metric\r\n      }\r\n\r\n      // First Input Delay (FID)\r\n      const fidObserver = new PerformanceObserver((list) => {\r\n        const entries = list.getEntries();\r\n        entries.forEach((entry) => {\r\n          analytics.trackPerformance('FID', (entry as any).processingStart - entry.startTime);\r\n        });\r\n      });\r\n      \r\n      try {\r\n        fidObserver.observe({ entryTypes: ['first-input'] });\r\n      } catch (e) {\r\n        // Browser doesn't support this metric\r\n      }\r\n\r\n      // Cumulative Layout Shift (CLS)\r\n      let clsScore = 0;\r\n      const clsObserver = new PerformanceObserver((list) => {\r\n        const entries = list.getEntries();\r\n        entries.forEach((entry) => {\r\n          if (!(entry as any).hadRecentInput) {\r\n            clsScore += (entry as any).value;\r\n          }\r\n        });\r\n        \r\n        analytics.trackPerformance('CLS', clsScore);\r\n      });\r\n      \r\n      try {\r\n        clsObserver.observe({ entryTypes: ['layout-shift'] });\r\n      } catch (e) {\r\n        // Browser doesn't support this metric\r\n      }\r\n    }\r\n\r\n    // Monitor page load time\r\n    window.addEventListener('load', () => {\r\n      const perfData = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\r\n      \r\n      analytics.trackPerformance('Page Load Time', perfData.loadEventEnd - perfData.fetchStart);\r\n      analytics.trackPerformance('DOM Content Loaded', perfData.domContentLoadedEventEnd - perfData.fetchStart);\r\n      analytics.trackPerformance('First Byte', perfData.responseStart - perfData.fetchStart);\r\n    });\r\n  }, [config.enablePerformanceMonitoring]);\r\n\r\n  // Setup memory management\r\n  const setupMemoryManagement = useCallback(() => {\r\n    // Clean up resources on page visibility change\r\n    document.addEventListener('visibilitychange', () => {\r\n      if (document.hidden) {\r\n        cleanupResources();\r\n        \r\n        // Pause non-critical operations\r\n        contentCache.invalidatePattern(/^temp_/);\r\n      }\r\n    });\r\n\r\n    // Clean up before page unload\r\n    window.addEventListener('beforeunload', () => {\r\n      cleanupResources();\r\n    });\r\n\r\n    // Periodic cleanup\r\n    const cleanupInterval = setInterval(() => {\r\n      cleanupResources();\r\n    }, 5 * 60 * 1000); // Every 5 minutes\r\n\r\n    return () => {\r\n      clearInterval(cleanupInterval);\r\n    };\r\n  }, []);\r\n\r\n  // Setup network optimizations\r\n  const setupNetworkOptimizations = useCallback(() => {\r\n    // Connection-aware loading\r\n    if ('connection' in navigator) {\r\n      const connection = (navigator as any).connection;\r\n      \r\n      if (connection) {\r\n        // Adjust behavior based on connection type\r\n        const isSlowConnection = connection.effectiveType === '2g' || connection.effectiveType === 'slow-2g';\r\n        \r\n        if (isSlowConnection) {\r\n          document.documentElement.setAttribute('data-connection', 'slow');\r\n          \r\n          // Reduce image quality for slow connections\r\n          analytics.trackEvent('slow_connection_detected', {\r\n            effectiveType: connection.effectiveType,\r\n            downlink: connection.downlink\r\n          });\r\n        }\r\n        \r\n        // Enable data saver mode\r\n        if (connection.saveData) {\r\n          document.documentElement.setAttribute('data-save-data', 'true');\r\n          \r\n          analytics.trackEvent('data_saver_enabled');\r\n        }\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Setup intersection observer for lazy loading\r\n  const setupIntersectionObserver = useCallback(() => {\r\n    if ('IntersectionObserver' in window) {\r\n      const imageObserver = new IntersectionObserver((entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            const img = entry.target as HTMLImageElement;\r\n            const src = img.dataset.src;\r\n            \r\n            if (src) {\r\n              img.src = src;\r\n              img.removeAttribute('data-src');\r\n              imageObserver.unobserve(img);\r\n            }\r\n          }\r\n        });\r\n      }, {\r\n        rootMargin: '50px'\r\n      });\r\n\r\n      // Observe all images with data-src attribute\r\n      const lazyImages = document.querySelectorAll('img[data-src]');\r\n      lazyImages.forEach(img => imageObserver.observe(img));\r\n\r\n      return () => {\r\n        imageObserver.disconnect();\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  // Setup service worker for caching\r\n  const setupServiceWorker = useCallback(async () => {\r\n    if ('serviceWorker' in navigator && config.enablePerformanceMonitoring) {\r\n      try {\r\n        const registration = await navigator.serviceWorker.register('/sw.js');\r\n        \r\n        analytics.trackEvent('service_worker_registered', {\r\n          scope: registration.scope\r\n        });\r\n        \r\n        // Listen for updates\r\n        registration.addEventListener('updatefound', () => {\r\n          analytics.trackEvent('service_worker_update_found');\r\n        });\r\n        \r\n      } catch (error) {\r\n        analytics.trackError(error as Error, 'Service Worker');\r\n      }\r\n    }\r\n  }, [config.enablePerformanceMonitoring]);\r\n\r\n  useEffect(() => {\r\n    // Only run optimizations in production\r\n    if (process.env.NODE_ENV === 'production') {\r\n      preloadCriticalResources();\r\n      setupPerformanceMonitoring();\r\n      setupNetworkOptimizations();\r\n      setupServiceWorker();\r\n      \r\n      const memoryCleanup = setupMemoryManagement();\r\n      const intersectionCleanup = setupIntersectionObserver();\r\n      \r\n      return () => {\r\n        memoryCleanup?.();\r\n        intersectionCleanup?.();\r\n      };\r\n    }\r\n  }, [\r\n    preloadCriticalResources,\r\n    setupPerformanceMonitoring,\r\n    setupMemoryManagement,\r\n    setupNetworkOptimizations,\r\n    setupIntersectionObserver,\r\n    setupServiceWorker\r\n  ]);\r\n\r\n  return {\r\n    preloadCriticalResources,\r\n    setupPerformanceMonitoring,\r\n    setupMemoryManagement,\r\n    setupNetworkOptimizations,\r\n    setupIntersectionObserver,\r\n    setupServiceWorker\r\n  };\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useProductionValidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useSmartDownload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useTheme.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":31,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":31,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from \"react\";\r\n\r\nexport type Theme = \"default\" | \"midnight\" | \"neon\" | \"sunrise\" | \"forest\";\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  setTheme: (theme: Theme) => void;\r\n}\r\n\r\nconst ThemeContext = React.createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n  const [theme, setTheme] = React.useState<Theme>(() => {\r\n    const savedTheme = localStorage.getItem(\"cinemax-theme\") as Theme;\r\n    return savedTheme || \"default\";\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    localStorage.setItem(\"cinemax-theme\", theme);\r\n    document.documentElement.setAttribute(\"data-theme\", theme);\r\n  }, [theme]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, setTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useTheme = () => {\r\n  const context = React.useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\r\n  }\r\n  return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useUserProfile.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProfile'. Either include it or remove the dependency array.","line":115,"column":6,"nodeType":"ArrayExpression","endLine":115,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchProfile, user.id]","fix":{"range":[3230,3240],"text":"[fetchProfile, user.id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { toast } from 'sonner';\r\n\r\ninterface UserProfile {\r\n  id: string;\r\n  username: string;\r\n  avatar_url: string | null;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n  subscription_tier: string;\r\n  subscription_expires_at?: string;\r\n  role: 'free' | 'pro' | 'premium';\r\n  downloads_today?: number;\r\n  watched_today?: number;\r\n  timezone?: string;\r\n  priority_level?: number;\r\n}\r\n\r\nexport const useUserProfile = () => {\r\n  const [profileData, setProfileData] = useState<UserProfile | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const { user } = useAuth();\r\n\r\n  const fetchProfile = async () => {\r\n    if (!user) {\r\n      setIsLoading(false);\r\n      setError(null);\r\n      setProfileData(null);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      const { data, error: fetchError } = await supabase\r\n        .from('user_profiles')\r\n        .select('*')\r\n        .eq('id', user.id)\r\n        .maybeSingle();\r\n\r\n      if (fetchError) {\r\n        console.error('Error fetching profile:', fetchError);\r\n        // Don't show error toast for missing profile, we'll create it\r\n        if (!fetchError.message.includes('No rows')) {\r\n          setError('Failed to load profile data');\r\n          return;\r\n        }\r\n      }\r\n\r\n      // If profile doesn't exist yet, create it\r\n      if (!data && user) {\r\n        const newProfile = {\r\n          id: user.id,\r\n          username: user.email?.split('@')[0] || 'User',\r\n          avatar_url: null,\r\n          subscription_tier: 'free',\r\n          role: 'free' as const\r\n        };\r\n\r\n        const { data: createdProfile, error: createError } = await supabase\r\n          .from('user_profiles')\r\n          .insert(newProfile)\r\n          .select()\r\n          .single();\r\n\r\n        if (createError) {\r\n          console.error('Error creating profile:', createError);\r\n          setError('Failed to create profile');\r\n          return;\r\n        }\r\n\r\n        setProfileData(createdProfile as UserProfile);\r\n      } else if (data) {\r\n        setProfileData(data as UserProfile);\r\n      }\r\n    } catch (error) {\r\n      console.error('Unexpected error:', error);\r\n      setError('An unexpected error occurred');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateProfile = async (updates: Partial<UserProfile>) => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('user_profiles')\r\n        .update(updates)\r\n        .eq('id', user.id);\r\n\r\n      if (error) {\r\n        toast.error('Failed to update profile');\r\n        console.error('Error updating profile:', error);\r\n        return;\r\n      }\r\n\r\n      // Update local state\r\n      setProfileData(prev => prev ? { ...prev, ...updates } : null);\r\n      toast.success('Profile updated successfully');\r\n    } catch (error) {\r\n      console.error('Unexpected error:', error);\r\n      toast.error('An unexpected error occurred');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, [user?.id]);\r\n\r\n  return { profileData, isLoading, error, updateProfile, fetchProfile };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useVideoControls.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1066,1069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1066,1069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\ninterface VideoControlsOptions {\r\n  enablePip?: boolean;\r\n  enableLandscape?: boolean;\r\n  autoEnterLandscape?: boolean;\r\n}\r\n\r\n// Define a more specific type for screen orientation\r\ninterface ScreenOrientationExtended extends ScreenOrientation {\r\n  lock: (orientation: string) => Promise<void>;\r\n  unlock: () => void;\r\n}\r\n\r\nexport const useVideoControls = (options: VideoControlsOptions = {}) => {\r\n  const {\r\n    enablePip = true,\r\n    enableLandscape = true,\r\n    autoEnterLandscape = false\r\n  } = options;\r\n  \r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [isLandscape, setIsLandscape] = useState(false);\r\n  const [isPipActive, setIsPipActive] = useState(false);\r\n  const videoRef = useRef<HTMLVideoElement | null>(null);\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  \r\n  // Check if device supports fullscreen\r\n  const fullscreenSupported = typeof document !== 'undefined' && \r\n    (document.documentElement.requestFullscreen || \r\n    (document.documentElement as any).webkitRequestFullscreen);\r\n  \r\n  // Check if device supports PiP\r\n  const pipSupported = typeof document !== 'undefined' && \r\n    document.pictureInPictureEnabled &&\r\n    enablePip;\r\n  \r\n  // Check if device can rotate to landscape\r\n  const landscapeSupported = typeof window !== 'undefined' && \r\n    typeof window.screen !== 'undefined' && \r\n    typeof window.screen.orientation !== 'undefined' &&\r\n    'lock' in window.screen.orientation &&\r\n    enableLandscape;\r\n  \r\n  // Toggle fullscreen\r\n  const toggleFullscreen = async () => {\r\n    if (!containerRef.current) return;\r\n    \r\n    try {\r\n      if (!document.fullscreenElement) {\r\n        await containerRef.current.requestFullscreen();\r\n        setIsFullscreen(true);\r\n      } else {\r\n        await document.exitFullscreen();\r\n        setIsFullscreen(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling fullscreen:', error);\r\n    }\r\n  };\r\n  \r\n  // Toggle Picture-in-Picture mode\r\n  const togglePictureInPicture = async () => {\r\n    if (!videoRef.current || !pipSupported) return;\r\n    \r\n    try {\r\n      if (document.pictureInPictureElement) {\r\n        await document.exitPictureInPicture();\r\n        setIsPipActive(false);\r\n      } else {\r\n        await videoRef.current.requestPictureInPicture();\r\n        setIsPipActive(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling picture-in-picture:', error);\r\n    }\r\n  };\r\n  \r\n  // Toggle landscape mode\r\n  const toggleLandscape = async () => {\r\n    if (!landscapeSupported) return;\r\n    \r\n    try {\r\n      if (window.screen.orientation.type.includes('landscape')) {\r\n        await (window.screen.orientation as ScreenOrientationExtended).lock('portrait');\r\n        setIsLandscape(false);\r\n      } else {\r\n        await (window.screen.orientation as ScreenOrientationExtended).lock('landscape-primary');\r\n        setIsLandscape(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling landscape mode:', error);\r\n    }\r\n  };\r\n  \r\n  // Effect to handle autoEnterLandscape\r\n  useEffect(() => {\r\n    if (autoEnterLandscape && landscapeSupported) {\r\n      (window.screen.orientation as ScreenOrientationExtended).lock('landscape-primary')\r\n        .then(() => setIsLandscape(true))\r\n        .catch(err => console.error('Failed to enter landscape mode:', err));\r\n    }\r\n    \r\n    return () => {\r\n      // Reset orientation when component unmounts\r\n      if (landscapeSupported && isLandscape) {\r\n        (window.screen.orientation as ScreenOrientationExtended).unlock();\r\n      }\r\n      \r\n      // Exit PiP when component unmounts\r\n      if (document.pictureInPictureElement) {\r\n        document.exitPictureInPicture().catch(err => {\r\n          console.error('Failed to exit picture-in-picture mode:', err);\r\n        });\r\n      }\r\n    };\r\n  }, [autoEnterLandscape, landscapeSupported, isLandscape]);\r\n  \r\n  // Listen for fullscreen changes\r\n  useEffect(() => {\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement);\r\n    };\r\n    \r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n    \r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, []);\r\n  \r\n  // Listen for PiP changes\r\n  useEffect(() => {\r\n    const handlePipChange = () => {\r\n      setIsPipActive(!!document.pictureInPictureElement);\r\n    };\r\n    \r\n    if (pipSupported) {\r\n      document.addEventListener('enterpictureinpicture', handlePipChange);\r\n      document.addEventListener('leavepictureinpicture', handlePipChange);\r\n    }\r\n    \r\n    return () => {\r\n      if (pipSupported) {\r\n        document.removeEventListener('enterpictureinpicture', handlePipChange);\r\n        document.removeEventListener('leavepictureinpicture', handlePipChange);\r\n      }\r\n    };\r\n  }, [pipSupported]);\r\n  \r\n  return {\r\n    videoRef,\r\n    containerRef,\r\n    isFullscreen,\r\n    isLandscape,\r\n    isPipActive,\r\n    toggleFullscreen,\r\n    togglePictureInPicture,\r\n    toggleLandscape,\r\n    fullscreenSupported,\r\n    pipSupported,\r\n    landscapeSupported\r\n  };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\hooks\\useWatchTracking.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'checkAndDeductCredit'. Either include it or remove the dependency array.","line":143,"column":6,"nodeType":"ArrayExpression","endLine":143,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [checkAndDeductCredit, currentSession, isTracking]","fix":{"range":[4477,4505],"text":"[checkAndDeductCredit, currentSession, isTracking]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useRef, useCallback } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useCreditSystem } from './useCreditSystem';\r\n\r\nexport interface WatchEvent {\r\n  action: 'play' | 'pause' | 'seek' | 'ended';\r\n  time: number;\r\n  timestamp: string;\r\n}\r\n\r\nexport interface WatchSession {\r\n  id?: string;\r\n  user_id: string;\r\n  content_id: string;\r\n  content_title?: string;\r\n  content_duration?: number;\r\n  session_start: string;\r\n  session_end?: string;\r\n  total_watched_time: number;\r\n  watch_events: WatchEvent[];\r\n  credit_deducted: boolean;\r\n}\r\n\r\nexport const useWatchTracking = () => {\r\n  const { user } = useAuth();\r\n  const { deductStreamingCredit } = useCreditSystem();\r\n  const [currentSession, setCurrentSession] = useState<WatchSession | null>(null);\r\n  const [isTracking, setIsTracking] = useState(false);\r\n  const watchTimeRef = useRef(0);\r\n  const lastPlayTimeRef = useRef(0);\r\n  const sessionIntervalRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Start tracking a new watch session\r\n  const startWatchSession = useCallback(async (\r\n    contentId: string,\r\n    contentTitle?: string,\r\n    estimatedDuration?: number\r\n  ) => {\r\n    if (!user) return null;\r\n\r\n    try {\r\n      // Get content duration from AI if not provided\r\n      let contentDuration = estimatedDuration;\r\n      if (!contentDuration && contentTitle) {\r\n        contentDuration = await getContentDurationFromAI(contentTitle);\r\n      }\r\n\r\n      const session: WatchSession = {\r\n        user_id: user.id,\r\n        content_id: contentId,\r\n        content_title: contentTitle,\r\n        content_duration: contentDuration,\r\n        session_start: new Date().toISOString(),\r\n        total_watched_time: 0,\r\n        watch_events: [],\r\n        credit_deducted: false\r\n      };\r\n\r\n      // Save session to database - convert watch_events to JSONB format\r\n      const { data, error } = await supabase\r\n        .from('watch_sessions')\r\n        .insert({\r\n          ...session,\r\n          watch_events: JSON.stringify(session.watch_events)\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      // Transform back to our interface with proper type handling\r\n      const sessionData: WatchSession = {\r\n        ...data,\r\n        watch_events: Array.isArray(data.watch_events) \r\n          ? (data.watch_events as unknown as WatchEvent[])\r\n          : JSON.parse(data.watch_events as string || '[]') as WatchEvent[]\r\n      };\r\n\r\n      setCurrentSession(sessionData);\r\n      setIsTracking(true);\r\n      watchTimeRef.current = 0;\r\n      lastPlayTimeRef.current = Date.now();\r\n\r\n      return sessionData;\r\n    } catch (error) {\r\n      console.error('Error starting watch session:', error);\r\n      return null;\r\n    }\r\n  }, [user]);\r\n\r\n  // Add watch event\r\n  const addWatchEvent = useCallback(async (action: WatchEvent['action'], currentTime: number) => {\r\n    if (!currentSession || !isTracking) return;\r\n\r\n    const now = Date.now();\r\n    const event: WatchEvent = {\r\n      action,\r\n      time: currentTime,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    // Calculate watched time for play/pause cycles\r\n    if (action === 'pause' && lastPlayTimeRef.current > 0) {\r\n      const watchedDuration = (now - lastPlayTimeRef.current) / 1000;\r\n      watchTimeRef.current += watchedDuration;\r\n    } else if (action === 'play') {\r\n      lastPlayTimeRef.current = now;\r\n    } else if (action === 'ended') {\r\n      if (lastPlayTimeRef.current > 0) {\r\n        const watchedDuration = (now - lastPlayTimeRef.current) / 1000;\r\n        watchTimeRef.current += watchedDuration;\r\n      }\r\n    }\r\n\r\n    const updatedEvents = [...currentSession.watch_events, event];\r\n    const updatedSession = {\r\n      ...currentSession,\r\n      watch_events: updatedEvents,\r\n      total_watched_time: Math.round(watchTimeRef.current)\r\n    };\r\n\r\n    setCurrentSession(updatedSession);\r\n\r\n    // Update database\r\n    try {\r\n      await supabase\r\n        .from('watch_sessions')\r\n        .update({\r\n          watch_events: JSON.stringify(updatedEvents),\r\n          total_watched_time: Math.round(watchTimeRef.current)\r\n        })\r\n        .eq('id', currentSession.id);\r\n    } catch (error) {\r\n      console.error('Error updating watch session:', error);\r\n    }\r\n\r\n    // Check if we should deduct credit on ended\r\n    if (action === 'ended') {\r\n      await checkAndDeductCredit(updatedSession);\r\n    }\r\n  }, [currentSession, isTracking]);\r\n\r\n  // Check if session qualifies for credit deduction using AI\r\n  const checkAndDeductCredit = useCallback(async (session: WatchSession) => {\r\n    if (session.credit_deducted) return;\r\n\r\n    try {\r\n      // Analyze session with AI\r\n      const shouldDeduct = await analyzeWatchSessionWithAI(session);\r\n      \r\n      if (shouldDeduct) {\r\n        const success = await deductStreamingCredit();\r\n        if (success) {\r\n          // Update session as credit deducted\r\n          await supabase\r\n            .from('watch_sessions')\r\n            .update({ credit_deducted: true })\r\n            .eq('id', session.id);\r\n          \r\n          setCurrentSession(prev => prev ? { ...prev, credit_deducted: true } : null);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error analyzing watch session:', error);\r\n    }\r\n  }, [deductStreamingCredit]);\r\n\r\n  // End watch session\r\n  const endWatchSession = useCallback(async () => {\r\n    if (!currentSession) return;\r\n\r\n    try {\r\n      const endTime = new Date().toISOString();\r\n      const finalWatchTime = Math.round(watchTimeRef.current);\r\n\r\n      await supabase\r\n        .from('watch_sessions')\r\n        .update({\r\n          session_end: endTime,\r\n          total_watched_time: finalWatchTime\r\n        })\r\n        .eq('id', currentSession.id);\r\n\r\n      // Check for credit deduction one final time\r\n      await checkAndDeductCredit({\r\n        ...currentSession,\r\n        session_end: endTime,\r\n        total_watched_time: finalWatchTime\r\n      });\r\n\r\n      setCurrentSession(null);\r\n      setIsTracking(false);\r\n      watchTimeRef.current = 0;\r\n      lastPlayTimeRef.current = 0;\r\n\r\n      if (sessionIntervalRef.current) {\r\n        clearInterval(sessionIntervalRef.current);\r\n        sessionIntervalRef.current = null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error ending watch session:', error);\r\n    }\r\n  }, [currentSession, checkAndDeductCredit]);\r\n\r\n  return {\r\n    currentSession,\r\n    isTracking,\r\n    startWatchSession,\r\n    addWatchEvent,\r\n    endWatchSession\r\n  };\r\n};\r\n\r\n// Get content duration from AI\r\nconst getContentDurationFromAI = async (title: string): Promise<number | undefined> => {\r\n  try {\r\n    const response = await supabase.functions.invoke('get-content-duration', {\r\n      body: { title }\r\n    });\r\n\r\n    if (response.error) return undefined;\r\n    \r\n    return response.data?.duration;\r\n  } catch (error) {\r\n    console.error('Error getting content duration from AI:', error);\r\n    return undefined;\r\n  }\r\n};\r\n\r\n// Analyze watch session with AI\r\nconst analyzeWatchSessionWithAI = async (session: WatchSession): Promise<boolean> => {\r\n  try {\r\n    // Basic rule-based check first\r\n    const watchedMinutes = session.total_watched_time / 60;\r\n    const watchedPercentage = session.content_duration \r\n      ? (session.total_watched_time / session.content_duration) * 100 \r\n      : 0;\r\n\r\n    // If watched at least 20 minutes OR 50% of content, deduct credit\r\n    if (watchedMinutes >= 20 || watchedPercentage >= 50) {\r\n      return true;\r\n    }\r\n\r\n    // Use AI for more complex analysis\r\n    const response = await supabase.functions.invoke('analyze-watch-session', {\r\n      body: {\r\n        movie: {\r\n          title: session.content_title,\r\n          duration: session.content_duration\r\n        },\r\n        session: {\r\n          events: session.watch_events,\r\n          total_watched_time: session.total_watched_time\r\n        }\r\n      }\r\n    });\r\n\r\n    if (response.error) return false;\r\n    \r\n    return response.data?.shouldDeduct === 'YES';\r\n  } catch (error) {\r\n    console.error('Error analyzing watch session with AI:', error);\r\n    // Fallback to basic rules\r\n    const watchedMinutes = session.total_watched_time / 60;\r\n    const watchedPercentage = session.content_duration \r\n      ? (session.total_watched_time / session.content_duration) * 100 \r\n      : 0;\r\n    \r\n    return watchedMinutes >= 20 || watchedPercentage >= 50;\r\n  }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\integrations\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\integrations\\supabase\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Account.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\AppSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Category.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Contact.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\ContentDetail.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadEpisodesForSeason' and 'seasons'. Either include them or remove the dependency array.","line":106,"column":6,"nodeType":"ArrayExpression","endLine":106,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [loadEpisodesForSeason, seasons, seasons.length]","fix":{"range":[3289,3305],"text":"[loadEpisodesForSeason, seasons, seasons.length]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'setIsPlaying' and 'setShowTrailer'. Either include them or remove the dependency array.","line":118,"column":6,"nodeType":"ArrayExpression","endLine":118,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [setIsPlaying, setShowTrailer]","fix":{"range":[3537,3539],"text":"[setIsPlaying, setShowTrailer]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport Footer from \"@/components/Footer\";\r\nimport ContentRow from \"@/components/ContentRow\";\r\nimport VideoPlayerWrapper from \"@/components/VideoPlayerWrapper\";\r\nimport TrailerModal from \"@/components/TrailerModal\";\r\nimport EpisodeSelector from \"@/components/EpisodeSelector\";\r\nimport PremiumCodeModal from \"@/components/PremiumCodeModal\";\r\nimport MovieDetail from \"@/components/MovieDetail\";\r\nimport CreditUsageBar from \"@/components/CreditUsageBar\";\r\nimport UpgradeModal from \"@/components/UpgradeModal\";\r\nimport DownloadButton from \"@/components/DownloadButton\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ArrowLeft, List, Grid3X3 } from \"lucide-react\";\r\nimport useContentDetail from \"@/hooks/useContentDetail\";\r\nimport { useCreditSystem } from \"@/hooks/useCreditSystem\";\r\nimport LoadingState from \"@/components/LoadingState\";\r\nimport PlaySplashScreen from \"@/components/PlaySplashScreen\";\r\nimport NeonEdgeEffect from \"@/components/NeonEdgeEffect\";\r\nimport VideoAssistant from \"@/components/VideoAssistant\";\r\nimport StreamingProviderSelector from \"@/components/StreamingProviderSelector\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst ContentDetail = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const cleanupRef = useRef(false);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\r\n  const [upgradeReason, setUpgradeReason] = useState<'streaming' | 'download'>('streaming');\r\n  \r\n  const {\r\n    content,\r\n    isLoading,\r\n    liked,\r\n    toggleFavorite,\r\n    relatedContent,\r\n    isPlaying,\r\n    setIsPlaying,\r\n    showTrailer,\r\n    setShowTrailer,\r\n    showPremiumModal,\r\n    setShowPremiumModal,\r\n    activeProvider,\r\n    setActiveProvider,\r\n    seasons,\r\n    currentSeason,\r\n    currentEpisode,\r\n    trailerUrl,\r\n    isPremiumContent,\r\n    canAccessPremium,\r\n    availableProviders,\r\n    startWatching: originalStartWatching,\r\n    handleEpisodeSelect,\r\n    loadEpisodesForSeason,\r\n    showSplashScreen,\r\n    showNeonEffect,\r\n    user\r\n  } = useContentDetail(id);\r\n\r\n  // Credit system integration\r\n  const { userProfile, canStream, canDownload } = useCreditSystem();\r\n\r\n  // Enhanced start watching with credit check\r\n  const startWatching = () => {\r\n    if (userProfile && !canStream()) {\r\n      setUpgradeReason('streaming');\r\n      setShowUpgradeModal(true);\r\n      return;\r\n    }\r\n    \r\n    if (isPremiumContent && !canAccessPremium) {\r\n      setShowPremiumModal(true);\r\n      return;\r\n    }\r\n    \r\n    originalStartWatching();\r\n  };\r\n\r\n  // Handle trailer watching\r\n  const handleShowTrailer = () => {\r\n    setShowTrailer(true);\r\n  };\r\n\r\n  // Handle back navigation\r\n  const handleGoBack = () => {\r\n    if (isPlaying) {\r\n      setIsPlaying(false);\r\n      return;\r\n    }\r\n    \r\n    if (window.history.length > 1) {\r\n      navigate(-1);\r\n    } else {\r\n      navigate('/');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (seasons.length > 0) {\r\n      loadEpisodesForSeason(seasons[0].season_number);\r\n    }\r\n  }, [seasons.length]);\r\n  \r\n  useEffect(() => {\r\n    return () => {\r\n      cleanupRef.current = true;\r\n      if (setIsPlaying) {\r\n        setIsPlaying(false);\r\n      }\r\n      if (setShowTrailer) {\r\n        setShowTrailer(false);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  if (isLoading) {\r\n    return <LoadingState message=\"Loading content details...\" />;\r\n  }\r\n\r\n  if (!content) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex flex-col items-center justify-center p-4\">\r\n        <h1 className=\"text-3xl font-bold mb-4\">Content Not Found</h1>\r\n        <p className=\"text-gray-400 mb-8\">The content you're looking for doesn't exist or has been removed.</p>\r\n        <Button className=\"gap-2\" onClick={handleGoBack}>\r\n          <ArrowLeft size={16} />\r\n          <span>Back</span>\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleSkipPlayback = (seconds: number) => {\r\n    // Skip functionality implementation would go here\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Navbar />\r\n      \r\n      <main>\r\n        <PlaySplashScreen \r\n          isShowing={showSplashScreen} \r\n          contentTitle={content.title} \r\n        />\r\n        \r\n        <NeonEdgeEffect isActive={showNeonEffect && isPlaying} color=\"multi\" />\r\n        \r\n        {isPlaying && !cleanupRef.current ? (\r\n          <div ref={containerRef} className=\"container mx-auto px-4 py-8 relative\">\r\n            <div className=\"max-w-5xl mx-auto\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h1 className=\"text-2xl font-bold\">\r\n                  {content.title}\r\n                  {currentSeason && currentEpisode && \r\n                    ` - S${currentSeason}:E${currentEpisode}`\r\n                  }\r\n                </h1>\r\n                \r\n                <Button \r\n                  variant=\"ghost\" \r\n                  onClick={() => setIsPlaying(false)}\r\n                  className=\"flex items-center gap-2\"\r\n                >\r\n                  <ArrowLeft size={16} />\r\n                  <span>Back</span>\r\n                </Button>\r\n              </div>\r\n              \r\n              <div className=\"mb-4\">\r\n                <StreamingProviderSelector\r\n                  providers={availableProviders}\r\n                  activeProvider={activeProvider}\r\n                  contentType={content.content_type}\r\n                  onProviderChange={setActiveProvider}\r\n                  variant=\"inline\"\r\n                />\r\n              </div>\r\n              \r\n              <VideoPlayerWrapper \r\n                contentId={content.id}\r\n                contentType={content.content_type}\r\n                userId={user?.id}\r\n                episodeId={currentEpisode ? `ep-${currentSeason}-${currentEpisode}` : undefined}\r\n                seasonNumber={currentSeason}\r\n                episodeNumber={currentEpisode}\r\n                autoPlay={true}\r\n                onEnded={() => setIsPlaying(false)}\r\n                poster={content.image_url || content.image}\r\n                title={content.title}\r\n              />\r\n              \r\n              {(content.content_type === 'series' || content.content_type === 'anime') && seasons.length > 0 && (\r\n                <div className=\"mt-8\">\r\n                  <EpisodeSelector\r\n                    seasons={seasons}\r\n                    onEpisodeSelect={handleEpisodeSelect}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <VideoAssistant \r\n              contentTitle={content.title}\r\n              contentType={content.content_type}\r\n              onRequestEpisode={handleEpisodeSelect}\r\n              onRequestSkip={handleSkipPlayback}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <MovieDetail \r\n              content={content}\r\n              liked={liked}\r\n              toggleFavorite={toggleFavorite}\r\n              showTrailer={handleShowTrailer}\r\n              startWatching={startWatching}\r\n            />\r\n            \r\n            <div className=\"py-8\">\r\n              <div className=\"container mx-auto px-4\">\r\n                {/* Credit Usage Bar for authenticated users */}\r\n                {user && <CreditUsageBar />}\r\n                \r\n                <Tabs defaultValue=\"overview\" className=\"w-full\">\r\n                  <TabsList className=\"mb-6 border-b border-gray-800 w-full justify-start rounded-none bg-transparent\">\r\n                    <TabsTrigger value=\"overview\" className=\"data-[state=active]:border-b-2 data-[state=active]:border-cinemax-500 rounded-none\">\r\n                      Overview\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"trailers\" className=\"data-[state=active]:border-b-2 data-[state=active]:border-cinemax-500 rounded-none\">\r\n                      Trailers\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"similar\" className=\"data-[state=active]:border-b-2 data-[state=active]:border-cinemax-500 rounded-none\">\r\n                      More Like This\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"details\" className=\"data-[state=active]:border-b-2 data-[state=active]:border-cinemax-500 rounded-none\">\r\n                      Details\r\n                    </TabsTrigger>\r\n                  </TabsList>\r\n                  \r\n                  <TabsContent value=\"overview\">\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                      <div className=\"lg:col-span-2\">\r\n                        <h2 className=\"text-xl font-bold mb-4\">Synopsis</h2>\r\n                        <p className=\"text-gray-300 mb-8\">\r\n                          {content.description}\r\n                        </p>\r\n                        \r\n                        <div \r\n                          className=\"aspect-video bg-gray-900 rounded-lg overflow-hidden mb-6 cursor-pointer\"\r\n                          onClick={startWatching}\r\n                        >\r\n                          <div \r\n                            className=\"w-full h-full flex items-center justify-center bg-cover bg-center\"\r\n                            style={{ backgroundImage: `url(${content.image_url || content.image || ''})` }}\r\n                          >\r\n                            <div className=\"absolute inset-0 bg-black/40\"></div>\r\n                            <Button className=\"relative z-10 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full w-16 h-16 flex items-center justify-center\">\r\n                              <div className=\"ml-1 w-0 h-0 border-t-[12px] border-t-transparent border-l-[20px] border-l-white border-b-[12px] border-b-transparent\"></div>\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {(content.content_type === 'series' || content.content_type === 'anime') && seasons.length > 0 && (\r\n                          <div className=\"mt-8\">\r\n                            <EpisodeSelector\r\n                              seasons={seasons}\r\n                              onEpisodeSelect={handleEpisodeSelect}\r\n                            />\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <div className=\"mt-6\">\r\n                          <div className=\"flex items-center justify-between mb-4\">\r\n                            <h3 className=\"text-lg font-bold\">Available Sources</h3>\r\n                            <div className=\"flex gap-2\">\r\n                              <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                                <List className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                                <Grid3X3 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                          \r\n                          <StreamingProviderSelector\r\n                            providers={availableProviders}\r\n                            activeProvider={activeProvider}\r\n                            contentType={content.content_type}\r\n                            onProviderChange={setActiveProvider}\r\n                            variant=\"grid\"\r\n                          />\r\n\r\n                          {/* Smart Download System */}\r\n                          <div className=\"mt-4\">\r\n                            <DownloadButton\r\n                              contentTitle={content.title}\r\n                              contentType={content.content_type}\r\n                              seasonNumber={currentSeason}\r\n                              episodeNumber={currentEpisode}\r\n                              year={content.year}\r\n                              className=\"w-full\"\r\n                            />\r\n                            \r\n                            {userProfile?.role === 'free' && (\r\n                              <p className=\"text-xs text-gray-400 mt-1 text-center\">\r\n                                AI-powered downloads available for Pro and Premium users\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {isPremiumContent && !canAccessPremium && (\r\n                          <div className=\"mt-6 p-4 bg-cinemax-500/10 border border-cinemax-500/30 rounded-lg\">\r\n                            <div className=\"flex items-start gap-3\">\r\n                              <div className=\"text-yellow-500 shrink-0 mt-1\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                                  <path d=\"M6 3h12l4 8-10 13L2 11l4-8z\"></path>\r\n                                </svg>\r\n                              </div>\r\n                              <div>\r\n                                <h3 className=\"text-lg font-bold text-yellow-500 mb-2\">Premium Content</h3>\r\n                                <p className=\"text-gray-300 text-sm mb-3\">\r\n                                  This is premium content. Subscribe or enter premium code to watch.\r\n                                </p>\r\n                                <Button \r\n                                  className=\"bg-yellow-600 hover:bg-yellow-700 text-white w-full\"\r\n                                  onClick={() => setShowPremiumModal(true)}\r\n                                >\r\n                                  Enter Premium Code\r\n                                </Button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                        \r\n                        <div className=\"mt-6\">\r\n                          <h3 className=\"text-lg font-bold mb-4\">Category</h3>\r\n                          <Button \r\n                            variant=\"outline\"\r\n                            onClick={() => navigate(`/${content.content_categories?.slug || content.content_type || 'category'}`)}\r\n                            className=\"px-3 py-1 bg-gray-800 rounded-md text-sm hover:bg-gray-700 transition-colors\"\r\n                          >\r\n                            {content.content_categories?.name || content.category || content.content_type || 'Uncategorized'}\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </TabsContent>\r\n                  \r\n                  <TabsContent value=\"trailers\">\r\n                    <div className=\"grid grid-cols-1 gap-6\">\r\n                      <div className=\"aspect-video rounded-lg overflow-hidden bg-gray-900\">\r\n                        {trailerUrl ? (\r\n                          <iframe\r\n                            src={trailerUrl}\r\n                            className=\"w-full h-full\"\r\n                            allowFullScreen\r\n                          ></iframe>\r\n                        ) : (\r\n                          <div className=\"flex items-center justify-center h-full text-gray-400\">\r\n                            No trailer available\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <h2 className=\"text-xl font-bold mb-2\">{content.title} - Official Trailer</h2>\r\n                        <p className=\"text-gray-400\">{content.year}</p>\r\n                      </div>\r\n                    </div>\r\n                  </TabsContent>\r\n                  \r\n                  <TabsContent value=\"similar\">\r\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\r\n                      {relatedContent.map(item => (\r\n                        <div \r\n                          key={item.id}\r\n                          className=\"rounded-lg overflow-hidden bg-gray-800/50 hover:bg-gray-800 transition-colors cursor-pointer\"\r\n                          onClick={() => navigate(`/content/${item.id}`)}\r\n                        >\r\n                          <div className=\"aspect-[2/3] relative\">\r\n                            <img \r\n                              src={item.image_url || item.image} \r\n                              alt={item.title}\r\n                              className=\"w-full h-full object-cover\"\r\n                              onError={(e) => {\r\n                                (e.target as HTMLImageElement).src = 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=500&q=80';\r\n                              }}\r\n                            />\r\n                            <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-2\">\r\n                              <div className=\"text-xs text-gray-300\">{item.year}</div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"p-3\">\r\n                            <h3 className=\"font-medium text-sm line-clamp-2\">{item.title}</h3>\r\n                            <div className=\"flex items-center mt-1\">\r\n                              <div className=\"text-xs text-yellow-500\">{item.rating}</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </TabsContent>\r\n                  \r\n                  <TabsContent value=\"details\">\r\n                    <div className=\"space-y-6\">\r\n                      <div>\r\n                        <h2 className=\"text-xl font-bold mb-4\">Content Details</h2>\r\n                        <dl className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                          <div className=\"p-4 bg-gray-800/50 rounded-lg\">\r\n                            <dt className=\"text-sm text-gray-400\">Title</dt>\r\n                            <dd className=\"text-white mt-1\">{content.title}</dd>\r\n                          </div>\r\n                          <div className=\"p-4 bg-gray-800/50 rounded-lg\">\r\n                            <dt className=\"text-sm text-gray-400\">Release Year</dt>\r\n                            <dd className=\"text-white mt-1\">{content.year}</dd>\r\n                          </div>\r\n                          <div className=\"p-4 bg-gray-800/50 rounded-lg\">\r\n                            <dt className=\"text-sm text-gray-400\">Content Type</dt>\r\n                            <dd className=\"text-white mt-1 capitalize\">{content.content_type}</dd>\r\n                          </div>\r\n                          <div className=\"p-4 bg-gray-800/50 rounded-lg\">\r\n                            <dt className=\"text-sm text-gray-400\">Category</dt>\r\n                            <dd className=\"text-white mt-1\">{content.content_categories?.name || 'Uncategorized'}</dd>\r\n                          </div>\r\n                          <div className=\"p-4 bg-gray-800/50 rounded-lg\">\r\n                            <dt className=\"text-sm text-gray-400\">Duration</dt>\r\n                            <dd className=\"text-white mt-1\">{content.duration}</dd>\r\n                          </div>\r\n                          <div className=\"p-4 bg-gray-800/50 rounded-lg\">\r\n                            <dt className=\"text-sm text-gray-400\">Rating</dt>\r\n                            <dd className=\"text-white mt-1\">{content.rating}/10</dd>\r\n                          </div>\r\n                        </dl>\r\n                      </div>\r\n                    </div>\r\n                  </TabsContent>\r\n                </Tabs>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n        \r\n        {!isPlaying && (\r\n          <ContentRow\r\n            title=\"More Like This\"\r\n            category={content.content_type || \"movies\"}\r\n            showViewAll={true}\r\n            items={relatedContent.map((item) => ({\r\n              id: item.id,\r\n              title: item.title,\r\n              image: item.image_url || item.image || \"\",\r\n              poster: item.image_url || item.image,\r\n              description: item.description || \"\",\r\n              year: item.year || \"\",\r\n              rating: item.rating || \"\",\r\n              category: item.content_type || item.type || \"\",\r\n              duration: item.duration || \"\",\r\n              type: item.content_type || item.type,\r\n            }))}\r\n          />\r\n        )}\r\n      </main>\r\n      \r\n      {showTrailer && (\r\n        <TrailerModal\r\n          isOpen={showTrailer}\r\n          onClose={() => setShowTrailer(false)}\r\n          trailerKey={content.trailer_key || 'dQw4w9WgXcQ'}\r\n          title={content.title}\r\n        />\r\n      )}\r\n      \r\n      {showPremiumModal && (\r\n        <PremiumCodeModal \r\n          isOpen={showPremiumModal}\r\n          onClose={() => setShowPremiumModal(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Upgrade Modal */}\r\n      {showUpgradeModal && userProfile && (\r\n        <UpgradeModal\r\n          isOpen={showUpgradeModal}\r\n          onClose={() => setShowUpgradeModal(false)}\r\n          reason={upgradeReason}\r\n          currentRole={userProfile.role}\r\n        />\r\n      )}\r\n      \r\n      <Footer />\r\n      \r\n      {!isPlaying && (\r\n        <VideoAssistant \r\n          contentTitle={content.title}\r\n          contentType={content.content_type}\r\n          onRequestEpisode={handleEpisodeSelect}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContentDetail;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Downloads.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDownloads'. Either include it or remove the dependency array.","line":38,"column":6,"nodeType":"ArrayExpression","endLine":38,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchDownloads, user]","fix":{"range":[1142,1148],"text":"[fetchDownloads, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport ResponsiveLayout from '@/components/layout/ResponsiveLayout';\r\nimport Navbar from '@/components/Navbar';\r\nimport Footer from '@/components/Footer';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Download, ExternalLink, Clock, CheckCircle, XCircle, Loader2 } from 'lucide-react';\r\nimport LoadingState from '@/components/LoadingState';\r\n\r\ninterface DownloadRequest {\r\n  id: string;\r\n  content_title: string;\r\n  content_type: string;\r\n  season_number?: number;\r\n  episode_number?: number;\r\n  year?: string;\r\n  search_query?: string;\r\n  nkiri_url?: string;\r\n  download_url?: string;\r\n  quality?: string;\r\n  file_size?: string;\r\n  status: string;\r\n  error_message?: string;\r\n  created_at: string;\r\n}\r\n\r\nconst Downloads = () => {\r\n  const { user } = useAuth();\r\n  const [downloads, setDownloads] = useState<DownloadRequest[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchDownloads();\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchDownloads = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('download_requests')\r\n        .select('*')\r\n        .eq('user_id', user?.id)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setDownloads(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching downloads:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'pending':\r\n      case 'searching':\r\n        return <Loader2 className=\"h-4 w-4 animate-spin text-yellow-500\" />;\r\n      case 'completed':\r\n      case 'found':\r\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n      case 'failed':\r\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\r\n      default:\r\n        return <Clock className=\"h-4 w-4 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status: string) => {\r\n    switch (status) {\r\n      case 'pending': return 'Pending';\r\n      case 'searching': return 'Searching...';\r\n      case 'found': return 'Found';\r\n      case 'completed': return 'Ready';\r\n      case 'failed': return 'Failed';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <ResponsiveLayout>\r\n        <Navbar />\r\n        <div className=\"container mx-auto px-4 py-16 text-center\">\r\n          <h1 className=\"text-3xl font-bold mb-4\">Sign In Required</h1>\r\n          <p className=\"text-gray-400\">Please sign in to view your downloads.</p>\r\n        </div>\r\n        <Footer />\r\n      </ResponsiveLayout>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <ResponsiveLayout>\r\n        <Navbar />\r\n        <LoadingState message=\"Loading your downloads...\" />\r\n        <Footer />\r\n      </ResponsiveLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ResponsiveLayout>\r\n      <Navbar />\r\n      \r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold mb-2\">Downloads</h1>\r\n          <p className=\"text-gray-400\">Manage your download requests and access ready files</p>\r\n        </div>\r\n\r\n        {downloads.length === 0 ? (\r\n          <div className=\"text-center py-16\">\r\n            <Download className=\"h-16 w-16 mx-auto text-gray-600 mb-4\" />\r\n            <h2 className=\"text-xl font-semibold mb-2\">No Downloads Yet</h2>\r\n            <p className=\"text-gray-400 mb-6\">Start downloading your favorite movies and series!</p>\r\n            <Button onClick={() => window.location.href = '/'}>\r\n              Browse Content\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4\">\r\n            {downloads.map((download) => (\r\n              <div\r\n                key={download.id}\r\n                className=\"bg-gray-800/50 rounded-lg p-6 border border-gray-700\"\r\n              >\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      {getStatusIcon(download.status)}\r\n                      <h3 className=\"font-semibold text-white\">{download.content_title}</h3>\r\n                      <span className=\"text-xs bg-gray-700 px-2 py-1 rounded\">\r\n                        {getStatusText(download.status)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    {download.season_number && download.episode_number && (\r\n                      <p className=\"text-sm text-gray-400 mb-1\">\r\n                        Season {download.season_number}, Episode {download.episode_number}\r\n                      </p>\r\n                    )}\r\n                    \r\n                    {download.quality && (\r\n                      <p className=\"text-sm text-gray-400 mb-1\">\r\n                        Quality: {download.quality}\r\n                      </p>\r\n                    )}\r\n                    \r\n                    {download.file_size && (\r\n                      <p className=\"text-sm text-gray-400 mb-1\">\r\n                        Size: {download.file_size}\r\n                      </p>\r\n                    )}\r\n                    \r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {new Date(download.created_at).toLocaleDateString()} at{' '}\r\n                      {new Date(download.created_at).toLocaleTimeString()}\r\n                    </p>\r\n                    \r\n                    {download.error_message && (\r\n                      <p className=\"text-sm text-red-400 mt-2\">\r\n                        Error: {download.error_message}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    {download.download_url && download.download_url !== download.nkiri_url && (\r\n                      <Button\r\n                        onClick={() => window.open(download.download_url, '_blank')}\r\n                        className=\"bg-green-600 hover:bg-green-700\"\r\n                        size=\"sm\"\r\n                      >\r\n                        <Download className=\"h-4 w-4 mr-2\" />\r\n                        Download\r\n                      </Button>\r\n                    )}\r\n                    \r\n                    {download.nkiri_url && (\r\n                      <Button\r\n                        onClick={() => window.open(download.nkiri_url, '_blank')}\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                      >\r\n                        <ExternalLink className=\"h-4 w-4 mr-2\" />\r\n                        Open Nkiri\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <Footer />\r\n    </ResponsiveLayout>\r\n  );\r\n};\r\n\r\nexport default Downloads;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\EditProfile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\FAQ.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":85,"column":16,"nodeType":"Identifier","messageId":"namedExport","endLine":85,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { \r\n  Accordion,\r\n  AccordionContent,\r\n  AccordionItem,\r\n  AccordionTrigger,\r\n} from \"@/components/ui/accordion\";\r\nimport BackButton from \"@/components/BackButton\";\r\n\r\nconst FAQ = () => {\r\n  const faqs = [\r\n    {\r\n      question: \"How do I create an account?\",\r\n      answer: \"Click the 'Sign In' button in the top right corner, then select 'Sign Up' to create a new account with your email and password.\"\r\n    },\r\n    {\r\n      question: \"Is CinemaxStream free to use?\",\r\n      answer: \"CinemaxStream offers both free and premium content. Basic features are free, while premium content requires a subscription.\"\r\n    },\r\n    {\r\n      question: \"Can I download content for offline viewing?\",\r\n      answer: \"Yes, premium subscribers can download select movies and TV shows for offline viewing on their devices.\"\r\n    },\r\n    {\r\n      question: \"What devices are supported?\",\r\n      answer: \"CinemaxStream works on all modern web browsers, smartphones, tablets, smart TVs, and streaming devices.\"\r\n    },\r\n    {\r\n      question: \"How do I cancel my subscription?\",\r\n      answer: \"You can cancel your subscription anytime by going to your Account settings and selecting 'Cancel Subscription'.\"\r\n    },\r\n    {\r\n      question: \"Why is content not loading?\",\r\n      answer: \"Check your internet connection, clear your browser cache, or try refreshing the page. If issues persist, contact our support team.\"\r\n    },\r\n    {\r\n      question: \"Can I share my account with family?\",\r\n      answer: \"Premium accounts support multiple user profiles for family sharing. Check our Terms of Service for details.\"\r\n    },\r\n    {\r\n      question: \"How often is new content added?\",\r\n      answer: \"We add new movies, TV shows, and anime regularly. Check our 'New Releases' section for the latest additions.\"\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background pt-20 pb-12\">\r\n      <div className=\"container mx-auto px-4\">\r\n        <BackButton className=\"mb-6\" />\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <h1 className=\"text-4xl font-bold mb-2\">Frequently Asked Questions</h1>\r\n          <p className=\"text-gray-400 mb-8\">Find answers to common questions about CinemaxStream</p>\r\n          \r\n          <Accordion type=\"single\" collapsible className=\"space-y-4\">\r\n            {faqs.map((faq, index) => (\r\n              <AccordionItem key={index} value={`item-${index}`} className=\"bg-secondary/20 rounded-lg px-6\">\r\n                <AccordionTrigger className=\"text-left hover:text-cinemax-500\">\r\n                  {faq.question}\r\n                </AccordionTrigger>\r\n                <AccordionContent className=\"text-gray-300\">\r\n                  {faq.answer}\r\n                </AccordionContent>\r\n              </AccordionItem>\r\n            ))}\r\n          </Accordion>\r\n          \r\n          <div className=\"mt-12 p-6 bg-secondary/20 rounded-lg\">\r\n            <h3 className=\"text-xl font-semibold mb-2\">Still have questions?</h3>\r\n            <p className=\"text-gray-400 mb-4\">\r\n              Can't find what you're looking for? Our support team is here to help.\r\n            </p>\r\n            <a \r\n              href=\"/contact\" \r\n              className=\"inline-flex items-center text-cinemax-500 hover:text-cinemax-400 font-medium\"\r\n            >\r\n              Contact Support ΓåÆ\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FAQ;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Favorites.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1508,1511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1508,1511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2661,2664],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2661,2664],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport Footer from \"@/components/Footer\";\r\nimport ResponsiveLayout from \"@/components/layout/ResponsiveLayout\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Heart, Play, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport LoadingState from \"@/components/LoadingState\";\r\n\r\ninterface FavoriteItem {\r\n  id: string;\r\n  content_id: string;\r\n  title?: string;\r\n  image?: string;\r\n  created_at: string;\r\n}\r\n\r\nconst Favorites = () => {\r\n  const { user, isAuthenticated } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [favorites, setFavorites] = useState<FavoriteItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Redirect if not authenticated\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/auth');\r\n    }\r\n  }, [isAuthenticated, navigate]);\r\n\r\n  // Fetch favorites from localStorage\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const fetchFavorites = () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const stored = localStorage.getItem(`favorites_${user.id}`);\r\n        const favoriteItems = stored ? JSON.parse(stored) : [];\r\n        \r\n        // Transform to our interface\r\n        const transformedFavorites: FavoriteItem[] = favoriteItems.map((item: any) => ({\r\n          id: item.id || `fav_${Date.now()}_${Math.random()}`,\r\n          content_id: item.id,\r\n          title: item.title || item.name || `Content ${item.id}`,\r\n          image: item.image_url || item.image || item.poster_path ? \r\n            `https://image.tmdb.org/t/p/w500${item.poster_path}` : 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=500&q=80',\r\n          created_at: item.added_at || new Date().toISOString()\r\n        }));\r\n\r\n        setFavorites(transformedFavorites);\r\n      } catch (error) {\r\n        console.error('Error loading favorites:', error);\r\n        toast.error('Failed to load favorites');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchFavorites();\r\n  }, [user]);\r\n\r\n  // Remove from favorites\r\n  const handleRemoveFavorite = (favoriteId: string, contentId: string) => {\r\n    if (!user) return;\r\n    \r\n    try {\r\n      const stored = localStorage.getItem(`favorites_${user.id}`);\r\n      const currentFavorites = stored ? JSON.parse(stored) : [];\r\n      \r\n      // Remove the item\r\n      const updatedFavorites = currentFavorites.filter((item: any) => item.id !== contentId);\r\n      localStorage.setItem(`favorites_${user.id}`, JSON.stringify(updatedFavorites));\r\n      \r\n      // Update state\r\n      setFavorites(prev => prev.filter(fav => fav.content_id !== contentId));\r\n      toast.success('Removed from favorites');\r\n    } catch (error) {\r\n      console.error('Error removing favorite:', error);\r\n      toast.error('Failed to remove from favorites');\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <LoadingState message=\"Loading your favorites...\" />;\r\n  }\r\n\r\n  return (\r\n    <ResponsiveLayout>\r\n      <Navbar />\r\n      \r\n      <div className=\"container mx-auto px-4 pt-24 pb-12\">\r\n        <div className=\"flex items-center gap-3 mb-8\">\r\n          <Heart className=\"w-8 h-8 text-red-500 fill-current\" />\r\n          <h1 className=\"text-3xl font-bold\">Your Favorites</h1>\r\n          <span className=\"text-sm text-gray-400 bg-gray-800 px-2 py-1 rounded\">\r\n            {favorites.length} items\r\n          </span>\r\n        </div>\r\n        \r\n        {favorites.length === 0 ? (\r\n          <div className=\"text-center py-16\">\r\n            <Heart className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" />\r\n            <h2 className=\"text-xl font-semibold mb-2\">No favorites yet</h2>\r\n            <p className=\"text-gray-400 mb-6\">\r\n              Start adding movies and shows to your favorites to see them here\r\n            </p>\r\n            <Button \r\n              className=\"bg-cinemax-500 hover:bg-cinemax-600\"\r\n              onClick={() => navigate('/home')}\r\n            >\r\n              Browse Content\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4\">\r\n            {favorites.map((favorite) => (\r\n              <div key={favorite.id} className=\"group relative\">\r\n                <div className=\"aspect-[2/3] bg-gray-800 rounded-lg overflow-hidden mb-2\">\r\n                  <div \r\n                    className=\"h-full w-full bg-cover bg-center flex items-center justify-center\"\r\n                    style={{ \r\n                      backgroundImage: favorite.image && favorite.image !== 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=500&q=80' \r\n                        ? `url(${favorite.image})` \r\n                        : undefined \r\n                    }}\r\n                  >\r\n                    {(!favorite.image || favorite.image === 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=500&q=80') && (\r\n                      <span className=\"text-gray-400 text-sm text-center p-2\">\r\n                        {favorite.title}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Hover overlay */}\r\n                  <div className=\"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2\">\r\n                    <Button\r\n                      size=\"sm\"\r\n                      className=\"bg-cinemax-500 hover:bg-cinemax-600\"\r\n                      onClick={() => navigate(`/content/${favorite.content_id}`)}\r\n                    >\r\n                      <Play size={16} />\r\n                    </Button>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"destructive\"\r\n                      onClick={() => handleRemoveFavorite(favorite.id, favorite.content_id)}\r\n                    >\r\n                      <Trash2 size={16} />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n                \r\n                <h3 className=\"text-sm font-medium line-clamp-2 text-center\">\r\n                  {favorite.title}\r\n                </h3>\r\n                <p className=\"text-xs text-gray-400 text-center\">\r\n                  Added {new Date(favorite.created_at).toLocaleDateString()}\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <Footer />\r\n    </ResponsiveLayout>\r\n  );\r\n};\r\n\r\nexport default Favorites;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\HelpCenter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\ManageBilling.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\ModernResetPassword.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1063,1066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1063,1066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from \"react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Mail } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst ModernResetPassword: React.FC = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [isSent, setIsSent] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!email) {\r\n      toast.error(\"Please enter your email.\");\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n        redirectTo: `${window.location.origin}/password-update`,\r\n      });\r\n      if (error) throw error;\r\n      setIsSent(true);\r\n      toast.success(\"Password reset link sent! Please check your email.\");\r\n    } catch (error: any) {\r\n      toast.error(error?.message || \"Could not send reset email.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-zinc-950 via-cinemax-900 to-zinc-800 relative p-4 sm:p-6 md:p-8\">\r\n      {/* Background decorative elements */}\r\n      <div className=\"absolute top-[-80px] left-[-80px] w-[220px] h-[220px] bg-gradient-to-tr from-cinemax-400 via-cinemax-700/60 to-transparent rounded-full blur-3xl opacity-30 z-0\" />\r\n      <div className=\"absolute bottom-[-60px] right-[-60px] w-[180px] h-[180px] bg-cinemax-700/40 rounded-full blur-2xl opacity-25 z-0\" />\r\n      <div className=\"absolute left-1/2 top-1/3 w-[130px] h-[80px] rounded-[2.5rem] bg-white/5 dark:bg-zinc-700/10 opacity-15 blur-2xl z-0\" style={{ transform: \"translate(-70%, 0)\" }} />\r\n      \r\n      <div className=\"relative z-10 w-full max-w-sm mx-auto backdrop-blur-lg bg-white/10 dark:bg-zinc-900/50 rounded-2xl shadow-2xl border border-white/10 dark:border-zinc-700/30\">\r\n        {/* Mobile optimized padding and spacing */}\r\n        <div className=\"p-6 sm:p-8\">\r\n          <div className=\"text-center mb-6 sm:mb-8\">\r\n            <h2 className=\"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 text-white\">Reset Your Password</h2>\r\n            <p className=\"text-sm sm:text-base text-cinemax-200/90 leading-relaxed\">\r\n              Enter your email and we'll send you a reset link.\r\n            </p>\r\n          </div>\r\n\r\n          {isSent ? (\r\n            <div className=\"text-center space-y-4 sm:space-y-6\">\r\n              <div className=\"space-y-3\">\r\n                <div className=\"text-green-400 text-lg sm:text-xl\">\r\n                  Γ£à Reset email sent!\r\n                </div>\r\n                <div className=\"text-sm sm:text-base text-gray-300 leading-relaxed px-2\">\r\n                  Check your inbox and follow the link to create a new password.\r\n                </div>\r\n              </div>\r\n              <Button \r\n                variant=\"outline\" \r\n                className=\"w-full h-11 sm:h-12 text-sm sm:text-base\" \r\n                onClick={() => navigate(\"/auth\")}\r\n              >\r\n                Return to Login\r\n              </Button>\r\n            </div>\r\n          ) : (\r\n            <form className=\"space-y-5 sm:space-y-6\" onSubmit={handleSubmit}>\r\n              <div className=\"space-y-2\">\r\n                <label htmlFor=\"reset-email\" className=\"block text-sm sm:text-base font-medium text-cinemax-400\">\r\n                  Email\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 text-cinemax-400 h-4 w-4 sm:h-5 sm:w-5\" />\r\n                  <Input\r\n                    id=\"reset-email\"\r\n                    type=\"email\"\r\n                    autoComplete=\"username\"\r\n                    placeholder=\"Your email\"\r\n                    value={email}\r\n                    onChange={e => setEmail(e.target.value)}\r\n                    required\r\n                    className=\"h-11 sm:h-12 pl-10 sm:pl-12 pr-4 text-sm sm:text-base bg-white/80 dark:bg-zinc-900/40 border-none text-white placeholder:text-gray-400\"\r\n                    disabled={isLoading}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3 sm:space-y-4\">\r\n                <Button\r\n                  type=\"submit\"\r\n                  className=\"w-full h-11 sm:h-12 bg-cinemax-500 hover:bg-cinemax-600 transition-all shadow-lg text-sm sm:text-base font-medium\"\r\n                  disabled={isLoading}\r\n                >\r\n                  {isLoading ? (\r\n                    <span className=\"animate-spin h-4 w-4 sm:h-5 sm:w-5 border-2 border-current border-t-transparent rounded-full inline-block\" />\r\n                  ) : (\r\n                    \"Send Reset Link\"\r\n                  )}\r\n                </Button>\r\n\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"ghost\"\r\n                  className=\"w-full h-10 sm:h-11 text-cinemax-400 hover:text-cinemax-300 text-sm sm:text-base\"\r\n                  onClick={() => navigate(\"/auth\")}\r\n                >\r\n                  Back to Login\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModernResetPassword;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\NotificationSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\OnboardingAuth.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\OnboardingLanding.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\PasswordUpdate.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1418,1421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1418,1421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\nconst PasswordUpdate: React.FC = () => {\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isReset, setIsReset] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!password || !confirm) {\r\n      toast.error(\"Please enter and confirm your new password.\");\r\n      return;\r\n    }\r\n    if (password.length < 6) {\r\n      toast.error(\"Password must be at least 6 characters.\");\r\n      return;\r\n    }\r\n    if (password !== confirm) {\r\n      toast.error(\"Passwords do not match.\");\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    try {\r\n      // Supabase uses updateUser for this token-based flow, which immediately updates password\r\n      const { error } = await supabase.auth.updateUser({ password });\r\n      if (error) throw error;\r\n      setIsReset(true);\r\n      toast.success(\"Password updated! Please log in with your new password.\");\r\n      setTimeout(() => {\r\n        navigate(\"/auth\");\r\n      }, 1800);\r\n    } catch (err: any) {\r\n      toast.error(err.message || \"Password reset failed\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (isReset) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"bg-card shadow-lg rounded-xl p-8 mx-2 text-center\">\r\n          <p className=\"text-lg font-bold mb-3\">Your password was successfully updated.</p>\r\n          <p className=\"mb-3\">Redirecting you to login...</p>\r\n          <Button onClick={() => navigate(\"/auth\")}>Return to login now</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n      <form className=\"bg-card shadow-lg rounded-xl p-8 mx-2 w-full max-w-md\" onSubmit={handleSubmit}>\r\n        <h1 className=\"text-2xl font-bold mb-4 text-center\">Set New Password</h1>\r\n        <div className=\"mb-4\">\r\n          <label htmlFor=\"password-new\" className=\"block mb-1 text-sm font-medium\">New Password</label>\r\n          <Input\r\n            id=\"password-new\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={e => setPassword(e.target.value)}\r\n            minLength={6}\r\n            autoComplete=\"new-password\"\r\n            disabled={isLoading}\r\n            required\r\n            className=\"bg-white/80 dark:bg-zinc-900/40\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label htmlFor=\"password-confirm\" className=\"block mb-1 text-sm font-medium\">Confirm New Password</label>\r\n          <Input\r\n            id=\"password-confirm\"\r\n            type=\"password\"\r\n            value={confirm}\r\n            onChange={e => setConfirm(e.target.value)}\r\n            minLength={6}\r\n            autoComplete=\"new-password\"\r\n            disabled={isLoading}\r\n            required\r\n            className=\"bg-white/80 dark:bg-zinc-900/40\"\r\n          />\r\n        </div>\r\n        <Button type=\"submit\" className=\"w-full bg-cinemax-500 hover:bg-cinemax-600\" disabled={isLoading}>\r\n          {isLoading ? <span className=\"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full inline-block\" /> : \"Update Password\"}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordUpdate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Privacy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\SecuritySettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\Terms.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\UserProfile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\pages\\WatchHistory.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1694,1697],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1694,1697],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2630,2633],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2630,2633],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5033,5036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5033,5036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport Footer from \"@/components/Footer\";\r\nimport CreditUsageBar from \"@/components/CreditUsageBar\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Play, Trash2, Clock } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\"; \r\nimport LoadingState from \"@/components/LoadingState\";\r\n\r\ntype WatchHistoryItem = {\r\n  id: string;\r\n  contentId: string;\r\n  title?: string;\r\n  image?: string;\r\n  episodeId?: string;\r\n  lastWatched: string;\r\n  watchPosition?: number;\r\n  seasonNumber?: number;\r\n  episodeNumber?: number;\r\n};\r\n\r\nconst WatchHistory = () => {\r\n  const { user, isAuthenticated } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [history, setHistory] = useState<WatchHistoryItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Redirect if not authenticated\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/auth');\r\n    }\r\n  }, [isAuthenticated, navigate]);\r\n\r\n  // Fetch watch history\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const fetchHistory = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const { data: dbHistory, error } = await supabase\r\n          .from('user_watch_history')\r\n          .select('*, content:content_id(*)')\r\n          .eq('user_id', user.id)\r\n          .order('last_watched', { ascending: false })\r\n          .limit(50);\r\n\r\n        if (dbHistory && dbHistory.length > 0) {\r\n          const formattedHistory = dbHistory.map((item: any) => ({\r\n            id: item.id,\r\n            contentId: item.content_id,\r\n            title: item.content?.title || 'Unknown title',\r\n            image: item.content?.image_url || 'https://images.unsplash.com/photo-1489599767810-b49fa91cd65b?w=300&h=450&fit=crop&crop=center',\r\n            episodeId: item.episode_id,\r\n            lastWatched: item.last_watched,\r\n            watchPosition: item.watch_position,\r\n            seasonNumber: item.episode_id ? parseInt(item.episode_id.split('-')[1]) : undefined,\r\n            episodeNumber: item.episode_id ? parseInt(item.episode_id.split('-')[2]) : undefined\r\n          }));\r\n          \r\n          setHistory(formattedHistory);\r\n        } else {\r\n          const localHistory = JSON.parse(localStorage.getItem('watch_history') || '[]');\r\n          \r\n          if (localHistory.length > 0) {\r\n            const formattedLocalHistory = await Promise.all(localHistory.map(async (item: any) => {\r\n              try {\r\n                const { data: content } = await supabase\r\n                  .from('content')\r\n                  .select('*')\r\n                  .eq('id', item.contentId)\r\n                  .single();\r\n                  \r\n                return {\r\n                  id: crypto.randomUUID(),\r\n                  contentId: item.contentId,\r\n                  title: content?.title || 'Unknown title',\r\n                  image: content?.image_url || 'https://images.unsplash.com/photo-1489599767810-b49fa91cd65b?w=300&h=450&fit=crop&crop=center',\r\n                  episodeId: item.episodeId,\r\n                  lastWatched: item.lastWatched,\r\n                  watchPosition: item.currentTime,\r\n                  seasonNumber: item.episodeId ? parseInt(item.episodeId.split('-')[1]) : undefined,\r\n                  episodeNumber: item.episodeId ? parseInt(item.episodeId.split('-')[2]) : undefined\r\n                };\r\n              } catch (err) {\r\n                return {\r\n                  id: crypto.randomUUID(),\r\n                  contentId: item.contentId,\r\n                  lastWatched: item.lastWatched,\r\n                  watchPosition: item.currentTime,\r\n                  episodeId: item.episodeId\r\n                };\r\n              }\r\n            }));\r\n            \r\n            setHistory(formattedLocalHistory);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching watch history:', error);\r\n        toast.error('Failed to load watch history');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchHistory();\r\n  }, [user]);\r\n\r\n  // Handle continue watching\r\n  const handleContinueWatching = (item: WatchHistoryItem) => {\r\n    navigate(`/content/${item.contentId}`, { \r\n      state: { \r\n        autoPlay: true,\r\n        seasonNumber: item.seasonNumber,\r\n        episodeNumber: item.episodeNumber,\r\n        startPosition: item.watchPosition\r\n      }\r\n    });\r\n  };\r\n\r\n  // Handle remove from history\r\n  const handleRemoveFromHistory = async (item: WatchHistoryItem) => {\r\n    try {\r\n      if (user) {\r\n        await supabase\r\n          .from('user_watch_history')\r\n          .delete()\r\n          .eq('id', item.id);\r\n      }\r\n      \r\n      try {\r\n        const localHistory = JSON.parse(localStorage.getItem('watch_history') || '[]');\r\n        const updatedHistory = localHistory.filter((historyItem: any) => \r\n          historyItem.contentId !== item.contentId || historyItem.episodeId !== item.episodeId\r\n        );\r\n        localStorage.setItem('watch_history', JSON.stringify(updatedHistory));\r\n      } catch (e) {\r\n        // Ignore localStorage errors\r\n      }\r\n      \r\n      setHistory(prev => prev.filter(historyItem => historyItem.id !== item.id));\r\n      \r\n      toast.success('Removed from watch history');\r\n    } catch (error) {\r\n      console.error('Error removing from history:', error);\r\n      toast.error('Failed to remove from history');\r\n    }\r\n  };\r\n\r\n  // Format date\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\r\n    \r\n    if (diffInSeconds < 60) {\r\n      return 'Just now';\r\n    } else if (diffInSeconds < 3600) {\r\n      const minutes = Math.floor(diffInSeconds / 60);\r\n      return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`;\r\n    } else if (diffInSeconds < 86400) {\r\n      const hours = Math.floor(diffInSeconds / 3600);\r\n      return `${hours} hour${hours !== 1 ? 's' : ''} ago`;\r\n    } else if (diffInSeconds < 172800) {\r\n      return 'Yesterday';\r\n    } else {\r\n      return date.toLocaleDateString();\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <LoadingState message=\"Loading watch history...\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Navbar />\r\n      \r\n      <div className=\"container mx-auto px-4 pt-24 pb-12\">\r\n        <h1 className=\"text-3xl font-bold mb-8\">Watch History</h1>\r\n        \r\n        {/* Credit Usage Bar */}\r\n        {user && <CreditUsageBar />}\r\n        \r\n        {history.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <Clock className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" />\r\n            <h2 className=\"text-xl font-semibold mb-2\">No watch history yet</h2>\r\n            <p className=\"text-gray-400 mb-6\">Start watching content to build your history</p>\r\n            <Button \r\n              className=\"bg-cinemax-500 hover:bg-cinemax-600\"\r\n              onClick={() => navigate('/')}\r\n            >\r\n              Browse Content\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {history.map((item) => (\r\n              <div key={item.id} className=\"bg-card rounded-lg overflow-hidden flex flex-col md:flex-row\">\r\n                <div className=\"w-full md:w-48 h-32 flex-shrink-0\">\r\n                  <div \r\n                    className=\"h-full w-full bg-cover bg-center\"\r\n                    style={{ \r\n                      backgroundImage: `url(${item.image || 'https://images.unsplash.com/photo-1489599767810-b49fa91cd65b?w=300&h=450&fit=crop&crop=center'})`,\r\n                      backgroundSize: 'cover'\r\n                    }}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"p-4 flex-grow flex flex-col justify-between\">\r\n                  <div>\r\n                    <div className=\"flex justify-between\">\r\n                      <h3 className=\"font-semibold text-lg truncate\">{item.title || 'Unknown title'}</h3>\r\n                      <span className=\"text-xs text-gray-400\">{formatDate(item.lastWatched)}</span>\r\n                    </div>\r\n                    \r\n                    {item.seasonNumber && item.episodeNumber && (\r\n                      <p className=\"text-gray-400 text-sm\">\r\n                        Season {item.seasonNumber} ΓÇó Episode {item.episodeNumber}\r\n                      </p>\r\n                    )}\r\n                    \r\n                    {item.watchPosition && (\r\n                      <div className=\"mt-2\">\r\n                        <div className=\"bg-gray-700 h-1 rounded-full w-full overflow-hidden\">\r\n                          <div \r\n                            className=\"bg-cinemax-500 h-full\"\r\n                            style={{ width: `${Math.min((item.watchPosition / 600) * 100, 100)}%` }}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"flex justify-between items-center mt-4\">\r\n                    <Button \r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"gap-2\"\r\n                      onClick={() => handleContinueWatching(item)}\r\n                    >\r\n                      <Play size={16} />\r\n                      <span>Continue</span>\r\n                    </Button>\r\n                    \r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      onClick={() => handleRemoveFromHistory(item)}\r\n                      className=\"text-gray-400 hover:text-red-500\"\r\n                    >\r\n                      <Trash2 size={16} />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            \r\n            {history.length > 5 && (\r\n              <div className=\"text-center mt-6\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"border-gray-700\"\r\n                  onClick={() => {\r\n                    try {\r\n                      localStorage.removeItem('watch_history');\r\n                      setHistory([]);\r\n                      toast.success('Watch history cleared');\r\n                    } catch (e) {\r\n                      toast.error('Failed to clear history');\r\n                    }\r\n                  }}\r\n                >\r\n                  Clear All History\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WatchHistory;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\services\\tmdbApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\services\\tmdbApiProduction.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[932,935],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[932,935],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2295,2298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2295,2298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2660,2663],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2660,2663],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2746,2749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2746,2749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3319,3322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3319,3322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3826,3829],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3826,3829],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4326,4329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4326,4329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4825,4828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4825,4828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":155,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5464,5467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5464,5467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7709,7712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7709,7712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8186,8189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8186,8189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":257,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9176,9179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9176,9179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":264,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9436,9439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9436,9439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":290,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":290,"endColumn":62,"suggestions":[{"messageId":"addBrackets","fix":{"range":[10195,10396],"text":"{ const trendingMovies = await getTrendingMovies(page);\r\n        const trendingTvShows = await getTrendingTvShows(page);\r\n        return [...trendingMovies.slice(0, 10), ...trendingTvShows.slice(0, 10)]; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":291,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":291,"endColumn":64,"suggestions":[{"messageId":"addBrackets","fix":{"range":[10195,10396],"text":"{ const trendingMovies = await getTrendingMovies(page);\r\n        const trendingTvShows = await getTrendingTvShows(page);\r\n        return [...trendingMovies.slice(0, 10), ...trendingTvShows.slice(0, 10)]; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":300,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":300,"endColumn":98,"suggestions":[{"messageId":"addBrackets","fix":{"range":[10618,11135],"text":"{ const fallbackUrl = `${TMDB_BASE_URL}/trending/all/week?api_key=${API_KEY}&page=${page}`;\r\n        const response = await fetch(fallbackUrl);\r\n        if (!response.ok) {\r\n          return [];\r\n        }\r\n        const data = await response.json();\r\n        return data.results.map((item: any) => {\r\n          const itemType = item.media_type || 'movie';\r\n          const contentType = normalizeContentType(itemType === 'tv' ? 'series' : itemType);\r\n          return formatContentItem(item, contentType);\r\n        }); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":301,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":301,"endColumn":51,"suggestions":[{"messageId":"addBrackets","fix":{"range":[10618,11135],"text":"{ const fallbackUrl = `${TMDB_BASE_URL}/trending/all/week?api_key=${API_KEY}&page=${page}`;\r\n        const response = await fetch(fallbackUrl);\r\n        if (!response.ok) {\r\n          return [];\r\n        }\r\n        const data = await response.json();\r\n        return data.results.map((item: any) => {\r\n          const itemType = item.media_type || 'movie';\r\n          const contentType = normalizeContentType(itemType === 'tv' ? 'series' : itemType);\r\n          return formatContentItem(item, contentType);\r\n        }); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":305,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":305,"endColumn":44,"suggestions":[{"messageId":"addBrackets","fix":{"range":[10618,11135],"text":"{ const fallbackUrl = `${TMDB_BASE_URL}/trending/all/week?api_key=${API_KEY}&page=${page}`;\r\n        const response = await fetch(fallbackUrl);\r\n        if (!response.ok) {\r\n          return [];\r\n        }\r\n        const data = await response.json();\r\n        return data.results.map((item: any) => {\r\n          const itemType = item.media_type || 'movie';\r\n          const contentType = normalizeContentType(itemType === 'tv' ? 'series' : itemType);\r\n          return formatContentItem(item, contentType);\r\n        }); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":306,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10907,10910],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10907,10910],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":329,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11598,11601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11598,11601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":381,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":381,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13222,13225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13222,13225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":384,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":384,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13327,13330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13327,13330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":414,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":414,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14295,14298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14295,14298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production-ready TMDB API Service\r\n * Clean version without console logging\r\n */\r\n\r\nimport { toast } from \"sonner\";\r\nimport { getImageUrl, normalizeContentType } from \"@/utils/urlUtils\";\r\nimport { ContentItem, Season, Episode } from \"@/types/content\";\r\nimport { getTrailerUrlImpl } from \"@/utils/providers/trailerProviders\";\r\n\r\n// Re-export for compatibility with other modules\r\nexport type { ContentItem } from \"@/types/content\";\r\n\r\n// Base URLs for TMDB API\r\nconst TMDB_BASE_URL = \"https://api.themoviedb.org/3\";\r\nconst TMDB_IMAGE_BASE_URL = \"https://image.tmdb.org/t/p/original\";\r\nconst TMDB_POSTER_BASE_URL = \"https://image.tmdb.org/t/p/w500\";\r\n\r\n// API Key for TMDB - Using environment variable with fallback\r\nconst API_KEY = process.env.NODE_ENV === 'production' \r\n  ? \"4626200399b08f9d04b72348e3625f15\" \r\n  : \"4626200399b08f9d04b72348e3625f15\";\r\n\r\n// Function to format content item\r\nconst formatContentItem = (item: any, type: string = 'movie'): ContentItem => {\r\n  const isMovie = type === 'movie';\r\n  const contentType = normalizeContentType(type);\r\n  \r\n  return {\r\n    id: item.id.toString(),\r\n    title: isMovie ? item.title : item.name,\r\n    description: item.overview,\r\n    image: item.poster_path ? `${TMDB_POSTER_BASE_URL}${item.poster_path}` : 'https://images.unsplash.com/photo-1489599749528-16e7b3b7a9d6?w=500&h=750&fit=crop&crop=face',\r\n    poster: item.poster_path ? `${TMDB_POSTER_BASE_URL}${item.poster_path}` : 'https://images.unsplash.com/photo-1489599749528-16e7b3b7a9d6?w=500&h=750&fit=crop&crop=face',\r\n    backdrop: item.backdrop_path ? `${TMDB_IMAGE_BASE_URL}${item.backdrop_path}` : undefined,\r\n    year: (isMovie ? item.release_date : item.first_air_date)?.substring(0, 4) || 'N/A',\r\n    duration: isMovie\r\n      ? (typeof item.runtime === 'number' ? `${item.runtime} min` : 'N/A')\r\n      : (typeof item.number_of_seasons === 'number' ? `Seasons: ${item.number_of_seasons}` : 'N/A'),\r\n    rating: (item.vote_average / 2).toFixed(1),\r\n    category: contentType,\r\n    type: contentType,\r\n    content_type: contentType,\r\n    trailer_key: item.id.toString() // Will be replaced with actual trailer key when needed\r\n  };\r\n};\r\n\r\n// Function to search content with proper pagination\r\nexport const searchContent = async (query: string, page: number = 1): Promise<any> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/search/multi?api_key=${API_KEY}&query=${encodeURIComponent(query)}&page=${page}`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return { results: [] };\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return {\r\n      results: data.results\r\n        .filter((item: any) => item.media_type === 'movie' || item.media_type === 'tv')\r\n        .map((item: any) => formatContentItem(item, item.media_type === 'tv' ? 'series' : item.media_type))\r\n    };\r\n  } catch (error) {\r\n    return { results: [] };\r\n  }\r\n};\r\n\r\n// Function to get trending movies with pagination\r\nconst getTrendingMovies = async (page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/trending/movie/week?api_key=${API_KEY}&page=${page}`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return data.results.map((item: any) => formatContentItem(item, 'movie'));\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get trending TV shows with pagination\r\nconst getTrendingTvShows = async (page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/trending/tv/week?api_key=${API_KEY}&page=${page}`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return data.results.map((item: any) => formatContentItem(item, 'series'));\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get popular movies with pagination\r\nconst getPopularMovies = async (page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/movie/popular?api_key=${API_KEY}&page=${page}`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return data.results.map((item: any) => formatContentItem(item, 'movie'));\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get popular TV shows with pagination\r\nconst getPopularTvShows = async (page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/tv/popular?api_key=${API_KEY}&page=${page}`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return data.results.map((item: any) => formatContentItem(item, 'series'));\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get anime (using animation genre and filtering)\r\nconst getAnime = async (page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    // Using animation genre ID (16) to filter for anime-like content\r\n    const url = `${TMDB_BASE_URL}/discover/tv?api_key=${API_KEY}&with_genres=16&sort_by=popularity.desc&page=${page}&with_original_language=ja`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return data.results.map((item: any) => {\r\n      const formattedItem = formatContentItem(item, 'series');\r\n      formattedItem.category = 'anime';\r\n      formattedItem.type = 'anime';\r\n      formattedItem.content_type = 'anime';\r\n      return formattedItem;\r\n    });\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get content details with proper trailer integration\r\nconst getContentDetails = async (id: string, type: string = 'movie'): Promise<ContentItem | null> => {\r\n  try {\r\n    const normalizedType = normalizeContentType(type);\r\n    \r\n    // For TV shows, we need to adjust the endpoint\r\n    const endpoint = normalizedType === 'series' || normalizedType === 'anime' ? 'tv' : normalizedType;\r\n    const url = `${TMDB_BASE_URL}/${endpoint}/${id}?api_key=${API_KEY}&append_to_response=videos,credits`;\r\n    \r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      // If we can't find it as the specified type, try the alternative\r\n      if (normalizedType === 'movie') {\r\n        return getContentDetails(id, 'series');\r\n      } else if (normalizedType === 'series') {\r\n        return getContentDetails(id, 'movie');\r\n      }\r\n      return null;\r\n    }\r\n    \r\n    const data = await response.json();\r\n    const formattedItem = formatContentItem(data, normalizedType);\r\n    \r\n    // Get actual trailer key using the trailer provider\r\n    try {\r\n      const trailerKey = await getTrailerUrlImpl(id, endpoint);\r\n      formattedItem.trailer_key = trailerKey;\r\n    } catch (trailerError) {\r\n      formattedItem.trailer_key = ''; // No trailer available\r\n    }\r\n    \r\n    return formattedItem;\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst getSimilarContent = async (id: string, type: string = 'movie'): Promise<ContentItem[]> => {\r\n  try {\r\n    const normalizedType = normalizeContentType(type);\r\n    \r\n    // For TV shows, we need to adjust the endpoint\r\n    const endpoint = normalizedType === 'series' || normalizedType === 'anime' ? 'tv' : normalizedType;\r\n    const url = `${TMDB_BASE_URL}/${endpoint}/${id}/similar?api_key=${API_KEY}`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return data.results.map((item: any) => formatContentItem(item, normalizedType));\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst getDocumentaries = async (page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/discover/movie?api_key=${API_KEY}&with_genres=99&sort_by=popularity.desc&page=${page}`;\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    const data = await response.json();\r\n    return data.results.map((item: any) => {\r\n      const content = formatContentItem(item, 'movie');\r\n      content.category = 'documentary';\r\n      content.type = 'documentary';\r\n      content.content_type = 'documentary';\r\n      return content;\r\n    });\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst getSports = async (page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    // Search for sports-related content using keywords\r\n    const movieUrl = `${TMDB_BASE_URL}/search/movie?api_key=${API_KEY}&query=sport&sort_by=popularity.desc&page=${page}`;\r\n    const tvUrl = `${TMDB_BASE_URL}/search/tv?api_key=${API_KEY}&query=sport&sort_by=popularity.desc&page=${page}`;\r\n\r\n    const [moviesRes, tvRes] = await Promise.all([fetch(movieUrl), fetch(tvUrl)]);\r\n    const movieData = moviesRes.ok ? await moviesRes.json() : { results: [] };\r\n    const tvData = tvRes.ok ? await tvRes.json() : { results: [] };\r\n    \r\n    // Combine and mark their types\r\n    const sportsMovies = (movieData.results || []).map((item: any) => {\r\n      const content = formatContentItem(item, 'movie');\r\n      content.category = 'sport';\r\n      content.type = 'sport';\r\n      content.content_type = 'sport';\r\n      return content;\r\n    });\r\n    const sportsTv = (tvData.results || []).map((item: any) => {\r\n      const content = formatContentItem(item, 'series');\r\n      content.category = 'sport';\r\n      content.type = 'sport';\r\n      content.content_type = 'sport';\r\n      return content;\r\n    });\r\n    \r\n    // Combine and limit to a reasonable number (20)\r\n    return [...sportsMovies, ...sportsTv].slice(0, 20);\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst getContentByCategory = async (category: string, page: number = 1): Promise<ContentItem[]> => {\r\n  try {\r\n    switch (category) {\r\n      case 'movies':\r\n      case 'featured':\r\n        return await getPopularMovies(page);\r\n      case 'series':\r\n        return await getPopularTvShows(page);\r\n      case 'anime':\r\n        return await getAnime(page);\r\n      case 'trending':\r\n        const trendingMovies = await getTrendingMovies(page);\r\n        const trendingTvShows = await getTrendingTvShows(page);\r\n        return [...trendingMovies.slice(0, 10), ...trendingTvShows.slice(0, 10)];\r\n      case 'documentary':\r\n      case 'documentaries':\r\n        return await getDocumentaries(page);\r\n      case 'sports':\r\n        return await getSports(page);\r\n      default:\r\n        // Fallback to trending\r\n        const fallbackUrl = `${TMDB_BASE_URL}/trending/all/week?api_key=${API_KEY}&page=${page}`;\r\n        const response = await fetch(fallbackUrl);\r\n        if (!response.ok) {\r\n          return [];\r\n        }\r\n        const data = await response.json();\r\n        return data.results.map((item: any) => {\r\n          const itemType = item.media_type || 'movie';\r\n          const contentType = normalizeContentType(itemType === 'tv' ? 'series' : itemType);\r\n          return formatContentItem(item, contentType);\r\n        });\r\n    }\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get featured content for hero section\r\nconst getFeaturedContent = async (): Promise<ContentItem[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/trending/all/day?api_key=${API_KEY}&page=1`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    return data.results.slice(0, 10).map((item: any) => {\r\n      const itemType = item.media_type === 'tv' ? 'series' : 'movie';\r\n      return formatContentItem(item, itemType);\r\n    });\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to get content based on AI recommendations \r\nconst getContentByTitles = async (titles: string[]): Promise<ContentItem[]> => {\r\n  try {\r\n    const searchPromises = titles.map(async (title) => {\r\n      const url = `${TMDB_BASE_URL}/search/multi?api_key=${API_KEY}&query=${encodeURIComponent(title)}`;\r\n      const response = await fetch(url);\r\n      \r\n      if (!response.ok) {\r\n        return null;\r\n      }\r\n      \r\n      const data = await response.json();\r\n      if (data.results && data.results.length > 0) {\r\n        const item = data.results[0];\r\n        const itemType = item.media_type === 'tv' ? 'series' : 'movie';\r\n        return formatContentItem(item, itemType);\r\n      }\r\n      return null;\r\n    });\r\n    \r\n    const results = await Promise.all(searchPromises);\r\n    return results.filter(item => item !== null) as ContentItem[];\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst getTvShowSeasons = async (id: string): Promise<Season[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/tv/${id}?api_key=${API_KEY}&append_to_response=season/1,season/2,season/3`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data || !data.seasons || !Array.isArray(data.seasons)) {\r\n      return [];\r\n    }\r\n    \r\n    // Filter out specials (season 0)\r\n    const filteredSeasons = data.seasons.filter((season: any) => season.season_number > 0);\r\n    \r\n    // Format seasons\r\n    return filteredSeasons.map((season: any) => ({\r\n      id: `season-${season.season_number}`,\r\n      season_number: season.season_number,\r\n      title: season.name || `Season ${season.season_number}`,\r\n      episode_count: season.episode_count || 0,\r\n      episodes: [], // Will be populated separately if needed\r\n      poster: season.poster_path ? `${TMDB_POSTER_BASE_URL}${season.poster_path}` : null,\r\n      air_date: season.air_date || null\r\n    }));\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst getTvShowEpisodes = async (id: string, seasonNumber: number): Promise<Episode[]> => {\r\n  try {\r\n    const url = `${TMDB_BASE_URL}/tv/${id}/season/${seasonNumber}?api_key=${API_KEY}`;\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      return [];\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data || !data.episodes || !Array.isArray(data.episodes)) {\r\n      return [];\r\n    }\r\n    \r\n    // Format episodes\r\n    return data.episodes.map((episode: any) => ({\r\n      id: `ep-${seasonNumber}-${episode.episode_number}`,\r\n      title: episode.name || `Episode ${episode.episode_number}`,\r\n      episode_number: episode.episode_number,\r\n      season_number: seasonNumber,\r\n      description: episode.overview || '',\r\n      image: episode.still_path ? `${TMDB_POSTER_BASE_URL}${episode.still_path}` : undefined,\r\n      duration: typeof episode.runtime === 'number' ? `${episode.runtime} min` : undefined,\r\n      air_date: episode.air_date || undefined\r\n    }));\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n};\r\n\r\n// Export API functions\r\nexport const tmdbApi = {\r\n  searchContent,\r\n  getTrendingMovies,\r\n  getTrendingTvShows,\r\n  getPopularMovies,\r\n  getPopularTvShows,\r\n  getAnime,\r\n  getContentDetails,\r\n  getSimilarContent,\r\n  getContentByCategory,\r\n  getFeaturedContent,\r\n  getContentByTitles,\r\n  getTvShowSeasons,\r\n  getTvShowEpisodes\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\types\\content.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\types\\production.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\types\\userProfile.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\aiUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1004,1007],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1004,1007],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1514,1517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1514,1517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/**\r\n * AI utility functions with real implementation\r\n */\r\n\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { ContentItem } from '@/types/content';\r\n\r\n/**\r\n * Get AI-powered personalized recommendations\r\n */\r\nexport const getPersonalizedRecommendations = async (userId: string): Promise<ContentItem[]> => {\r\n  try {\r\n    // Call Supabase Edge Function for AI recommendations\r\n    const { data, error } = await supabase.functions.invoke('generate-ai-recommendations', {\r\n      body: { user_id: userId }\r\n    });\r\n\r\n    if (error) {\r\n      console.error('Error getting AI recommendations:', error);\r\n      return [];\r\n    }\r\n\r\n    return data?.recommendations || [];\r\n  } catch (error) {\r\n    console.error('Error fetching personalized recommendations:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Generate movie recommendations based on user preferences\r\n */\r\nexport const generateRecommendations = async (\r\n  userPreferences: string,\r\n  existingWatched: string[] = []\r\n): Promise<any[]> => {\r\n  try {\r\n    // Call AI recommendation system\r\n    const recommendations = await getPersonalizedRecommendations(userPreferences);\r\n    \r\n    // Filter out already watched content\r\n    return recommendations.filter(item => !existingWatched.includes(item.id.toString()));\r\n  } catch (error) {\r\n    console.error('Error generating recommendations:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Analyze user sentiment from watch behavior\r\n */\r\nexport const analyzeUserSentiment = async (watchHistory: any[]): Promise<{\r\n  sentiment: 'positive' | 'negative' | 'neutral';\r\n  confidence: number;\r\n  preferences: string[];\r\n}> => {\r\n  try {\r\n    if (!watchHistory || watchHistory.length === 0) {\r\n      return {\r\n        sentiment: 'neutral',\r\n        confidence: 0,\r\n        preferences: []\r\n      };\r\n    }\r\n\r\n    // Analyze completion rates and patterns\r\n    const completionRates = watchHistory.map(item => \r\n      item.watchedDuration && item.totalDuration \r\n        ? item.watchedDuration / item.totalDuration \r\n        : 0\r\n    );\r\n\r\n    const avgCompletion = completionRates.reduce((a, b) => a + b, 0) / completionRates.length;\r\n    \r\n    // Extract genre preferences\r\n    const genreCounts: Record<string, number> = {};\r\n    watchHistory.forEach(item => {\r\n      if (item.category) {\r\n        genreCounts[item.category] = (genreCounts[item.category] || 0) + 1;\r\n      }\r\n    });\r\n\r\n    const topGenres = Object.entries(genreCounts)\r\n      .sort(([,a], [,b]) => b - a)\r\n      .slice(0, 3)\r\n      .map(([genre]) => genre);\r\n\r\n    // Determine sentiment based on completion rate\r\n    let sentiment: 'positive' | 'negative' | 'neutral' = 'neutral';\r\n    let confidence = 0.5;\r\n\r\n    if (avgCompletion > 0.7) {\r\n      sentiment = 'positive';\r\n      confidence = Math.min(0.9, avgCompletion);\r\n    } else if (avgCompletion < 0.3) {\r\n      sentiment = 'negative';\r\n      confidence = Math.min(0.8, 1 - avgCompletion);\r\n    }\r\n\r\n    return {\r\n      sentiment,\r\n      confidence,\r\n      preferences: topGenres\r\n    };\r\n  } catch (error) {\r\n    console.error('Error analyzing user sentiment:', error);\r\n    return {\r\n      sentiment: 'neutral',\r\n      confidence: 0,\r\n      preferences: []\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * Analyze content sentiment from reviews\r\n */\r\nexport const analyzeContentSentiment = async (contentId: string): Promise<{\r\n  positive: number;\r\n  negative: number;\r\n  neutral: number;\r\n  overall: 'positive' | 'negative' | 'neutral';\r\n}> => {\r\n  try {\r\n    // In a real implementation, this would analyze actual reviews\r\n    // For now, we'll use TMDB rating as a basis\r\n    const response = await fetch(`https://api.themoviedb.org/3/movie/${contentId}?api_key=4626200399b08f9d04b72348e3625f15`);\r\n    \r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      const rating = data.vote_average || 5;\r\n      \r\n      // Convert rating to sentiment scores\r\n      const positive = Math.min(rating / 10, 0.9);\r\n      const negative = Math.max((10 - rating) / 20, 0.1);\r\n      const neutral = 1 - positive - negative;\r\n      \r\n      let overall: 'positive' | 'negative' | 'neutral' = 'neutral';\r\n      if (positive > negative && positive > neutral) {\r\n        overall = 'positive';\r\n      } else if (negative > positive && negative > neutral) {\r\n        overall = 'negative';\r\n      }\r\n      \r\n      return { positive, negative, neutral, overall };\r\n    }\r\n    \r\n    // Fallback\r\n    return {\r\n      positive: 0.6,\r\n      negative: 0.2,\r\n      neutral: 0.2,\r\n      overall: 'positive'\r\n    };\r\n  } catch (error) {\r\n    console.error('Error analyzing content sentiment:', error);\r\n    return {\r\n      positive: 0.5,\r\n      negative: 0.3,\r\n      neutral: 0.2,\r\n      overall: 'positive'\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * Generate content summary\r\n */\r\nexport const generateContentSummary = async (contentDescription: string): Promise<string> => {\r\n  try {\r\n    if (!contentDescription) return \"No description available.\";\r\n    \r\n    // Simple summarization - take first 150 characters or first 2 sentences\r\n    const sentences = contentDescription.split('. ');\r\n    if (sentences.length > 2) {\r\n      return sentences.slice(0, 2).join('. ') + '.';\r\n    }\r\n    \r\n    if (contentDescription.length > 150) {\r\n      return contentDescription.substring(0, 147) + '...';\r\n    }\r\n    \r\n    return contentDescription;\r\n  } catch (error) {\r\n    console.error('Error generating summary:', error);\r\n    return \"Summary generation failed.\";\r\n  }\r\n};\r\n\r\n/**\r\n * Extract entities from content (genres, actors, etc.)\r\n */\r\nexport const extractContentEntities = (content: ContentItem): {\r\n  genres: string[];\r\n  keywords: string[];\r\n  themes: string[];\r\n} => {\r\n  try {\r\n    const genres: string[] = [];\r\n    const keywords: string[] = [];\r\n    const themes: string[] = [];\r\n\r\n    // Extract from category\r\n    if (content.category) {\r\n      genres.push(content.category);\r\n    }\r\n\r\n    // Extract from description using simple keyword matching\r\n    const description = content.description?.toLowerCase() || '';\r\n    \r\n    // Genre keywords\r\n    const genreKeywords = {\r\n      'action': ['action', 'fight', 'battle', 'combat', 'adventure'],\r\n      'comedy': ['comedy', 'funny', 'humor', 'laugh', 'comic'],\r\n      'drama': ['drama', 'emotional', 'family', 'relationship'],\r\n      'horror': ['horror', 'scary', 'fear', 'terror', 'ghost'],\r\n      'romance': ['romance', 'love', 'romantic', 'heart'],\r\n      'sci-fi': ['space', 'future', 'technology', 'alien', 'robot'],\r\n      'thriller': ['thriller', 'suspense', 'mystery', 'crime']\r\n    };\r\n\r\n    // Theme keywords\r\n    const themeKeywords = {\r\n      'family': ['family', 'father', 'mother', 'parent', 'child'],\r\n      'friendship': ['friend', 'friendship', 'buddy', 'companion'],\r\n      'survival': ['survival', 'survive', 'escape', 'rescue'],\r\n      'justice': ['justice', 'law', 'police', 'detective', 'crime'],\r\n      'war': ['war', 'battle', 'military', 'soldier', 'conflict']\r\n    };\r\n\r\n    // Check for genre keywords\r\n    Object.entries(genreKeywords).forEach(([genre, words]) => {\r\n      if (words.some(word => description.includes(word))) {\r\n        if (!genres.includes(genre)) {\r\n          genres.push(genre);\r\n        }\r\n      }\r\n    });\r\n\r\n    // Check for theme keywords\r\n    Object.entries(themeKeywords).forEach(([theme, words]) => {\r\n      if (words.some(word => description.includes(word))) {\r\n        themes.push(theme);\r\n      }\r\n    });\r\n\r\n    // Extract keywords from title and description\r\n    const text = `${content.title} ${description}`.toLowerCase();\r\n    keywords.push(...text.split(/\\s+/).filter(word => \r\n      word.length > 3 && \r\n      !['the', 'and', 'for', 'are', 'but', 'not', 'you', 'all', 'can', 'had', 'her', 'was', 'one', 'our', 'out', 'day', 'get', 'has', 'him', 'his', 'how', 'man', 'new', 'now', 'old', 'see', 'two', 'way', 'who', 'boy', 'did', 'its', 'let', 'put', 'say', 'she', 'too', 'use'].includes(word)\r\n    ).slice(0, 10));\r\n\r\n    return {\r\n      genres: [...new Set(genres)],\r\n      keywords: [...new Set(keywords)],\r\n      themes: [...new Set(themes)]\r\n    };\r\n  } catch (error) {\r\n    console.error('Error extracting content entities:', error);\r\n    return {\r\n      genres: [],\r\n      keywords: [],\r\n      themes: []\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * Legacy named entity extraction for backward compatibility\r\n */\r\nexport const extractEntities = async (contentDescription: string): Promise<{\r\n  people: string[];\r\n  locations: string[];\r\n  organizations: string[];\r\n}> => {\r\n  try {\r\n    // Simple regex-based extraction\r\n    const people: string[] = [];\r\n    const locations: string[] = [];\r\n    const organizations: string[] = [];\r\n    \r\n    // Extract potential names (capitalized words)\r\n    const words = contentDescription.split(/\\s+/);\r\n    const capitalizedWords = words.filter(word => /^[A-Z][a-z]+$/.test(word));\r\n    \r\n    // Simple heuristics for classification\r\n    capitalizedWords.forEach(word => {\r\n      if (word.length > 2 && word.length < 15) {\r\n        // Common location indicators\r\n        if (['New', 'Los', 'San', 'North', 'South', 'East', 'West'].includes(word)) {\r\n          locations.push(word);\r\n        }\r\n        // Common organization endings\r\n        else if (word.endsWith('Corp') || word.endsWith('Inc') || word.endsWith('LLC')) {\r\n          organizations.push(word);\r\n        }\r\n        // Assume remaining are people\r\n        else if (people.length < 5) {\r\n          people.push(word);\r\n        }\r\n      }\r\n    });\r\n    \r\n    return { people, locations, organizations };\r\n  } catch (error) {\r\n    console.error('Error extracting entities:', error);\r\n    return {\r\n      people: [],\r\n      locations: [],\r\n      organizations: []\r\n    };\r\n  }\r\n};\r\n\r\n// Export default object with all functions for backward compatibility\r\nexport default {\r\n  generateRecommendations,\r\n  analyzeContentSentiment,\r\n  generateContentSummary,\r\n  extractEntities,\r\n  getPersonalizedRecommendations,\r\n  analyzeUserSentiment,\r\n  extractContentEntities\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\analytics.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[229,232],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[229,232],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1220,1223],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1220,1223],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2155,2158],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2155,2158],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":190,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4743,4746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4743,4746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":219,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5423,5426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5423,5426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5690,5693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5690,5693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production-ready analytics tracking\r\n */\r\n\r\nimport { getConfig } from './productionConfig';\r\nimport { errorReporter } from './errorReporting';\r\n\r\ninterface AnalyticsEvent {\r\n  name: string;\r\n  properties?: Record<string, any>;\r\n  userId?: string;\r\n  timestamp: number;\r\n}\r\n\r\ninterface PageView {\r\n  page: string;\r\n  title: string;\r\n  userId?: string;\r\n  timestamp: number;\r\n  referrer?: string;\r\n}\r\n\r\nclass Analytics {\r\n  private events: AnalyticsEvent[] = [];\r\n  private pageViews: PageView[] = [];\r\n  private config = getConfig();\r\n\r\n  constructor() {\r\n    this.initializeAnalytics();\r\n  }\r\n\r\n  private initializeAnalytics() {\r\n    if (!this.config.enableAnalytics) {\r\n      return;\r\n    }\r\n\r\n    // Track page views automatically\r\n    this.trackPageView();\r\n    \r\n    // Listen for route changes\r\n    window.addEventListener('popstate', () => {\r\n      this.trackPageView();\r\n    });\r\n\r\n    // Send analytics data periodically\r\n    setInterval(() => {\r\n      this.sendBatchData();\r\n    }, 30000); // Every 30 seconds\r\n\r\n    // Send data before page unload\r\n    window.addEventListener('beforeunload', () => {\r\n      this.sendBatchData();\r\n    });\r\n  }\r\n\r\n  trackEvent(name: string, properties?: Record<string, any>) {\r\n    if (!this.config.enableAnalytics) {\r\n      return;\r\n    }\r\n\r\n    const event: AnalyticsEvent = {\r\n      name,\r\n      properties,\r\n      userId: this.getCurrentUserId(),\r\n      timestamp: Date.now()\r\n    };\r\n\r\n    this.events.push(event);\r\n\r\n    // Also log to console in development\r\n    if (process.env.NODE_ENV === 'development') {\r\n      // Production: Send to analytics service\r\n      // In development: Silent logging\r\n    }\r\n  }\r\n\r\n  trackPageView(page?: string, title?: string) {\r\n    if (!this.config.enableAnalytics) {\r\n      return;\r\n    }\r\n\r\n    const pageView: PageView = {\r\n      page: page || window.location.pathname,\r\n      title: title || document.title,\r\n      userId: this.getCurrentUserId(),\r\n      timestamp: Date.now(),\r\n      referrer: document.referrer || undefined\r\n    };\r\n\r\n    this.pageViews.push(pageView);\r\n  }\r\n\r\n  trackUserAction(action: string, target: string, properties?: Record<string, any>) {\r\n    this.trackEvent('user_action', {\r\n      action,\r\n      target,\r\n      ...properties\r\n    });\r\n  }\r\n\r\n  trackVideoEvent(eventType: 'play' | 'pause' | 'end' | 'seek', videoId: string, currentTime?: number) {\r\n    this.trackEvent('video_interaction', {\r\n      event_type: eventType,\r\n      video_id: videoId,\r\n      current_time: currentTime,\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  trackSearchEvent(query: string, resultsCount: number, selectedResult?: string) {\r\n    this.trackEvent('search', {\r\n      query,\r\n      results_count: resultsCount,\r\n      selected_result: selectedResult\r\n    });\r\n  }\r\n\r\n  trackDownloadEvent(contentId: string, contentType: string, quality: string) {\r\n    this.trackEvent('download', {\r\n      content_id: contentId,\r\n      content_type: contentType,\r\n      quality\r\n    });\r\n  }\r\n\r\n  trackError(error: Error, component?: string) {\r\n    this.trackEvent('error', {\r\n      error_message: error.message,\r\n      error_stack: error.stack,\r\n      component\r\n    });\r\n  }\r\n\r\n  private getCurrentUserId(): string | undefined {\r\n    try {\r\n      const user = localStorage.getItem('supabase.auth.token');\r\n      if (user) {\r\n        const parsed = JSON.parse(user);\r\n        return parsed?.user?.id;\r\n      }\r\n    } catch {\r\n      // Ignore errors\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  private async sendBatchData() {\r\n    if (this.events.length === 0 && this.pageViews.length === 0) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const payload = {\r\n        events: [...this.events],\r\n        pageViews: [...this.pageViews],\r\n        timestamp: Date.now(),\r\n        sessionId: this.getSessionId()\r\n      };\r\n\r\n      // In production, send to analytics service\r\n      if (process.env.NODE_ENV === 'production') {\r\n        await fetch('/api/analytics', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(payload)\r\n        });\r\n      }\r\n\r\n      // Clear sent data\r\n      this.events = [];\r\n      this.pageViews = [];\r\n\r\n    } catch (error) {\r\n      errorReporter.captureException(error as Error, 'Analytics.sendBatchData');\r\n    }\r\n  }\r\n\r\n  private getSessionId(): string {\r\n    let sessionId = sessionStorage.getItem('analytics_session_id');\r\n    if (!sessionId) {\r\n      sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n      sessionStorage.setItem('analytics_session_id', sessionId);\r\n    }\r\n    return sessionId;\r\n  }\r\n\r\n  // Performance tracking\r\n  trackPerformance(metric: string, value: number, details?: Record<string, any>) {\r\n    this.trackEvent('performance', {\r\n      metric,\r\n      value,\r\n      ...details\r\n    });\r\n  }\r\n\r\n  // Feature usage tracking\r\n  trackFeatureUsage(feature: string, action: 'enabled' | 'disabled' | 'used') {\r\n    this.trackEvent('feature_usage', {\r\n      feature,\r\n      action\r\n    });\r\n  }\r\n\r\n  // Conversion tracking\r\n  trackConversion(type: 'signup' | 'premium_upgrade' | 'download' | 'share', value?: number) {\r\n    this.trackEvent('conversion', {\r\n      type,\r\n      value\r\n    });\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nexport const analytics = new Analytics();\r\n\r\n// Convenience functions\r\nexport const trackEvent = (name: string, properties?: Record<string, any>) => {\r\n  analytics.trackEvent(name, properties);\r\n};\r\n\r\nexport const trackPageView = (page?: string, title?: string) => {\r\n  analytics.trackPageView(page, title);\r\n};\r\n\r\nexport const trackUserAction = (action: string, target: string, properties?: Record<string, any>) => {\r\n  analytics.trackUserAction(action, target, properties);\r\n};\r\n\r\nexport default analytics;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\apiClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\authUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\cacheManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[140,143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[140,143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[753,756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[753,756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":256,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5996,5999],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5996,5999],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":283,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6743,6746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6743,6746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":291,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":291,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6963,6966],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6963,6966],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":299,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":299,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7176,7179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7176,7179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production-grade cache management system\r\n */\r\n\r\nimport { CACHE_KEYS } from './productionConfig';\r\n\r\ninterface CacheItem {\r\n  data: any;\r\n  timestamp: number;\r\n  expiry: number;\r\n  version: string;\r\n}\r\n\r\ninterface CacheConfig {\r\n  maxSize: number;\r\n  defaultTTL: number;\r\n  enablePersistence: boolean;\r\n}\r\n\r\nclass CacheManager {\r\n  private cache = new Map<string, CacheItem>();\r\n  private config: CacheConfig;\r\n  private currentVersion = '1.0.0';\r\n\r\n  constructor(config: Partial<CacheConfig> = {}) {\r\n    this.config = {\r\n      maxSize: 100,\r\n      defaultTTL: 5 * 60 * 1000, // 5 minutes\r\n      enablePersistence: true,\r\n      ...config\r\n    };\r\n\r\n    this.loadFromStorage();\r\n    this.startCleanupInterval();\r\n  }\r\n\r\n  set(key: string, data: any, ttl?: number): void {\r\n    const expiry = Date.now() + (ttl || this.config.defaultTTL);\r\n    \r\n    const item: CacheItem = {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiry,\r\n      version: this.currentVersion\r\n    };\r\n\r\n    // Check cache size limit\r\n    if (this.cache.size >= this.config.maxSize) {\r\n      this.evictLRU();\r\n    }\r\n\r\n    this.cache.set(key, item);\r\n    \r\n    if (this.config.enablePersistence) {\r\n      this.saveToStorage(key, item);\r\n    }\r\n  }\r\n\r\n  get<T>(key: string): T | null {\r\n    const item = this.cache.get(key);\r\n    \r\n    if (!item) {\r\n      return null;\r\n    }\r\n\r\n    // Check if expired\r\n    if (Date.now() > item.expiry) {\r\n      this.delete(key);\r\n      return null;\r\n    }\r\n\r\n    // Check version compatibility\r\n    if (item.version !== this.currentVersion) {\r\n      this.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return item.data;\r\n  }\r\n\r\n  delete(key: string): void {\r\n    this.cache.delete(key);\r\n    \r\n    if (this.config.enablePersistence) {\r\n      this.removeFromStorage(key);\r\n    }\r\n  }\r\n\r\n  clear(): void {\r\n    this.cache.clear();\r\n    \r\n    if (this.config.enablePersistence) {\r\n      this.clearStorage();\r\n    }\r\n  }\r\n\r\n  has(key: string): boolean {\r\n    const item = this.cache.get(key);\r\n    \r\n    if (!item) {\r\n      return false;\r\n    }\r\n\r\n    // Check if expired\r\n    if (Date.now() > item.expiry) {\r\n      this.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  // Get cache statistics\r\n  getStats() {\r\n    const now = Date.now();\r\n    let validItems = 0;\r\n    let expiredItems = 0;\r\n    let totalSize = 0;\r\n\r\n    for (const [key, item] of this.cache.entries()) {\r\n      if (now > item.expiry) {\r\n        expiredItems++;\r\n      } else {\r\n        validItems++;\r\n      }\r\n      totalSize += JSON.stringify(item.data).length;\r\n    }\r\n\r\n    return {\r\n      totalItems: this.cache.size,\r\n      validItems,\r\n      expiredItems,\r\n      totalSizeBytes: totalSize,\r\n      maxSize: this.config.maxSize,\r\n      defaultTTL: this.config.defaultTTL\r\n    };\r\n  }\r\n\r\n  // Evict least recently used item\r\n  private evictLRU(): void {\r\n    let oldestKey: string | null = null;\r\n    let oldestTimestamp = Date.now();\r\n\r\n    for (const [key, item] of this.cache.entries()) {\r\n      if (item.timestamp < oldestTimestamp) {\r\n        oldestTimestamp = item.timestamp;\r\n        oldestKey = key;\r\n      }\r\n    }\r\n\r\n    if (oldestKey) {\r\n      this.delete(oldestKey);\r\n    }\r\n  }\r\n\r\n  // Cleanup expired items\r\n  private cleanup(): void {\r\n    const now = Date.now();\r\n    const expiredKeys: string[] = [];\r\n\r\n    for (const [key, item] of this.cache.entries()) {\r\n      if (now > item.expiry) {\r\n        expiredKeys.push(key);\r\n      }\r\n    }\r\n\r\n    expiredKeys.forEach(key => this.delete(key));\r\n  }\r\n\r\n  // Start automatic cleanup\r\n  private startCleanupInterval(): void {\r\n    setInterval(() => {\r\n      this.cleanup();\r\n    }, 60000); // Every minute\r\n  }\r\n\r\n  // Load cache from localStorage\r\n  private loadFromStorage(): void {\r\n    if (!this.config.enablePersistence) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const keys = Object.keys(localStorage).filter(key => key.startsWith('cache_'));\r\n      \r\n      for (const storageKey of keys) {\r\n        const data = localStorage.getItem(storageKey);\r\n        if (data) {\r\n          const item: CacheItem = JSON.parse(data);\r\n          const cacheKey = storageKey.replace('cache_', '');\r\n          \r\n          // Only load if not expired and version matches\r\n          if (Date.now() <= item.expiry && item.version === this.currentVersion) {\r\n            this.cache.set(cacheKey, item);\r\n          } else {\r\n            localStorage.removeItem(storageKey);\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load cache from storage:', error);\r\n    }\r\n  }\r\n\r\n  // Save item to localStorage\r\n  private saveToStorage(key: string, item: CacheItem): void {\r\n    try {\r\n      localStorage.setItem(`cache_${key}`, JSON.stringify(item));\r\n    } catch (error) {\r\n      // Storage quota exceeded or not available\r\n      console.warn('Failed to save cache to storage:', error);\r\n    }\r\n  }\r\n\r\n  // Remove item from localStorage\r\n  private removeFromStorage(key: string): void {\r\n    try {\r\n      localStorage.removeItem(`cache_${key}`);\r\n    } catch (error) {\r\n      console.warn('Failed to remove cache from storage:', error);\r\n    }\r\n  }\r\n\r\n  // Clear all cache from localStorage\r\n  private clearStorage(): void {\r\n    try {\r\n      const keys = Object.keys(localStorage).filter(key => key.startsWith('cache_'));\r\n      keys.forEach(key => localStorage.removeItem(key));\r\n    } catch (error) {\r\n      console.warn('Failed to clear cache from storage:', error);\r\n    }\r\n  }\r\n\r\n  // Cache invalidation by pattern\r\n  invalidatePattern(pattern: RegExp): void {\r\n    const keysToDelete: string[] = [];\r\n    \r\n    for (const key of this.cache.keys()) {\r\n      if (pattern.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    }\r\n    \r\n    keysToDelete.forEach(key => this.delete(key));\r\n  }\r\n\r\n  // Preload cache with data\r\n  preload(entries: Array<{ key: string; data: any; ttl?: number }>): void {\r\n    entries.forEach(({ key, data, ttl }) => {\r\n      this.set(key, data, ttl);\r\n    });\r\n  }\r\n}\r\n\r\n// Create cache instances for different types of data\r\nexport const contentCache = new CacheManager({\r\n  maxSize: 200,\r\n  defaultTTL: 15 * 60 * 1000, // 15 minutes\r\n  enablePersistence: true\r\n});\r\n\r\nexport const userCache = new CacheManager({\r\n  maxSize: 50,\r\n  defaultTTL: 30 * 60 * 1000, // 30 minutes\r\n  enablePersistence: true\r\n});\r\n\r\nexport const searchCache = new CacheManager({\r\n  maxSize: 100,\r\n  defaultTTL: 10 * 60 * 1000, // 10 minutes\r\n  enablePersistence: false // Don't persist search results\r\n});\r\n\r\n// Convenience functions using the appropriate cache\r\nexport const cacheContent = (key: string, data: any, ttl?: number) => {\r\n  contentCache.set(key, data, ttl);\r\n};\r\n\r\nexport const getCachedContent = <T>(key: string): T | null => {\r\n  return contentCache.get<T>(key);\r\n};\r\n\r\nexport const cacheUser = (key: string, data: any, ttl?: number) => {\r\n  userCache.set(key, data, ttl);\r\n};\r\n\r\nexport const getCachedUser = <T>(key: string): T | null => {\r\n  return userCache.get<T>(key);\r\n};\r\n\r\nexport const cacheSearch = (key: string, data: any, ttl?: number) => {\r\n  searchCache.set(key, data, ttl);\r\n};\r\n\r\nexport const getCachedSearch = <T>(key: string): T | null => {\r\n  return searchCache.get<T>(key);\r\n};\r\n\r\nexport default CacheManager;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\contentUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[447,450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[447,450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":120,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3476,3479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3476,3479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Content utility functions\r\n */\r\n\r\n// Production streaming providers - only the three verified providers\r\nexport const streamingProviders = [\r\n  { id: 'vidsrc_su', name: 'VidSrc SU', contentType: 'all' },\r\n  { id: 'vidsrc_xyz', name: 'VidSrc XYZ', contentType: 'all' },\r\n  { id: 'vidsrc_vip', name: 'VidSrc VIP', contentType: 'all' }\r\n];\r\n\r\n// Download providers - empty as per requirement (streaming only)\r\nexport const downloadProviders: any[] = [];\r\n\r\n// Premium content configuration\r\nconst premiumContentConfig = {\r\n  // High-demand recent releases\r\n  premiumIds: ['1124620', '634649', '505642', '843794', '872585'],\r\n  \r\n  // Content released in the last 6 months\r\n  recentReleaseThreshold: 6 * 30 * 24 * 60 * 60 * 1000, // 6 months in milliseconds\r\n  \r\n  // High-rated content (8.0+ on TMDB)\r\n  highRatingThreshold: 8.0\r\n};\r\n\r\n/**\r\n * Check if content is premium based on multiple criteria\r\n */\r\nexport const isPremiumContent = (contentId: string, releaseDate?: string, rating?: number): boolean => {\r\n  // Check if it's in the premium list\r\n  if (premiumContentConfig.premiumIds.includes(contentId)) {\r\n    return true;\r\n  }\r\n  \r\n  // Check if it's a recent high-demand release\r\n  if (releaseDate) {\r\n    const releaseTime = new Date(releaseDate).getTime();\r\n    const now = Date.now();\r\n    \r\n    if (now - releaseTime < premiumContentConfig.recentReleaseThreshold) {\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  // Check if it's high-rated content\r\n  if (rating && rating >= premiumContentConfig.highRatingThreshold) {\r\n    return true;\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n/**\r\n * Get available streaming providers for content\r\n */\r\nexport const getAvailableProviders = (contentId: string, contentType: string = 'movie') => {\r\n  // All providers support all content types in our configuration\r\n  return streamingProviders.filter(provider => \r\n    provider.contentType === 'all' || provider.contentType === contentType\r\n  );\r\n};\r\n\r\n/**\r\n * Get best provider based on content type and availability\r\n */\r\nexport const getBestProviderForContentType = (contentType: string): string => {\r\n  // Prioritize providers based on content type\r\n  switch (contentType) {\r\n    case 'anime':\r\n      return 'vidsrc_xyz'; // Often better for anime\r\n    case 'series':\r\n      return 'vidsrc_su'; // Excellent TV show support\r\n    case 'movie':\r\n    default:\r\n      return 'vidsrc_su'; // Default for movies\r\n  }\r\n};\r\n\r\n/**\r\n * Get appropriate runtime for content type\r\n */\r\nexport const getDefaultRuntime = (contentType: string): string => {\r\n  const runtimes: Record<string, string> = {\r\n    'movie': '120 min',\r\n    'series': '45 min',\r\n    'anime': '24 min',\r\n    'documentary': '90 min',\r\n    'sport': '180 min',\r\n    'short': '15 min'\r\n  };\r\n  \r\n  return runtimes[contentType] || '60 min';\r\n};\r\n\r\n/**\r\n * Get runtime for specific content based on type and category\r\n */\r\nexport const getContentRuntime = (contentType: string, category?: string): string => {\r\n  // First check specific categories\r\n  if (category?.toLowerCase().includes('anime')) {\r\n    return '24 min';\r\n  }\r\n  \r\n  if (category?.toLowerCase().includes('documentary')) {\r\n    return '90 min';\r\n  }\r\n  \r\n  if (category?.toLowerCase().includes('sport')) {\r\n    return '180 min';\r\n  }\r\n  \r\n  // Then check content type\r\n  return getDefaultRuntime(contentType);\r\n};\r\n\r\n/**\r\n * Get personalized recommendations based on user preferences\r\n */\r\nexport const getPersonalizedRecommendations = async (userId: string): Promise<any[]> => {\r\n  try {\r\n    // This would integrate with AI recommendation system\r\n    // For now, return empty array - will be populated by AI utils\r\n    return [];\r\n  } catch (error) {\r\n    console.error('Error getting personalized recommendations:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Get content quality based on provider and content type\r\n */\r\nexport const getContentQuality = (providerId: string, contentType: string): string[] => {\r\n  const qualityMap: Record<string, string[]> = {\r\n    'vidsrc_su': ['1080p', '720p', '480p'],\r\n    'vidsrc_xyz': ['1080p', '720p', '480p'],\r\n    'vidsrc_vip': ['1080p', '720p', '480p']\r\n  };\r\n  \r\n  return qualityMap[providerId] || ['720p', '480p'];\r\n};\r\n\r\n/**\r\n * Check if provider supports download for content type\r\n */\r\nexport const providerSupportsDownload = (providerId: string, contentType: string): boolean => {\r\n  // Currently, no providers support direct download\r\n  // Downloads are handled through the smart download system\r\n  return false;\r\n};\r\n\r\n/**\r\n * Get estimated file size for content\r\n */\r\nexport const getEstimatedFileSize = (contentType: string, quality: string, duration?: string): string => {\r\n  const durationMinutes = duration ? parseInt(duration.replace(/[^\\d]/g, '')) : \r\n    contentType === 'movie' ? 120 : 45;\r\n  \r\n  const sizePerMinute: Record<string, number> = {\r\n    '1080p': 25, // MB per minute\r\n    '720p': 15,\r\n    '480p': 10,\r\n    '360p': 6\r\n  };\r\n  \r\n  const totalMB = (sizePerMinute[quality] || 15) * durationMinutes;\r\n  \r\n  if (totalMB > 1024) {\r\n    return `${(totalMB / 1024).toFixed(1)} GB`;\r\n  }\r\n  \r\n  return `${totalMB} MB`;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\debugUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[120,123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[120,123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[514,517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[514,517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Debug utilities for troubleshooting\r\n */\r\n\r\nexport const debugLog = (component: string, message: string, data?: any) => {\r\n  // Production: Silent logging, only in development\r\n  if (process.env.NODE_ENV === 'development') {\r\n    console.log(`[${component}] ${message}`, data);\r\n  }\r\n};\r\n\r\nexport const debugError = (component: string, error: Error | unknown, context?: string) => {\r\n  console.error(`[${component}] Error${context ? ` in ${context}` : ''}:`, error);\r\n};\r\n\r\nexport const debugAuth = (user: any, isLoading: boolean, isAuthenticated: boolean) => {\r\n  debugLog('Auth', 'State update', { user: user?.id, isLoading, isAuthenticated });\r\n};\r\n\r\nexport const debugHooks = () => {\r\n  debugLog('Hooks', 'All hooks loaded successfully');\r\n  return true;\r\n};\r\n\r\nexport default {\r\n  debugLog,\r\n  debugError,\r\n  debugAuth,\r\n  debugHooks\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\errorReporting.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\performanceUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[432,435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[432,435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[442,445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[442,445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[792,795],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[792,795],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[802,805],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[802,805],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1953,1956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1953,1956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":84,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2451,2454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2451,2454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":103,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3079,3082],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3079,3082],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3135,3138],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3135,3138],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":226,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6843,6846],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6843,6846],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Performance monitoring and optimization utilities\r\n */\r\n\r\nimport { analytics } from './analytics';\r\n\r\n// Performance metrics storage\r\nconst performanceMetrics = {\r\n  pageLoadTime: 0,\r\n  domContentLoaded: 0,\r\n  firstContentfulPaint: 0,\r\n  largestContentfulPaint: 0,\r\n  firstInputDelay: 0,\r\n  cumulativeLayoutShift: 0\r\n};\r\n\r\n// Debounce function for search and input optimization\r\nexport const debounce = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeout: NodeJS.Timeout;\r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(() => func.apply(this, args), wait);\r\n  };\r\n};\r\n\r\n// Throttle function for scroll and resize events\r\nexport const throttle = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  limit: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let inThrottle: boolean;\r\n  return (...args: Parameters<T>) => {\r\n    if (!inThrottle) {\r\n      func.apply(this, args);\r\n      inThrottle = true;\r\n      setTimeout(() => inThrottle = false, limit);\r\n    }\r\n  };\r\n};\r\n\r\n// Lazy loading for images\r\nexport const lazyLoadImage = (src: string): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.onload = () => resolve(src);\r\n    img.onerror = () => reject(new Error(`Failed to load image: ${src}`));\r\n    img.src = src;\r\n  });\r\n};\r\n\r\n/**\r\n * Setup performance monitoring for Core Web Vitals\r\n */\r\nexport const setupPerformanceMonitoring = () => {\r\n  if (!('PerformanceObserver' in window)) {\r\n    return;\r\n  }\r\n\r\n  // Monitor Largest Contentful Paint\r\n  try {\r\n    const lcpObserver = new PerformanceObserver((list) => {\r\n      const entries = list.getEntries();\r\n      const lcp = entries[entries.length - 1];\r\n      performanceMetrics.largestContentfulPaint = lcp.startTime;\r\n      \r\n      analytics.trackPerformance('LCP', lcp.startTime, {\r\n        element: (lcp as any).element?.tagName,\r\n        threshold: lcp.startTime > 2500 ? 'poor' : lcp.startTime > 1200 ? 'needs-improvement' : 'good'\r\n      });\r\n    });\r\n    lcpObserver.observe({ type: 'largest-contentful-paint', buffered: true });\r\n  } catch (e) {\r\n    // Browser doesn't support LCP\r\n  }\r\n\r\n  // Monitor First Input Delay\r\n  try {\r\n    const fidObserver = new PerformanceObserver((list) => {\r\n      const entries = list.getEntries();\r\n      entries.forEach((entry) => {\r\n        const fid = (entry as any).processingStart - entry.startTime;\r\n        performanceMetrics.firstInputDelay = fid;\r\n        \r\n        analytics.trackPerformance('FID', fid, {\r\n          threshold: fid > 300 ? 'poor' : fid > 100 ? 'needs-improvement' : 'good'\r\n        });\r\n      });\r\n    });\r\n    fidObserver.observe({ type: 'first-input', buffered: true });\r\n  } catch (e) {\r\n    // Browser doesn't support FID\r\n  }\r\n\r\n  // Monitor Cumulative Layout Shift\r\n  try {\r\n    let clsScore = 0;\r\n    const clsObserver = new PerformanceObserver((list) => {\r\n      const entries = list.getEntries();\r\n      entries.forEach((entry) => {\r\n        if (!(entry as any).hadRecentInput) {\r\n          clsScore += (entry as any).value;\r\n        }\r\n      });\r\n      \r\n      performanceMetrics.cumulativeLayoutShift = clsScore;\r\n      \r\n      analytics.trackPerformance('CLS', clsScore, {\r\n        threshold: clsScore > 0.25 ? 'poor' : clsScore > 0.1 ? 'needs-improvement' : 'good'\r\n      });\r\n    });\r\n    clsObserver.observe({ type: 'layout-shift', buffered: true });\r\n  } catch (e) {\r\n    // Browser doesn't support CLS\r\n  }\r\n\r\n  // Monitor page load performance\r\n  window.addEventListener('load', () => {\r\n    const perfData = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\r\n    \r\n    performanceMetrics.pageLoadTime = perfData.loadEventEnd - perfData.fetchStart;\r\n    performanceMetrics.domContentLoaded = perfData.domContentLoadedEventEnd - perfData.fetchStart;\r\n    \r\n    analytics.trackPerformance('Page Load Time', performanceMetrics.pageLoadTime);\r\n    analytics.trackPerformance('DOM Content Loaded', performanceMetrics.domContentLoaded);\r\n    analytics.trackPerformance('TTFB', perfData.responseStart - perfData.fetchStart);\r\n  });\r\n\r\n  // Page visibility API for performance optimization\r\n  document.addEventListener('visibilitychange', () => {\r\n    if (document.hidden) {\r\n      optimizeVideoMemory();\r\n    } else {\r\n      resumeVideos();\r\n    }\r\n  });\r\n\r\n  // Cleanup on beforeunload\r\n  window.addEventListener('beforeunload', cleanupResources);\r\n  \r\n  // Regular cleanup every 5 minutes\r\n  setInterval(cleanupResources, 5 * 60 * 1000);\r\n};\r\n\r\n// Memory optimization for video elements\r\nexport const optimizeVideoMemory = () => {\r\n  const videos = document.querySelectorAll('video');\r\n  videos.forEach(video => {\r\n    if (!video.paused && document.hidden) {\r\n      video.pause();\r\n      video.setAttribute('data-was-playing', 'true');\r\n    }\r\n  });\r\n};\r\n\r\n// Resume videos when page becomes visible\r\nexport const resumeVideos = () => {\r\n  const videos = document.querySelectorAll('video[data-was-playing=\"true\"]');\r\n  videos.forEach(video => {\r\n    const videoElement = video as HTMLVideoElement;\r\n    videoElement.play();\r\n    videoElement.removeAttribute('data-was-playing');\r\n  });\r\n};\r\n\r\n/**\r\n * Clean up resources to prevent memory leaks\r\n */\r\nexport const cleanupResources = () => {\r\n  // Clean up video elements\r\n  const videos = document.querySelectorAll('video');\r\n  videos.forEach(video => {\r\n    if (!video.dataset.active) {\r\n      video.pause();\r\n      video.removeAttribute('src');\r\n      video.load();\r\n    }\r\n  });\r\n\r\n  // Clean up iframe elements that are not visible\r\n  const iframes = document.querySelectorAll('iframe');\r\n  iframes.forEach(iframe => {\r\n    const rect = iframe.getBoundingClientRect();\r\n    const isVisible = rect.top < window.innerHeight && rect.bottom > 0;\r\n    \r\n    if (!isVisible && !iframe.dataset.persistent) {\r\n      iframe.src = 'about:blank';\r\n    }\r\n  });\r\n\r\n  // Clean up image loading\r\n  const images = document.querySelectorAll('img[data-src]');\r\n  images.forEach(img => {\r\n    const rect = img.getBoundingClientRect();\r\n    const isVisible = rect.top < window.innerHeight + 500 && rect.bottom > -500;\r\n    \r\n    if (!isVisible) {\r\n      img.removeAttribute('src');\r\n    }\r\n  });\r\n\r\n  // Clear old caches\r\n  if ('caches' in window) {\r\n    caches.keys().then(cacheNames => {\r\n      cacheNames.forEach(cacheName => {\r\n        if (cacheName.includes('old-') || cacheName.includes('temp-')) {\r\n          caches.delete(cacheName);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Trigger garbage collection if available\r\n  if (window.gc) {\r\n    window.gc();\r\n  }\r\n};\r\n\r\n/**\r\n * Optimize images for current network conditions\r\n */\r\nexport const optimizeImageLoading = () => {\r\n  if ('connection' in navigator) {\r\n    const connection = (navigator as any).connection;\r\n    \r\n    if (connection && (connection.effectiveType === '2g' || connection.effectiveType === 'slow-2g')) {\r\n      // Use lower quality images for slow connections\r\n      const images = document.querySelectorAll('img');\r\n      images.forEach(img => {\r\n        if (img.src.includes('w500')) {\r\n          img.src = img.src.replace('w500', 'w200');\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get current performance metrics\r\n */\r\nexport const getPerformanceMetrics = () => {\r\n  return { ...performanceMetrics };\r\n};\r\n\r\n/**\r\n * Monitor resource loading\r\n */\r\nexport const monitorResourceLoading = () => {\r\n  if ('PerformanceObserver' in window) {\r\n    const resourceObserver = new PerformanceObserver((list) => {\r\n      const entries = list.getEntries();\r\n      entries.forEach((entry) => {\r\n        const resource = entry as PerformanceResourceTiming;\r\n        \r\n        // Track large resources\r\n        if (resource.transferSize > 1000000) { // > 1MB\r\n          analytics.trackEvent('large_resource_loaded', {\r\n            name: resource.name,\r\n            size: resource.transferSize,\r\n            duration: resource.duration\r\n          });\r\n        }\r\n        \r\n        // Track slow resources\r\n        if (resource.duration > 5000) { // > 5 seconds\r\n          analytics.trackEvent('slow_resource_loaded', {\r\n            name: resource.name,\r\n            duration: resource.duration,\r\n            size: resource.transferSize\r\n          });\r\n        }\r\n      });\r\n    });\r\n    \r\n    try {\r\n      resourceObserver.observe({ entryTypes: ['resource'] });\r\n    } catch (e) {\r\n      // Browser doesn't support resource timing\r\n    }\r\n  }\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\premiumUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\productionConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\productionLogger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2783,2786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2783,2786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3331,3334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3331,3334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production-ready logging system\r\n * Replaces all console.log/console.error statements\r\n */\r\n\r\nimport { ErrorReport, AnalyticsEvent } from '@/types/production';\r\n\r\nexport enum LogLevel {\r\n  DEBUG = 0,\r\n  INFO = 1,\r\n  WARN = 2,\r\n  ERROR = 3,\r\n  CRITICAL = 4\r\n}\r\n\r\ninterface LogEntry {\r\n  level: LogLevel;\r\n  message: string;\r\n  context?: Record<string, unknown>;\r\n  timestamp: number;\r\n  component?: string;\r\n}\r\n\r\nclass ProductionLogger {\r\n  private logs: LogEntry[] = [];\r\n  private maxLogs = 1000;\r\n  private isDev = process.env.NODE_ENV === 'development';\r\n\r\n  debug(message: string, context?: Record<string, unknown>, component?: string) {\r\n    this.log(LogLevel.DEBUG, message, context, component);\r\n  }\r\n\r\n  info(message: string, context?: Record<string, unknown>, component?: string) {\r\n    this.log(LogLevel.INFO, message, context, component);\r\n  }\r\n\r\n  warn(message: string, context?: Record<string, unknown>, component?: string) {\r\n    this.log(LogLevel.WARN, message, context, component);\r\n  }\r\n\r\n  error(message: string, context?: Record<string, unknown>, component?: string) {\r\n    this.log(LogLevel.ERROR, message, context, component);\r\n  }\r\n\r\n  critical(message: string, context?: Record<string, unknown>, component?: string) {\r\n    this.log(LogLevel.CRITICAL, message, context, component);\r\n  }\r\n\r\n  private log(level: LogLevel, message: string, context?: Record<string, unknown>, component?: string) {\r\n    const entry: LogEntry = {\r\n      level,\r\n      message,\r\n      context,\r\n      timestamp: Date.now(),\r\n      component\r\n    };\r\n\r\n    // Add to internal log store\r\n    this.logs.push(entry);\r\n    if (this.logs.length > this.maxLogs) {\r\n      this.logs.shift();\r\n    }\r\n\r\n    // In development, still use console\r\n    if (this.isDev) {\r\n      const logMethod = this.getConsoleMethod(level);\r\n      if (context) {\r\n        logMethod(`[${component || 'Unknown'}] ${message}`, context);\r\n      } else {\r\n        logMethod(`[${component || 'Unknown'}] ${message}`);\r\n      }\r\n    }\r\n\r\n    // In production, send to external service\r\n    if (!this.isDev && level >= LogLevel.ERROR) {\r\n      this.sendToMonitoringService(entry);\r\n    }\r\n  }\r\n\r\n  private getConsoleMethod(level: LogLevel) {\r\n    switch (level) {\r\n      case LogLevel.DEBUG:\r\n        return console.debug;\r\n      case LogLevel.INFO:\r\n        return console.info;\r\n      case LogLevel.WARN:\r\n        return console.warn;\r\n      case LogLevel.ERROR:\r\n      case LogLevel.CRITICAL:\r\n        return console.error;\r\n      default:\r\n        return console.log;\r\n    }\r\n  }\r\n\r\n  private async sendToMonitoringService(entry: LogEntry) {\r\n    try {\r\n      // In production, send to your monitoring service\r\n      // For now, we'll use a placeholder\r\n      if (typeof window !== 'undefined' && (window as any).errorReporter) {\r\n        const errorReport: ErrorReport = {\r\n          message: entry.message,\r\n          component: entry.component || 'Unknown',\r\n          timestamp: entry.timestamp,\r\n          url: window.location.href,\r\n          userAgent: navigator.userAgent,\r\n          severity: this.mapLevelToSeverity(entry.level),\r\n          context: { \r\n            component: entry.component || 'Unknown',\r\n            action: 'log',\r\n            metadata: { level: entry.level, ...entry.context }\r\n          }\r\n        };\r\n\r\n        (window as any).errorReporter.reportError(errorReport);\r\n      }\r\n    } catch (error) {\r\n      // Fallback - only log critical errors to console in production\r\n      if (entry.level === LogLevel.CRITICAL) {\r\n        console.error('Critical error:', entry.message, entry.context);\r\n      }\r\n    }\r\n  }\r\n\r\n  private mapLevelToSeverity(level: LogLevel): ErrorReport['severity'] {\r\n    switch (level) {\r\n      case LogLevel.DEBUG:\r\n      case LogLevel.INFO:\r\n        return 'low';\r\n      case LogLevel.WARN:\r\n        return 'medium';\r\n      case LogLevel.ERROR:\r\n        return 'high';\r\n      case LogLevel.CRITICAL:\r\n        return 'critical';\r\n      default:\r\n        return 'medium';\r\n    }\r\n  }\r\n\r\n  getLogs(minLevel: LogLevel = LogLevel.INFO): LogEntry[] {\r\n    return this.logs.filter(log => log.level >= minLevel);\r\n  }\r\n\r\n  clearLogs() {\r\n    this.logs = [];\r\n  }\r\n}\r\n\r\nexport const logger = new ProductionLogger();\r\n\r\n// Convenience functions to replace console.log throughout the app\r\nexport const logDebug = (message: string, context?: Record<string, unknown>, component?: string) => \r\n  logger.debug(message, context, component);\r\n\r\nexport const logInfo = (message: string, context?: Record<string, unknown>, component?: string) => \r\n  logger.info(message, context, component);\r\n\r\nexport const logWarn = (message: string, context?: Record<string, unknown>, component?: string) => \r\n  logger.warn(message, context, component);\r\n\r\nexport const logError = (message: string, context?: Record<string, unknown>, component?: string) => \r\n  logger.error(message, context, component);\r\n\r\nexport const logCritical = (message: string, context?: Record<string, unknown>, component?: string) => \r\n  logger.critical(message, context, component);","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\productionOptimization.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[889,892],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[889,892],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[952,955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[952,955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2589,2592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2589,2592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production optimization utilities\r\n */\r\n\r\n// Performance monitoring\r\nexport const initPerformanceMonitoring = () => {\r\n  if ('performance' in window && 'PerformanceObserver' in window) {\r\n    // Monitor largest contentful paint\r\n    const lcpObserver = new PerformanceObserver((list) => {\r\n      const entries = list.getEntries();\r\n      const lcp = entries[entries.length - 1];\r\n      \r\n      // Log LCP metric if > 2.5s (poor threshold)\r\n      if (lcp.startTime > 2500) {\r\n        // In production, send to analytics\r\n        void 0; // Replace with actual analytics call\r\n      }\r\n    });\r\n    \r\n    lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });\r\n    \r\n    // Monitor cumulative layout shift\r\n    const clsObserver = new PerformanceObserver((list) => {\r\n      let cumulativeScore = 0;\r\n      for (const entry of list.getEntries()) {\r\n        if (!(entry as any).hadRecentInput) {\r\n          cumulativeScore += (entry as any).value;\r\n        }\r\n      }\r\n      \r\n      // Log CLS metric if > 0.1 (poor threshold)\r\n      if (cumulativeScore > 0.1) {\r\n        // In production, send to analytics\r\n        void 0; // Replace with actual analytics call\r\n      }\r\n    });\r\n    \r\n    clsObserver.observe({ entryTypes: ['layout-shift'] });\r\n  }\r\n};\r\n\r\n// Resource optimization\r\nexport const optimizeResources = () => {\r\n  // Preload critical resources\r\n  const criticalResources = [\r\n    '/sw.js',\r\n    // Add other critical resources\r\n  ];\r\n  \r\n  criticalResources.forEach(resource => {\r\n    const link = document.createElement('link');\r\n    link.rel = 'preload';\r\n    link.href = resource;\r\n    link.as = resource.endsWith('.js') ? 'script' : 'fetch';\r\n    document.head.appendChild(link);\r\n  });\r\n};\r\n\r\n// Memory management\r\nexport const optimizeMemory = () => {\r\n  // Clear inactive video elements\r\n  const inactiveVideos = document.querySelectorAll('video:not([data-active])');\r\n  inactiveVideos.forEach(video => {\r\n    const videoElement = video as HTMLVideoElement;\r\n    if (videoElement.src) {\r\n      videoElement.src = '';\r\n      videoElement.load();\r\n    }\r\n  });\r\n  \r\n  // Clear unused image caches periodically\r\n  if ('caches' in window) {\r\n    caches.keys().then(cacheNames => {\r\n      cacheNames.forEach(cacheName => {\r\n        if (cacheName.includes('old-') || cacheName.includes('temp-')) {\r\n          caches.delete(cacheName);\r\n        }\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\n// Network optimization\r\nexport const optimizeNetwork = () => {\r\n  // Implement connection-aware loading\r\n  if ('connection' in navigator) {\r\n    const connection = (navigator as any).connection;\r\n    \r\n    // Reduce quality for slow connections\r\n    if (connection.effectiveType === '2g' || connection.effectiveType === 'slow-2g') {\r\n      document.documentElement.setAttribute('data-connection', 'slow');\r\n    }\r\n    \r\n    // Enable save-data mode\r\n    if (connection.saveData) {\r\n      document.documentElement.setAttribute('data-save-data', 'true');\r\n    }\r\n  }\r\n};\r\n\r\n// Initialize all optimizations\r\nexport const initProductionOptimizations = () => {\r\n  if (process.env.NODE_ENV === 'production') {\r\n    initPerformanceMonitoring();\r\n    optimizeResources();\r\n    \r\n    // Run memory optimization every 5 minutes\r\n    setInterval(optimizeMemory, 5 * 60 * 1000);\r\n    \r\n    // Run network optimization on load\r\n    optimizeNetwork();\r\n    \r\n    // Import and setup performance monitoring from separate module\r\n    import('./performanceUtils').then(({ setupPerformanceMonitoring }) => {\r\n      setupPerformanceMonitoring();\r\n    });\r\n  }\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\productionReadiness.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\productionSecurity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\productionUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1833,1836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1833,1836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production utilities for performance monitoring and error reporting\r\n */\r\n\r\ninterface PerformanceMetrics {\r\n  loadTime: number;\r\n  renderTime: number;\r\n  errorCount: number;\r\n  userInteractions: number;\r\n}\r\n\r\nclass ProductionMonitor {\r\n  private metrics: PerformanceMetrics = {\r\n    loadTime: 0,\r\n    renderTime: 0,\r\n    errorCount: 0,\r\n    userInteractions: 0\r\n  };\r\n\r\n  private startTime = performance.now();\r\n\r\n  constructor() {\r\n    this.init();\r\n  }\r\n\r\n  private init() {\r\n    // Monitor page load performance\r\n    window.addEventListener('load', () => {\r\n      this.metrics.loadTime = performance.now() - this.startTime;\r\n      this.reportMetrics();\r\n    });\r\n\r\n    // Monitor errors\r\n    window.addEventListener('error', (event) => {\r\n      this.metrics.errorCount++;\r\n      this.reportError({\r\n        message: event.message,\r\n        filename: event.filename,\r\n        lineno: event.lineno,\r\n        colno: event.colno,\r\n        error: event.error\r\n      });\r\n    });\r\n\r\n    // Monitor unhandled promise rejections\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      this.metrics.errorCount++;\r\n      this.reportError({\r\n        message: 'Unhandled Promise Rejection',\r\n        error: event.reason\r\n      });\r\n    });\r\n\r\n    // Monitor user interactions\r\n    ['click', 'touch', 'keydown'].forEach(eventType => {\r\n      document.addEventListener(eventType, () => {\r\n        this.metrics.userInteractions++;\r\n      }, { passive: true });\r\n    });\r\n  }\r\n\r\n  private reportMetrics() {\r\n    // In production, this would send metrics to analytics service\r\n    // Production: Send metrics to monitoring service\r\n    // Development: Log to console\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('Performance Metrics:', this.metrics);\r\n    }\r\n  }\r\n\r\n  private reportError(errorInfo: any) {\r\n    // In production, this would send errors to monitoring service\r\n    console.error('Production Error:', errorInfo);\r\n  }\r\n\r\n  public getMetrics(): PerformanceMetrics {\r\n    return { ...this.metrics };\r\n  }\r\n\r\n  public measureRenderTime(componentName: string, renderFn: () => void) {\r\n    const start = performance.now();\r\n    renderFn();\r\n    const end = performance.now();\r\n        // Production error handling - no console.log \r\n        if (process.env.NODE_ENV === 'development') {\r\n          console.log(`${componentName} render time: ${end - start}ms`);\r\n        }\r\n  }\r\n}\r\n\r\n// Initialize production monitor\r\nexport const productionMonitor = new ProductionMonitor();\r\n\r\nexport default ProductionMonitor;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\productionValidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\providers\\downloadProviders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\providers\\providerUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":104,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":107,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[239,242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[239,242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[395,398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[395,398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { providerConfigs, SourceType } from '../streamingUtils';\r\n\r\n/**\r\n * Get streaming URL for the content based on provider\r\n */\r\nexport const getStreamingUrlForProvider = (contentId: string, provider: string = 'vidsrc_su', options: any = {}): string => {\r\n  // Provider URL construction functions - only the three requested providers\r\n  const providers: Record<string, (id: string, opts: any) => string> = {\r\n    vidsrc_xyz: (id, opts) => \r\n      `https://vidsrc.xyz/embed/${id}?autoplay=${opts.autoplay ? '1' : '0'}`,\r\n    \r\n    vidsrc_su: (id, opts) => {\r\n      const type = opts.contentType === 'movie' ? 'movie' : 'tv';\r\n      const season = typeof opts.season === 'number' && !isNaN(opts.season) ? opts.season : '';\r\n      const episode = typeof opts.episodeNum === 'number' && !isNaN(opts.episodeNum) ? opts.episodeNum : '';\r\n      const seasonEpisodePath = (season !== '' && episode !== '') ? `/season-${season}/episode-${episode}` : '';\r\n      return `https://vidsrc.su/embed/${type}/${id}${seasonEpisodePath}`;\r\n    },\r\n    \r\n    vidsrc_vip: (id, opts) => {\r\n      const type = opts.contentType === 'movie' ? 'movie' : 'tv';\r\n      const season = typeof opts.season === 'number' && !isNaN(opts.season) ? opts.season : '';\r\n      const episode = typeof opts.episodeNum === 'number' && !isNaN(opts.episodeNum) ? opts.episodeNum : '';\r\n      const seasonEpisodePath = (season !== '' && episode !== '') ? `/s${season}e${episode}` : '';\r\n      return `https://vidsrc.vip/embed/${type}/${id}${seasonEpisodePath}?autoplay=${opts.autoplay ? '1' : '0'}`;\r\n    }\r\n  };\r\n  \r\n  // Choose best provider by content type if not specified\r\n  if (!provider || !providers[provider]) {\r\n    provider = 'vidsrc_su'; // Default fallback\r\n  }\r\n  \r\n  // Choose provider function\r\n  const providerFn = providers[provider];\r\n  \r\n  // Return URL\r\n  return providerFn(contentId, options);\r\n};\r\n\r\n/**\r\n * Determine if a provider requires iframe embedding\r\n */\r\nexport const isIframeSourceImpl = (provider: string): boolean => {\r\n  const config = providerConfigs[provider as keyof typeof providerConfigs];\r\n  return config?.type === SourceType.IFRAME;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\providers\\trailerProviders.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1484,1487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1484,1487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1751,1754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1751,1754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2027,2030],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2027,2030],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/**\r\n * Trailer provider utilities\r\n * Uses TMDb API to fetch official trailers from YouTube\r\n */\r\n\r\nconst TMDB_BASE_URL = \"https://api.themoviedb.org/3\";\r\nconst TMDB_API_KEY = \"4626200399b08f9d04b72348e3625f15\";\r\n\r\n/**\r\n * Get trailer URL from TMDb API\r\n * @param contentId - The TMDb ID of the content\r\n * @param contentType - Either 'movie' or 'tv'\r\n * @returns YouTube video ID (not the full URL)\r\n */\r\nexport const getTrailerUrlImpl = async (contentId: string, contentType: string = 'movie'): Promise<string> => {\r\n  try {\r\n    // Determine the correct endpoint based on content type\r\n    const endpoint = contentType === 'movie' ? 'movie' : 'tv';\r\n    const url = `${TMDB_BASE_URL}/${endpoint}/${contentId}/videos?api_key=${TMDB_API_KEY}`;\r\n    \r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`TMDb API request failed: ${response.status}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data.results || data.results.length === 0) {\r\n      // No trailers found, try alternative content type\r\n      if (contentType === 'movie') {\r\n        return await getTrailerUrlImpl(contentId, 'tv');\r\n      } else if (contentType === 'tv' || contentType === 'series') {\r\n        return await getTrailerUrlImpl(contentId, 'movie');\r\n      }\r\n      return ''; // Return empty string instead of Rickroll\r\n    }\r\n    \r\n    // Look for official trailers from YouTube\r\n    const youtubeTrailers = data.results.filter((video: any) => \r\n      video.site === 'YouTube' && \r\n      (video.type === 'Trailer' || video.type === 'Teaser')\r\n    );\r\n    \r\n    if (youtubeTrailers.length > 0) {\r\n      // Prefer official trailers over teasers\r\n      const officialTrailer = youtubeTrailers.find((video: any) => video.type === 'Trailer');\r\n      const selectedTrailer = officialTrailer || youtubeTrailers[0];\r\n      \r\n      return selectedTrailer.key;\r\n    }\r\n    \r\n    // If no YouTube trailers, look for any YouTube videos\r\n    const youtubeVideos = data.results.filter((video: any) => video.site === 'YouTube');\r\n    \r\n    if (youtubeVideos.length > 0) {\r\n      return youtubeVideos[0].key;\r\n    }\r\n    \r\n    // If no videos found, return empty string\r\n    return '';\r\n    \r\n  } catch (error) {\r\n    // Try with alternative content type if the first attempt fails\r\n    if (contentType === 'movie') {\r\n      try {\r\n        return await getTrailerUrlImpl(contentId, 'tv');\r\n      } catch (retryError) {\r\n        // Both attempts failed\r\n      }\r\n    } else if (contentType === 'tv' || contentType === 'series') {\r\n      try {\r\n        return await getTrailerUrlImpl(contentId, 'movie');\r\n      } catch (retryError) {\r\n        // Both attempts failed\r\n      }\r\n    }\r\n    \r\n    // No trailer available\r\n    return '';\r\n  }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\responsiveUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\securityUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\streamingUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1804,1807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1804,1807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Streaming utility functions\r\n */\r\n\r\n// Define quality options for streaming and downloading\r\nexport const QUALITY_OPTIONS = [\r\n  { value: \"4k\", label: \"4K (2160p)\" },\r\n  { value: \"1080p\", label: \"Full HD (1080p)\" },\r\n  { value: \"720p\", label: \"HD (720p)\" },\r\n  { value: \"480p\", label: \"SD (480p)\" },\r\n  { value: \"360p\", label: \"Low (360p)\" }\r\n];\r\n\r\n// Define source types for different providers\r\nexport enum SourceType {\r\n  DIRECT = 'direct',  // Direct video URL (mp4, etc)\r\n  IFRAME = 'iframe',  // Embed via iframe\r\n  HLS = 'hls',        // HLS streaming (.m3u8)\r\n  DASH = 'dash'       // DASH streaming (.mpd)\r\n}\r\n\r\n// Define provider configuration type\r\nexport interface ProviderConfig {\r\n  type: SourceType;\r\n  supportsFullHD?: boolean;\r\n  isPremium?: boolean;\r\n  contentTypes: string[];\r\n  supportsDownload?: boolean;\r\n}\r\n\r\n// Provider configuration - only keeping the three requested providers\r\nexport const providerConfigs: Record<string, ProviderConfig> = {\r\n  vidsrc_xyz: { \r\n    type: SourceType.IFRAME,\r\n    supportsFullHD: true,\r\n    contentTypes: ['movie', 'series', 'anime']\r\n  },\r\n  vidsrc_su: {\r\n    type: SourceType.IFRAME,\r\n    supportsFullHD: true,\r\n    contentTypes: ['movie', 'series', 'anime']\r\n  },\r\n  vidsrc_vip: {\r\n    type: SourceType.IFRAME,\r\n    supportsFullHD: true,\r\n    contentTypes: ['movie', 'series', 'anime']\r\n  }\r\n};\r\n\r\n// Import the provider functions from separate modules\r\nimport { \r\n  getStreamingUrlForProvider,\r\n  isIframeSourceImpl\r\n} from './providers/providerUtils';\r\n\r\nimport { getDownloadUrlImpl } from './providers/downloadProviders';\r\nimport { getTrailerUrlImpl } from './providers/trailerProviders';\r\n\r\n/**\r\n * Get streaming URL for the content\r\n */\r\nexport const getStreamingUrl = (contentId: string, provider: string = 'vidsrc_su', options: any = {}): string => {\r\n  return getStreamingUrlForProvider(contentId, provider, options);\r\n};\r\n\r\n/**\r\n * Determine if a provider requires iframe embedding\r\n */\r\nexport const isIframeSource = (provider: string): boolean => {\r\n  return isIframeSourceImpl(provider);\r\n};\r\n\r\n/**\r\n * Get download URL for the content\r\n */\r\nexport const getDownloadUrl = (contentId: string, quality: string = '1080p'): string => {\r\n  return getDownloadUrlImpl(contentId, quality);\r\n};\r\n\r\n/**\r\n * Get trailer URL from YouTube API\r\n */\r\nexport const getTrailerUrl = async (contentId: string, contentType: string = 'movie'): Promise<string> => {\r\n  return getTrailerUrlImpl(contentId, contentType);\r\n};\r\n\r\n/**\r\n * Start recording for live content\r\n */\r\nexport const startRecording = async (options = {}): Promise<MediaStream | null> => {\r\n  try {\r\n    if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {\r\n      const stream = await navigator.mediaDevices.getDisplayMedia({\r\n        video: true,\r\n        audio: true\r\n      });\r\n      return stream;\r\n    } else {\r\n      throw new Error('Screen recording not supported');\r\n    }\r\n  } catch (error) {\r\n    // Production error handling - no console.error\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Get a list of all available streaming services\r\n */\r\nexport const getAllStreamingServices = () => {\r\n  return Object.entries(providerConfigs).map(([id, config]) => ({\r\n    id,\r\n    name: id.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\r\n    isPremium: config.isPremium || false,\r\n    supportsDownload: config.supportsDownload || false,\r\n    contentTypes: config.contentTypes || ['movie'],\r\n    supportsFullHD: config.supportsFullHD !== undefined ? config.supportsFullHD : false\r\n  }));\r\n};\r\n\r\n/**\r\n * Generate correct runtime for content based on content type\r\n */\r\nexport const getContentRuntime = (contentType: string, episodeNumber?: number): string => {\r\n  // Default runtimes based on content type\r\n  const defaultRuntimes: Record<string, number> = {\r\n    'movie': 120, // 2 hours average\r\n    'series': 45, // 45 minutes average\r\n    'anime': 24,  // 24 minutes average\r\n  };\r\n  \r\n  const minutes = defaultRuntimes[contentType] || 90;\r\n  \r\n  if (minutes >= 60) {\r\n    const hours = Math.floor(minutes / 60);\r\n    const remainingMinutes = minutes % 60;\r\n    return `${hours}h ${remainingMinutes}m`;\r\n  }\r\n  \r\n  return `${minutes}m`;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\tmdbApiCleanup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\trackingUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[818,821],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[818,821],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2248,2251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2248,2251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Tracking and watch history utility functions\r\n */\r\n\r\n/**\r\n * Track streaming activity\r\n */\r\nexport const trackStreamingActivity = (\r\n  contentId: string,\r\n  userId: string,\r\n  currentTime: number,\r\n  episodeId?: string\r\n): void => {\r\n  // In a real implementation, this would send data to a backend\r\n  // Production tracking - silent operation\r\n  if (process.env.NODE_ENV === 'development') {\r\n    console.log(`Tracking activity: Content ID ${contentId}, User ID ${userId}, Time ${currentTime}, Episode ID ${episodeId || 'N/A'}`);\r\n  }\r\n  \r\n  // Store locally for history\r\n  try {\r\n    const historyKey = 'watch_history';\r\n    const history = JSON.parse(localStorage.getItem(historyKey) || '[]');\r\n    \r\n    // Find if this content already exists in history\r\n    const existingIndex = history.findIndex((item: any) => \r\n      item.contentId === contentId && item.episodeId === episodeId\r\n    );\r\n    \r\n    const timestamp = new Date().toISOString();\r\n    \r\n    if (existingIndex >= 0) {\r\n      // Update existing entry\r\n      history[existingIndex].currentTime = currentTime;\r\n      history[existingIndex].lastWatched = timestamp;\r\n    } else {\r\n      // Add new entry\r\n      history.unshift({\r\n        contentId,\r\n        episodeId,\r\n        currentTime,\r\n        lastWatched: timestamp,\r\n        userId\r\n      });\r\n    }\r\n    \r\n    // Keep only last 50 items\r\n    const trimmedHistory = history.slice(0, 50);\r\n    localStorage.setItem(historyKey, JSON.stringify(trimmedHistory));\r\n  } catch (error) {\r\n    console.error('Error saving watch history:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Mark content as complete\r\n */\r\nexport const markContentAsComplete = (\r\n  contentId: string,\r\n  userId: string,\r\n  episodeId?: string\r\n): void => {\r\n  // In a real implementation, this would send data to a backend\r\n  // Production tracking - silent operation\r\n  if (process.env.NODE_ENV === 'development') {\r\n    console.log(`Marking complete: Content ID ${contentId}, User ID ${userId}, Episode ID ${episodeId || 'N/A'}`);\r\n  }\r\n  \r\n  // Store completion status locally\r\n  try {\r\n    const completedKey = 'completed_content';\r\n    const completed = JSON.parse(localStorage.getItem(completedKey) || '[]');\r\n    \r\n    const existingItem = completed.find((item: any) => \r\n      item.contentId === contentId && item.episodeId === episodeId\r\n    );\r\n    \r\n    if (!existingItem) {\r\n      completed.push({\r\n        contentId,\r\n        episodeId,\r\n        userId,\r\n        completedAt: new Date().toISOString()\r\n      });\r\n      \r\n      localStorage.setItem(completedKey, JSON.stringify(completed));\r\n    }\r\n  } catch (error) {\r\n    console.error('Error saving completion status:', error);\r\n  }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\urlUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\validationUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\utils\\videoUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Administrator\\OneDrive\\Desktop\\cinemaxstream\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
